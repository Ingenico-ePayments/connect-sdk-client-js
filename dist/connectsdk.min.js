!function(){function t(t){function e(t){if(8!==t&&16!==t&&24!==t&&32!==t)throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}function n(t){if(this.data="",this.read=0,"string"==typeof t)this.data=t;else if(i.isArrayBuffer(t)||i.isArrayBufferView(t)){var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch(t){for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof n||"object"==typeof t&&"string"==typeof t.data&&"number"==typeof t.read)&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}function r(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var n=i.isArrayBuffer(t),r=i.isArrayBufferView(t);if(n||r)return this.data=n?new DataView(t):new DataView(t.buffer,t.byteOffset,t.byteLength),void(this.write="writeOffset"in e?e.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!==t&&void 0!==t&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}var i=t.util=t.util||{};!function(){function t(t){if(t.source===window&&t.data===e){t.stopPropagation();var r=n.slice();n.length=0,r.forEach(function(t){t()})}}if("undefined"!=typeof process&&process.nextTick)return i.nextTick=process.nextTick,void("function"==typeof setImmediate?i.setImmediate=setImmediate:i.setImmediate=i.nextTick);if("function"==typeof setImmediate)return i.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(i.nextTick=function(t){return setImmediate(t)});if(i.setImmediate=function(t){setTimeout(t,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var e="forge.setImmediate",n=[];i.setImmediate=function(t){n.push(t),1===n.length&&window.postMessage(e,"*")},window.addEventListener("message",t,!0)}if("undefined"!=typeof MutationObserver){var r=Date.now(),o=!0,s=document.createElement("div"),n=[];new MutationObserver(function(){var t=n.slice();n.length=0,t.forEach(function(t){t()})}).observe(s,{attributes:!0});var a=i.setImmediate;i.setImmediate=function(t){Date.now()-r>15?(r=Date.now(),a(t)):(n.push(t),1===n.length&&s.setAttribute("a",o=!o))}}i.nextTick=i.setImmediate}(),i.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},i.isArrayBuffer=function(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer},i.isArrayBufferView=function(t){return t&&i.isArrayBuffer(t.buffer)&&void 0!==t.byteLength},i.ByteBuffer=n,i.ByteStringBuffer=n;i.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},i.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},i.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},i.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))},i.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var n=this.data;e>0;)1&e&&(n+=t),(e>>>=1)>0&&(t+=t);return this.data=n,this._optimizeConstructedString(e),this},i.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this},i.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(i.encodeUtf8(t))},i.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},i.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},i.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},i.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255))},i.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))},i.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))},i.ByteStringBuffer.prototype.putInt=function(t,n){e(n);var r="";do{n-=8,r+=String.fromCharCode(t>>n&255)}while(n>0);return this.putBytes(r)},i.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)},i.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())},i.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},i.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t},i.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t},i.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t},i.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t},i.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t},i.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t},i.ByteStringBuffer.prototype.getInt=function(t){e(t);var n=0;do{n=(n<<8)+this.data.charCodeAt(this.read++),t-=8}while(t>0);return n},i.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),n=2<<t-2;return e>=n&&(e-=n<<1),e},i.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},i.ByteStringBuffer.prototype.bytes=function(t){return void 0===t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},i.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)},i.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this},i.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},i.ByteStringBuffer.prototype.copy=function(){var t=i.createBuffer(this.data);return t.read=this.read,t},i.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},i.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},i.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this},i.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var n=this.data.charCodeAt(e);n<16&&(t+="0"),t+=n.toString(16)}return t},i.ByteStringBuffer.prototype.toString=function(){return i.decodeUtf8(this.bytes())},i.DataBuffer=r,i.DataBuffer.prototype.length=function(){return this.write-this.read},i.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},i.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var n=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),r=new Uint8Array(this.length()+e);return r.set(n),this.data=new DataView(r.buffer),this},i.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this},i.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var n=0;n<e;++n)this.data.setUint8(t);return this},i.DataBuffer.prototype.putBytes=function(t,e){if(i.isArrayBufferView(t)){var n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),r=n.byteLength-n.byteOffset;this.accommodate(r);var o=new Uint8Array(this.data.buffer,this.write);return o.set(n),this.write+=r,this}if(i.isArrayBuffer(t)){var n=new Uint8Array(t);this.accommodate(n.byteLength);var o=new Uint8Array(this.data.buffer);return o.set(n,this.write),this.write+=n.byteLength,this}if(t instanceof i.DataBuffer||"object"==typeof t&&"number"==typeof t.read&&"number"==typeof t.write&&i.isArrayBufferView(t.data)){var n=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(n.byteLength);var o=new Uint8Array(t.data.byteLength,this.write);return o.set(n),this.write+=n.byteLength,this}if(t instanceof i.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary","string"==typeof t){var s;if("hex"===e)return this.accommodate(Math.ceil(t.length/2)),s=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.hex.decode(t,s,this.write),this;if("base64"===e)return this.accommodate(3*Math.ceil(t.length/4)),s=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.base64.decode(t,s,this.write),this;if("utf8"===e&&(t=i.encodeUtf8(t),e="binary"),"binary"===e||"raw"===e)return this.accommodate(t.length),s=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.raw.decode(s),this;if("utf16"===e)return this.accommodate(2*t.length),s=new Uint16Array(this.data.buffer,this.write),this.write+=i.text.utf16.encode(s),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)},i.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this},i.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")},i.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this},i.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this},i.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this},i.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this},i.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this},i.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this},i.DataBuffer.prototype.putInt=function(t,n){e(n),this.accommodate(n/8);do{n-=8,this.data.setInt8(this.write++,t>>n&255)}while(n>0);return this},i.DataBuffer.prototype.putSignedInt=function(t,n){return e(n),this.accommodate(n/8),t<0&&(t+=2<<n-1),this.putInt(t,n)},i.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},i.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t},i.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t},i.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t},i.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t},i.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t},i.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t},i.DataBuffer.prototype.getInt=function(t){e(t);var n=0;do{n=(n<<8)+this.data.getInt8(this.read++),t-=8}while(t>0);return n},i.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),n=2<<t-2;return e>=n&&(e-=n<<1),e},i.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},i.DataBuffer.prototype.bytes=function(t){return void 0===t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},i.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)},i.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this},i.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},i.DataBuffer.prototype.copy=function(){return new i.DataBuffer(this)},i.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this},i.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},i.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this},i.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var n=this.data.getUint8(e);n<16&&(t+="0"),t+=n.toString(16)}return t},i.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if("binary"===(t=t||"utf8")||"raw"===t)return i.binary.raw.encode(e);if("hex"===t)return i.binary.hex.encode(e);if("base64"===t)return i.binary.base64.encode(e);if("utf8"===t)return i.text.utf8.decode(e);if("utf16"===t)return i.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)},i.createBuffer=function(t,e){return e=e||"raw",void 0!==t&&"utf8"===e&&(t=i.encodeUtf8(t)),new i.ByteBuffer(t)},i.fillString=function(t,e){for(var n="";e>0;)1&e&&(n+=t),(e>>>=1)>0&&(t+=t);return n},i.xorBytes=function(t,e,n){for(var r="",i="",o="",s=0,a=0;n>0;--n,++s)i=t.charCodeAt(s)^e.charCodeAt(s),a>=10&&(r+=o,o="",a=0),o+=String.fromCharCode(i),++a;return r+=o},i.hexToBytes=function(t){var e="",n=0;for(!0&t.length&&(n=1,e+=String.fromCharCode(parseInt(t[0],16)));n<t.length;n+=2)e+=String.fromCharCode(parseInt(t.substr(n,2),16));return e},i.bytesToHex=function(t){return i.createBuffer(t).toHex()},i.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t)};var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];i.encode64=function(t,e){for(var n,r,i,s="",a="",u=0;u<t.length;)n=t.charCodeAt(u++),r=t.charCodeAt(u++),i=t.charCodeAt(u++),s+=o.charAt(n>>2),s+=o.charAt((3&n)<<4|r>>4),isNaN(r)?s+="==":(s+=o.charAt((15&r)<<2|i>>6),s+=isNaN(i)?"=":o.charAt(63&i)),e&&s.length>e&&(a+=s.substr(0,e)+"\r\n",s=s.substr(e));return a+=s},i.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e,n,r,i,o="",a=0;a<t.length;)e=s[t.charCodeAt(a++)-43],n=s[t.charCodeAt(a++)-43],r=s[t.charCodeAt(a++)-43],i=s[t.charCodeAt(a++)-43],o+=String.fromCharCode(e<<2|n>>4),64!==r&&(o+=String.fromCharCode((15&n)<<4|r>>2),64!==i&&(o+=String.fromCharCode((3&r)<<6|i)));return o},i.encodeUtf8=function(t){return unescape(encodeURIComponent(t))},i.decodeUtf8=function(t){return decodeURIComponent(escape(t))},i.binary={raw:{},hex:{},base64:{}},i.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)},i.binary.raw.decode=function(t,e,n){var r=e;r||(r=new Uint8Array(t.length)),n=n||0;for(var i=n,o=0;o<t.length;++o)r[i++]=t.charCodeAt(o);return e?i-n:r},i.binary.hex.encode=i.bytesToHex,i.binary.hex.decode=function(t,e,n){var r=e;r||(r=new Uint8Array(Math.ceil(t.length/2))),n=n||0;var i=0,o=n;for(1&t.length&&(i=1,r[o++]=parseInt(t[0],16));i<t.length;i+=2)r[o++]=parseInt(t.substr(i,2),16);return e?o-n:r},i.binary.base64.encode=function(t,e){for(var n,r,i,s="",a="",u=0;u<t.byteLength;)n=t[u++],r=t[u++],i=t[u++],s+=o.charAt(n>>2),s+=o.charAt((3&n)<<4|r>>4),isNaN(r)?s+="==":(s+=o.charAt((15&r)<<2|i>>6),s+=isNaN(i)?"=":o.charAt(63&i)),e&&s.length>e&&(a+=s.substr(0,e)+"\r\n",s=s.substr(e));return a+=s},i.binary.base64.decode=function(t,e,n){var r=e;r||(r=new Uint8Array(3*Math.ceil(t.length/4))),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),n=n||0;for(var i,o,a,u,c=0,l=n;c<t.length;)i=s[t.charCodeAt(c++)-43],o=s[t.charCodeAt(c++)-43],a=s[t.charCodeAt(c++)-43],u=s[t.charCodeAt(c++)-43],r[l++]=i<<2|o>>4,64!==a&&(r[l++]=(15&o)<<4|a>>2,64!==u&&(r[l++]=(3&a)<<6|u));return e?l-n:r.subarray(0,l)},i.text={utf8:{},utf16:{}},i.text.utf8.encode=function(t,e,n){t=i.encodeUtf8(t);var r=e;r||(r=new Uint8Array(t.length)),n=n||0;for(var o=n,s=0;s<t.length;++s)r[o++]=t.charCodeAt(s);return e?o-n:r},i.text.utf8.decode=function(t){return i.decodeUtf8(String.fromCharCode.apply(null,t))},i.text.utf16.encode=function(t,e,n){var r=e;r||(r=new Uint8Array(2*t.length));var i=new Uint16Array(r.buffer);n=n||0;for(var o=n,s=n,a=0;a<t.length;++a)i[s++]=t.charCodeAt(a),o+=2;return e?o-n:r},i.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))},i.deflate=function(t,e,n){if(e=i.decode64(t.deflate(i.encode64(e)).rval),n){var r=2;32&e.charCodeAt(1)&&(r=6),e=e.substring(r,e.length-4)}return e},i.inflate=function(t,e,n){var r=t.inflate(i.encode64(e)).rval;return null===r?null:i.decode64(r)};var a=function(t,e,n){if(!t)throw new Error("WebStorage not available.");var r;if(null===n?r=t.removeItem(e):(n=i.encode64(JSON.stringify(n)),r=t.setItem(e,n)),void 0!==r&&!0!==r.rval){var o=new Error(r.error.message);throw o.id=r.error.id,o.name=r.error.name,o}},u=function(t,e){if(!t)throw new Error("WebStorage not available.");var n=t.getItem(e);if(t.init)if(null===n.rval){if(n.error){var r=new Error(n.error.message);throw r.id=n.error.id,r.name=n.error.name,r}n=null}else n=n.rval;return null!==n&&(n=JSON.parse(i.decode64(n))),n},c=function(t,e,n,r){var i=u(t,e);null===i&&(i={}),i[n]=r,a(t,e,i)},l=function(t,e,n){var r=u(t,e);return null!==r&&(r=n in r?r[n]:null),r},h=function(t,e,n){var r=u(t,e);if(null!==r&&n in r){delete r[n];var i=!0;for(var o in r){i=!1;break}i&&(r=null),a(t,e,r)}},d=function(t,e){a(t,e,null)},f=function(t,e,n){var r=null;void 0===n&&(n=["web","flash"]);var i,o=!1,s=null;for(var a in n){i=n[a];try{if("flash"===i||"both"===i){if(null===e[0])throw new Error("Flash local storage not available.");r=t.apply(this,e),o="flash"===i}"web"!==i&&"both"!==i||(e[0]=localStorage,r=t.apply(this,e),o=!0)}catch(t){s=t}if(o)break}if(!o)throw s;return r};i.setItem=function(t,e,n,r,i){f(c,arguments,i)},i.getItem=function(t,e,n,r){return f(l,arguments,r)},i.removeItem=function(t,e,n,r){f(h,arguments,r)},i.clearItems=function(t,e,n){f(d,arguments,n)},i.parseUrl=function(t){var e=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;e.lastIndex=0;var n=e.exec(t),r=null===n?null:{full:t,scheme:n[1],host:n[2],port:n[3],path:n[4]};return r&&(r.fullHost=r.host,r.port?80!==r.port&&"http"===r.scheme?r.fullHost+=":"+r.port:443!==r.port&&"https"===r.scheme&&(r.fullHost+=":"+r.port):"http"===r.scheme?r.port=80:"https"===r.scheme&&(r.port=443),r.full=r.scheme+"://"+r.fullHost),r};var p=null;i.getQueryVariables=function(t){var e,n=function(t){for(var e={},n=t.split("&"),r=0;r<n.length;r++){var i,o,s=n[r].indexOf("=");s>0?(i=n[r].substring(0,s),o=n[r].substring(s+1)):(i=n[r],o=null),i in e||(e[i]=[]),i in Object.prototype||null===o||e[i].push(unescape(o))}return e};return void 0===t?(null===p&&(p="undefined"!=typeof window&&window.location&&window.location.search?n(window.location.search.substring(1)):{}),e=p):e=n(t),e},i.parseFragment=function(t){var e=t,n="",r=t.indexOf("?");r>0&&(e=t.substring(0,r),n=t.substring(r+1));var o=e.split("/");return o.length>0&&""===o[0]&&o.shift(),{pathString:e,queryString:n,path:o,query:""===n?{}:i.getQueryVariables(n)}},i.makeRequest=function(t){var e=i.parseFragment(t),n={path:e.pathString,query:e.queryString,getPath:function(t){return void 0===t?e.path:e.path[t]},getQuery:function(t,n){var r;return void 0===t?r=e.query:(r=e.query[t])&&void 0!==n&&(r=r[n]),r},getQueryLast:function(t,e){var r=n.getQuery(t);return r?r[r.length-1]:e}};return n},i.makeLink=function(t,e,n){t=jQuery.isArray(t)?t.join("/"):t;var r=jQuery.param(e||{});return n=n||"",t+(r.length>0?"?"+r:"")+(n.length>0?"#"+n:"")},i.setPath=function(t,e,n){if("object"==typeof t&&null!==t)for(var r=0,i=e.length;r<i;){var o=e[r++];if(r==i)t[o]=n;else{var s=o in t;(!s||s&&"object"!=typeof t[o]||s&&null===t[o])&&(t[o]={}),t=t[o]}}},i.getPath=function(t,e,n){for(var r=0,i=e.length,o=!0;o&&r<i&&"object"==typeof t&&null!==t;){var s=e[r++];o=s in t,o&&(t=t[s])}return o?t:n},i.deletePath=function(t,e){if("object"==typeof t&&null!==t)for(var n=0,r=e.length;n<r;){var i=e[n++];if(n==r)delete t[i];else{if(!(i in t)||"object"!=typeof t[i]||null===t[i])break;t=t[i]}}},i.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},i.format=function(t){for(var e,n,r=/%./g,i=0,o=[],s=0;e=r.exec(t);){n=t.substring(s,r.lastIndex-2),n.length>0&&o.push(n),s=r.lastIndex;var a=e[0][1];switch(a){case"s":case"o":i<arguments.length?o.push(arguments[1+i++]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+a+"?>")}}return o.push(t.substring(s)),o.join("")},i.formatNumber=function(t,e,n,r){var i=t,o=isNaN(e=Math.abs(e))?2:e,s=void 0===n?",":n,a=void 0===r?".":r,u=i<0?"-":"",c=parseInt(i=Math.abs(+i||0).toFixed(o),10)+"",l=c.length>3?c.length%3:0;return u+(l?c.substr(0,l)+a:"")+c.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+a)+(o?s+Math.abs(i-c).toFixed(o).slice(2):"")},i.formatSize=function(t){return t=t>=1073741824?i.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?i.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?i.formatNumber(t/1024,0)+" KiB":i.formatNumber(t,0)+" bytes"},i.bytesFromIP=function(t){return-1!==t.indexOf(".")?i.bytesFromIPv4(t):-1!==t.indexOf(":")?i.bytesFromIPv6(t):null},i.bytesFromIPv4=function(t){if(t=t.split("."),4!==t.length)return null;for(var e=i.createBuffer(),n=0;n<t.length;++n){var r=parseInt(t[n],10);if(isNaN(r))return null;e.putByte(r)}return e.getBytes()},i.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(t){return 0===t.length&&++e,!0});for(var n=2*(8-t.length+e),r=i.createBuffer(),o=0;o<8;++o)if(t[o]&&0!==t[o].length){var s=i.hexToBytes(t[o]);s.length<2&&r.putByte(0),r.putBytes(s)}else r.fillWithByte(0,n),n=0;return r.getBytes()},i.bytesToIP=function(t){return 4===t.length?i.bytesToIPv4(t):16===t.length?i.bytesToIPv6(t):null},i.bytesToIPv4=function(t){if(4!==t.length)return null;for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e.join(".")},i.bytesToIPv6=function(t){if(16!==t.length)return null;for(var e=[],n=[],r=0,o=0;o<t.length;o+=2){for(var s=i.bytesToHex(t[o]+t[o+1]);"0"===s[0]&&"0"!==s;)s=s.substr(1);if("0"===s){var a=n[n.length-1],u=e.length;a&&u===a.end+1?(a.end=u,a.end-a.start>n[r].end-n[r].start&&(r=n.length-1)):n.push({start:u,end:u})}e.push(s)}if(n.length>0){var c=n[r];c.end-c.start>0&&(e.splice(c.start,c.end-c.start+1,""),0===c.start&&e.unshift(""),7===c.end&&e.push(""))}return e.join(":")},i.estimateCores=function(t,e){function n(t,a,u){if(0===a){var c=Math.floor(t.reduce(function(t,e){return t+e},0)/t.length);return i.cores=Math.max(1,c),URL.revokeObjectURL(s),e(null,i.cores)}r(u,function(e,r){t.push(o(u,r)),n(t,a-1,u)})}function r(t,e){for(var n=[],r=[],i=0;i<t;++i){var o=new Worker(s);o.addEventListener("message",function(i){if(r.push(i.data),r.length===t){for(var o=0;o<t;++o)n[o].terminate();e(null,r)}}),n.push(o)}for(var i=0;i<t;++i)n[i].postMessage(i)}function o(t,e){for(var n=[],r=0;r<t;++r)for(var i=e[r],o=n[r]=[],s=0;s<t;++s)if(r!==s){var a=e[s];(i.st>a.st&&i.st<a.et||a.st>i.st&&a.st<i.et)&&o.push(s)}return n.reduce(function(t,e){return Math.max(t,e.length)},0)}if("function"==typeof t&&(e=t,t={}),t=t||{},"cores"in i&&!t.update)return e(null,i.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return i.cores=navigator.hardwareConcurrency,e(null,i.cores);if("undefined"==typeof Worker)return i.cores=1,e(null,i.cores);if("undefined"==typeof Blob)return i.cores=2,e(null,i.cores);var s=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(t){for(var e=Date.now(),n=e+4;Date.now()<n;);self.postMessage({st:e,et:n})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16)}}if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var e=!0;define=function(t,e){e(require,module)}}var n,r=function(e,r){r.exports=function(r){var i=n.map(function(t){return e(t)}).concat(t);if(r=r||{},r.defined=r.defined||{},r.defined.util)return r.util;r.defined.util=!0;for(var o=0;o<i.length;++o)i[o](r);return r.util}},i=define;define=function(t,r){return n="string"==typeof t?r.slice(2):t.slice(2),e?(delete define,i.apply(null,Array.prototype.slice.call(arguments,0))):(define=i,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module"],function(){r.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){t.cipher=t.cipher||{},t.cipher.algorithms=t.cipher.algorithms||{},t.cipher.createCipher=function(e,n){var r=e;if("string"==typeof r&&(r=t.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+e);return new t.cipher.BlockCipher({algorithm:r,key:n,decrypt:!1})},t.cipher.createDecipher=function(e,n){var r=e;if("string"==typeof r&&(r=t.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+e);return new t.cipher.BlockCipher({algorithm:r,key:n,decrypt:!0})},t.cipher.registerAlgorithm=function(e,n){e=e.toUpperCase(),t.cipher.algorithms[e]=n},t.cipher.getAlgorithm=function(e){return e=e.toUpperCase(),e in t.cipher.algorithms?t.cipher.algorithms[e]:null};var e=t.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};e.prototype.start=function(e){e=e||{};var n={};for(var r in e)n[r]=e[r];n.decrypt=this._decrypt,this._finish=!1,this._input=t.util.createBuffer(),this.output=e.output||t.util.createBuffer(),this.mode.start(n)},e.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},e.prototype.finish=function(t){!t||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(e){return t(this.blockSize,e,!1)},this.mode.unpad=function(e){return t(this.blockSize,e,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e))&&(this._finish=!0,this.update(),!(this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))&&!(this.mode.afterFinish&&!this.mode.afterFinish(this.output,e)))}}var e="cipher";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var n=!0;define=function(t,e){e(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(t){return n(t)}).concat(t);if(i=i||{},i.defined=i.defined||{},i.defined[e])return i[e];i.defined[e]=!0;for(var s=0;s<o.length;++s)o[s](i);return i[e]}},o=define;define=function(t,e){return r="string"==typeof t?e.slice(2):t.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){function e(e){if("string"==typeof e&&(e=t.util.createBuffer(e)),t.util.isArray(e)&&e.length>4){var n=e;e=t.util.createBuffer();for(var r=0;r<n.length;++r)e.putByte(n[r])}return t.util.isArray(e)||(e=[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]),e}function n(t){t[t.length-1]=t[t.length-1]+1&4294967295}function r(t){return[t/4294967296|0,4294967295&t]}t.cipher=t.cipher||{};var i=t.cipher.modes=t.cipher.modes||{};i.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},i.ecb.prototype.start=function(t){},i.ecb.prototype.encrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)e.putInt32(this._outBlock[r])},i.ecb.prototype.decrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)e.putInt32(this._outBlock[r])},i.ecb.prototype.pad=function(t,e){var n=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(n,n),!0},i.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var n=t.length(),r=t.at(n-1);return!(r>this.blockSize<<2)&&(t.truncate(r),!0)},i.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},i.cbc.prototype.start=function(t){if(null===t.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=e(t.iv),this._prev=this._iv.slice(0)}},i.cbc.prototype.encrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=this._prev[r]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)e.putInt32(this._outBlock[r]);this._prev=this._outBlock},i.cbc.prototype.decrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)e.putInt32(this._prev[r]^this._outBlock[r]);this._prev=this._inBlock.slice(0)},i.cbc.prototype.pad=function(t,e){var n=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(n,n),!0},i.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var n=t.length(),r=t.at(n-1);return!(r>this.blockSize<<2)&&(t.truncate(r),!0)},i.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=t.util.createBuffer(),this._partialBytes=0},i.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=e(t.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.cfb.prototype.encrypt=function(t,e,n){var r=t.length();if(0===r)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&r>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);else{var o=(this.blockSize-r)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),
o>0&&!n)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}},i.cfb.prototype.decrypt=function(t,e,n){var r=t.length();if(0===r)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&r>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);else{var o=(this.blockSize-r)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!n)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}},i.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=t.util.createBuffer(),this._partialBytes=0},i.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=e(t.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ofb.prototype.encrypt=function(t,e,n){var r=t.length();if(0===t.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&r>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];else{var o=(this.blockSize-r)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!n)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}},i.ofb.prototype.decrypt=i.ofb.prototype.encrypt,i.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=t.util.createBuffer(),this._partialBytes=0},i.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=e(t.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ctr.prototype.encrypt=function(t,e,r){var i=t.length();if(0===i)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&i>=this.blockSize)for(var o=0;o<this._ints;++o)e.putInt32(t.getInt32()^this._outBlock[o]);else{var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialOutput.putInt32(t.getInt32()^this._outBlock[o]);if(s>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}n(this._inBlock)},i.ctr.prototype.decrypt=i.ctr.prototype.encrypt,i.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=t.util.createBuffer(),this._partialBytes=0,this._R=3774873600},i.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var i=t.util.createBuffer(e.iv);this._cipherLength=0;var o;if(o="additionalData"in e?t.util.createBuffer(e.additionalData):t.util.createBuffer(),this._tagLength="tagLength"in e?e.tagLength:128,this._tag=null,e.decrypt&&(this._tag=t.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var s=i.length();if(12===s)this._j0=[i.getInt32(),i.getInt32(),i.getInt32(),1];else{for(this._j0=[0,0,0,0];i.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[i.getInt32(),i.getInt32(),i.getInt32(),i.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(r(8*s)))}this._inBlock=this._j0.slice(0),n(this._inBlock),this._partialBytes=0,o=t.util.createBuffer(o),this._aDataLength=r(8*o.length());var a=o.length()%this.blockSize;for(a&&o.fillWithByte(0,this.blockSize-a),this._s=[0,0,0,0];o.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[o.getInt32(),o.getInt32(),o.getInt32(),o.getInt32()])},i.gcm.prototype.encrypt=function(t,e,r){var i=t.length();if(0===i)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&i>=this.blockSize){for(var o=0;o<this._ints;++o)e.putInt32(this._outBlock[o]^=t.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialOutput.putInt32(t.getInt32()^this._outBlock[o]);if(0===s||r){if(r){var a=i%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(var o=0;o<this._ints;++o)this._outBlock[o]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),n(this._inBlock)},i.gcm.prototype.decrypt=function(t,e,r){var i=t.length();if(i<this.blockSize&&!(r&&i>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),n(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var o=0;o<this._ints;++o)e.putInt32(this._outBlock[o]^this._hashBlock[o]);i<this.blockSize?this._cipherLength+=i%this.blockSize:this._cipherLength+=this.blockSize},i.gcm.prototype.afterFinish=function(e,n){var i=!0;n.decrypt&&n.overflow&&e.truncate(this.blockSize-n.overflow),this.tag=t.util.createBuffer();var o=this._aDataLength.concat(r(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,o);var s=[];this.cipher.encrypt(this._j0,s);for(var a=0;a<this._ints;++a)this.tag.putInt32(this._s[a]^s[a]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),n.decrypt&&this.tag.bytes()!==this._tag&&(i=!1),i},i.gcm.prototype.multiply=function(t,e){for(var n=[0,0,0,0],r=e.slice(0),i=0;i<128;++i){t[i/32|0]&1<<31-i%32&&(n[0]^=r[0],n[1]^=r[1],n[2]^=r[2],n[3]^=r[3]),this.pow(r,r)}return n},i.gcm.prototype.pow=function(t,e){for(var n=1&t[3],r=3;r>0;--r)e[r]=t[r]>>>1|(1&t[r-1])<<31;e[0]=t[0]>>>1,n&&(e[0]^=this._R)},i.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],n=0;n<32;++n){var r=n/8|0,i=t[r]>>>4*(7-n%8)&15,o=this._m[n][i];e[0]^=o[0],e[1]^=o[1],e[2]^=o[2],e[3]^=o[3]}return e},i.gcm.prototype.ghash=function(t,e,n){return e[0]^=n[0],e[1]^=n[1],e[2]^=n[2],e[3]^=n[3],this.tableMultiply(e)},i.gcm.prototype.generateHashTable=function(t,e){for(var n=8/e,r=4*n,i=16*n,o=new Array(i),s=0;s<i;++s){var a=[0,0,0,0],u=s/r|0,c=(r-1-s%r)*e;a[u]=1<<e-1<<c,o[s]=this.generateSubHashTable(this.multiply(a,t),e)}return o},i.gcm.prototype.generateSubHashTable=function(t,e){var n=1<<e,r=n>>>1,i=new Array(n);i[r]=t.slice(0);for(var o=r>>>1;o>0;)this.pow(i[2*o],i[o]=[]),o>>=1;for(o=2;o<r;){for(var s=1;s<o;++s){var a=i[o],u=i[s];i[o+s]=[a[0]^u[0],a[1]^u[1],a[2]^u[2],a[3]^u[3]]}o*=2}for(i[0]=[0,0,0,0],o=r+1;o<n;++o){var c=i[o^r];i[o]=[t[0]^c[0],t[1]^c[1],t[2]^c[2],t[3]^c[3]]}return i}}var e="cipherModes";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var n=!0;define=function(t,e){e(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(t){return n(t)}).concat(t);if(i=i||{},i.defined=i.defined||{},i.defined[e])return i[e];i.defined[e]=!0;for(var s=0;s<o.length;++s)o[s](i);return i[e]}},o=define;define=function(t,e){return r="string"==typeof t?e.slice(2):t.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){function e(e,n){var r=function(){return new t.aes.Algorithm(e,n)};t.cipher.registerAlgorithm(e,r)}function n(){h=!0,u=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;s=new Array(256),a=new Array(256),c=new Array(4),l=new Array(4);for(var e=0;e<4;++e)c[e]=new Array(256),l[e]=new Array(256);for(var n,r,i,o,d,f,p,y=0,g=0,e=0;e<256;++e){o=g^g<<1^g<<2^g<<3^g<<4,o=o>>8^255&o^99,s[y]=o,a[o]=y,d=t[o],n=t[y],r=t[n],i=t[r],f=d<<24^o<<16^o<<8^o^d,p=(n^r^i)<<24^(y^i)<<16^(y^r^i)<<8^y^n^i;for(var m=0;m<4;++m)c[m][y]=f,l[m][o]=p,f=f<<24|f>>>8,p=p<<24|p>>>8;0===y?y=g=1:(y=n^t[t[t[n^i]]],g^=t[t[g]])}}function r(t,e){for(var n,r=t.slice(0),i=1,o=r.length,a=o+6+1,c=d*a,h=o;h<c;++h)n=r[h-1],h%o==0?(n=s[n>>>16&255]<<24^s[n>>>8&255]<<16^s[255&n]<<8^s[n>>>24]^u[i]<<24,i++):o>6&&h%o==4&&(n=s[n>>>24]<<24^s[n>>>16&255]<<16^s[n>>>8&255]<<8^s[255&n]),r[h]=r[h-o]^n;if(e){var f,p=l[0],y=l[1],g=l[2],m=l[3],v=r.slice(0);c=r.length;for(var h=0,S=c-d;h<c;h+=d,S-=d)if(0===h||h===c-d)v[h]=r[S],v[h+1]=r[S+3],v[h+2]=r[S+2],v[h+3]=r[S+1];else for(var b=0;b<d;++b)f=r[S+b],v[h+(3&-b)]=p[s[f>>>24]]^y[s[f>>>16&255]]^g[s[f>>>8&255]]^m[s[255&f]];r=v}return r}function i(t,e,n,r){var i,o,u,h,d,f=t.length/4-1;r?(i=l[0],o=l[1],u=l[2],h=l[3],d=a):(i=c[0],o=c[1],u=c[2],h=c[3],d=s);var p,y,g,m,v,S,b;p=e[0]^t[0],y=e[r?3:1]^t[1],g=e[2]^t[2],m=e[r?1:3]^t[3];for(var B=3,A=1;A<f;++A)v=i[p>>>24]^o[y>>>16&255]^u[g>>>8&255]^h[255&m]^t[++B],S=i[y>>>24]^o[g>>>16&255]^u[m>>>8&255]^h[255&p]^t[++B],b=i[g>>>24]^o[m>>>16&255]^u[p>>>8&255]^h[255&y]^t[++B],m=i[m>>>24]^o[p>>>16&255]^u[y>>>8&255]^h[255&g]^t[++B],p=v,y=S,g=b;n[0]=d[p>>>24]<<24^d[y>>>16&255]<<16^d[g>>>8&255]<<8^d[255&m]^t[++B],n[r?3:1]=d[y>>>24]<<24^d[g>>>16&255]<<16^d[m>>>8&255]<<8^d[255&p]^t[++B],n[2]=d[g>>>24]<<24^d[m>>>16&255]<<16^d[p>>>8&255]<<8^d[255&y]^t[++B],n[r?1:3]=d[m>>>24]<<24^d[p>>>16&255]<<16^d[y>>>8&255]<<8^d[255&g]^t[++B]}function o(e){e=e||{};var n,r=(e.mode||"CBC").toUpperCase(),i="AES-"+r;n=e.decrypt?t.cipher.createDecipher(i,e.key):t.cipher.createCipher(i,e.key);var o=n.start;return n.start=function(e,r){var i=null;r instanceof t.util.ByteBuffer&&(i=r,r={}),r=r||{},r.output=i,r.iv=e,o.call(n,r)},n}t.aes=t.aes||{},t.aes.startEncrypting=function(t,e,n,r){var i=o({key:t,output:n,decrypt:!1,mode:r});return i.start(e),i},t.aes.createEncryptionCipher=function(t,e){return o({key:t,output:null,decrypt:!1,mode:e})},t.aes.startDecrypting=function(t,e,n,r){var i=o({key:t,output:n,decrypt:!0,mode:r});return i.start(e),i},t.aes.createDecryptionCipher=function(t,e){return o({key:t,output:null,decrypt:!0,mode:e})},t.aes.Algorithm=function(t,e){h||n();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(t,e){return i(r._w,t,e,!1)},decrypt:function(t,e){return i(r._w,t,e,!0)}}}),r._init=!1},t.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var n,i=e.key;if("string"!=typeof i||16!==i.length&&24!==i.length&&32!==i.length){if(t.util.isArray(i)&&(16===i.length||24===i.length||32===i.length)){n=i,i=t.util.createBuffer();for(var o=0;o<n.length;++o)i.putByte(n[o])}}else i=t.util.createBuffer(i);if(!t.util.isArray(i)){n=i,i=[];var s=n.length();if(16===s||24===s||32===s){s>>>=2;for(var o=0;o<s;++o)i.push(n.getInt32())}}if(!t.util.isArray(i)||4!==i.length&&6!==i.length&&8!==i.length)throw new Error("Invalid key parameter.");var a=this.mode.name,u=-1!==["CFB","OFB","CTR","GCM"].indexOf(a);this._w=r(i,e.decrypt&&!u),this._init=!0}},t.aes._expandKey=function(t,e){return h||n(),r(t,e)},t.aes._updateBlock=i,e("AES-ECB",t.cipher.modes.ecb),e("AES-CBC",t.cipher.modes.cbc),e("AES-CFB",t.cipher.modes.cfb),e("AES-OFB",t.cipher.modes.ofb),e("AES-CTR",t.cipher.modes.ctr),e("AES-GCM",t.cipher.modes.gcm);var s,a,u,c,l,h=!1,d=4}if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var e=!0;define=function(t,e){e(require,module)}}var n,r=function(e,r){r.exports=function(r){var i=n.map(function(t){return e(t)}).concat(t);if(r=r||{},r.defined=r.defined||{},r.defined.aes)return r.aes;r.defined.aes=!0;for(var o=0;o<i.length;++o)i[o](r);return r.aes}},i=define;define=function(t,r){return n="string"==typeof t?r.slice(2):t.slice(2),e?(delete define,i.apply(null,Array.prototype.slice.call(arguments,0))):(define=i,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./cipher","./cipherModes","./util"],function(){r.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){t.pki=t.pki||{};var e=t.pki.oids=t.oids=t.oids||{};e["1.2.840.113549.1.1.1"]="rsaEncryption",e.rsaEncryption="1.2.840.113549.1.1.1",e["1.2.840.113549.1.1.4"]="md5WithRSAEncryption",e.md5WithRSAEncryption="1.2.840.113549.1.1.4",e["1.2.840.113549.1.1.5"]="sha1WithRSAEncryption",e.sha1WithRSAEncryption="1.2.840.113549.1.1.5",e["1.2.840.113549.1.1.7"]="RSAES-OAEP",e["RSAES-OAEP"]="1.2.840.113549.1.1.7",e["1.2.840.113549.1.1.8"]="mgf1",e.mgf1="1.2.840.113549.1.1.8",e["1.2.840.113549.1.1.9"]="pSpecified",e.pSpecified="1.2.840.113549.1.1.9",e["1.2.840.113549.1.1.10"]="RSASSA-PSS",e["RSASSA-PSS"]="1.2.840.113549.1.1.10",e["1.2.840.113549.1.1.11"]="sha256WithRSAEncryption",e.sha256WithRSAEncryption="1.2.840.113549.1.1.11",e["1.2.840.113549.1.1.12"]="sha384WithRSAEncryption",e.sha384WithRSAEncryption="1.2.840.113549.1.1.12",e["1.2.840.113549.1.1.13"]="sha512WithRSAEncryption",e.sha512WithRSAEncryption="1.2.840.113549.1.1.13",e["1.3.14.3.2.7"]="desCBC",e.desCBC="1.3.14.3.2.7",e["1.3.14.3.2.26"]="sha1",e.sha1="1.3.14.3.2.26",e["2.16.840.1.101.3.4.2.1"]="sha256",e.sha256="2.16.840.1.101.3.4.2.1",e["2.16.840.1.101.3.4.2.2"]="sha384",e.sha384="2.16.840.1.101.3.4.2.2",e["2.16.840.1.101.3.4.2.3"]="sha512",e.sha512="2.16.840.1.101.3.4.2.3",e["1.2.840.113549.2.5"]="md5",e.md5="1.2.840.113549.2.5",e["1.2.840.113549.1.7.1"]="data",e.data="1.2.840.113549.1.7.1",e["1.2.840.113549.1.7.2"]="signedData",e.signedData="1.2.840.113549.1.7.2",e["1.2.840.113549.1.7.3"]="envelopedData",e.envelopedData="1.2.840.113549.1.7.3",e["1.2.840.113549.1.7.4"]="signedAndEnvelopedData",e.signedAndEnvelopedData="1.2.840.113549.1.7.4",e["1.2.840.113549.1.7.5"]="digestedData",e.digestedData="1.2.840.113549.1.7.5",e["1.2.840.113549.1.7.6"]="encryptedData",e.encryptedData="1.2.840.113549.1.7.6",e["1.2.840.113549.1.9.1"]="emailAddress",e.emailAddress="1.2.840.113549.1.9.1",e["1.2.840.113549.1.9.2"]="unstructuredName",e.unstructuredName="1.2.840.113549.1.9.2",e["1.2.840.113549.1.9.3"]="contentType",e.contentType="1.2.840.113549.1.9.3",e["1.2.840.113549.1.9.4"]="messageDigest",e.messageDigest="1.2.840.113549.1.9.4",e["1.2.840.113549.1.9.5"]="signingTime",e.signingTime="1.2.840.113549.1.9.5",e["1.2.840.113549.1.9.6"]="counterSignature",e.counterSignature="1.2.840.113549.1.9.6",e["1.2.840.113549.1.9.7"]="challengePassword",e.challengePassword="1.2.840.113549.1.9.7",e["1.2.840.113549.1.9.8"]="unstructuredAddress",e.unstructuredAddress="1.2.840.113549.1.9.8",e["1.2.840.113549.1.9.14"]="extensionRequest",e.extensionRequest="1.2.840.113549.1.9.14",e["1.2.840.113549.1.9.20"]="friendlyName",e.friendlyName="1.2.840.113549.1.9.20",e["1.2.840.113549.1.9.21"]="localKeyId",e.localKeyId="1.2.840.113549.1.9.21",e["1.2.840.113549.1.9.22.1"]="x509Certificate",e.x509Certificate="1.2.840.113549.1.9.22.1",e["1.2.840.113549.1.12.10.1.1"]="keyBag",e.keyBag="1.2.840.113549.1.12.10.1.1",e["1.2.840.113549.1.12.10.1.2"]="pkcs8ShroudedKeyBag",e.pkcs8ShroudedKeyBag="1.2.840.113549.1.12.10.1.2",e["1.2.840.113549.1.12.10.1.3"]="certBag",e.certBag="1.2.840.113549.1.12.10.1.3",e["1.2.840.113549.1.12.10.1.4"]="crlBag",e.crlBag="1.2.840.113549.1.12.10.1.4",e["1.2.840.113549.1.12.10.1.5"]="secretBag",e.secretBag="1.2.840.113549.1.12.10.1.5",e["1.2.840.113549.1.12.10.1.6"]="safeContentsBag",e.safeContentsBag="1.2.840.113549.1.12.10.1.6",e["1.2.840.113549.1.5.13"]="pkcs5PBES2",e.pkcs5PBES2="1.2.840.113549.1.5.13",e["1.2.840.113549.1.5.12"]="pkcs5PBKDF2",e.pkcs5PBKDF2="1.2.840.113549.1.5.12",e["1.2.840.113549.1.12.1.1"]="pbeWithSHAAnd128BitRC4",e.pbeWithSHAAnd128BitRC4="1.2.840.113549.1.12.1.1",e["1.2.840.113549.1.12.1.2"]="pbeWithSHAAnd40BitRC4",e.pbeWithSHAAnd40BitRC4="1.2.840.113549.1.12.1.2",e["1.2.840.113549.1.12.1.3"]="pbeWithSHAAnd3-KeyTripleDES-CBC",e["pbeWithSHAAnd3-KeyTripleDES-CBC"]="1.2.840.113549.1.12.1.3",e["1.2.840.113549.1.12.1.4"]="pbeWithSHAAnd2-KeyTripleDES-CBC",e["pbeWithSHAAnd2-KeyTripleDES-CBC"]="1.2.840.113549.1.12.1.4",e["1.2.840.113549.1.12.1.5"]="pbeWithSHAAnd128BitRC2-CBC",e["pbeWithSHAAnd128BitRC2-CBC"]="1.2.840.113549.1.12.1.5",e["1.2.840.113549.1.12.1.6"]="pbewithSHAAnd40BitRC2-CBC",e["pbewithSHAAnd40BitRC2-CBC"]="1.2.840.113549.1.12.1.6",e["1.2.840.113549.2.7"]="hmacWithSHA1",e.hmacWithSHA1="1.2.840.113549.2.7",e["1.2.840.113549.2.8"]="hmacWithSHA224",e.hmacWithSHA224="1.2.840.113549.2.8",e["1.2.840.113549.2.9"]="hmacWithSHA256",e.hmacWithSHA256="1.2.840.113549.2.9",e["1.2.840.113549.2.10"]="hmacWithSHA384",e.hmacWithSHA384="1.2.840.113549.2.10",e["1.2.840.113549.2.11"]="hmacWithSHA512",e.hmacWithSHA512="1.2.840.113549.2.11",e["1.2.840.113549.3.7"]="des-EDE3-CBC",e["des-EDE3-CBC"]="1.2.840.113549.3.7",e["2.16.840.1.101.3.4.1.2"]="aes128-CBC",e["aes128-CBC"]="2.16.840.1.101.3.4.1.2",e["2.16.840.1.101.3.4.1.22"]="aes192-CBC",e["aes192-CBC"]="2.16.840.1.101.3.4.1.22",e["2.16.840.1.101.3.4.1.42"]="aes256-CBC",e["aes256-CBC"]="2.16.840.1.101.3.4.1.42",e["2.5.4.3"]="commonName",e.commonName="2.5.4.3",e["2.5.4.5"]="serialName",e.serialName="2.5.4.5",e["2.5.4.6"]="countryName",e.countryName="2.5.4.6",e["2.5.4.7"]="localityName",e.localityName="2.5.4.7",e["2.5.4.8"]="stateOrProvinceName",e.stateOrProvinceName="2.5.4.8",e["2.5.4.10"]="organizationName",e.organizationName="2.5.4.10",e["2.5.4.11"]="organizationalUnitName",e.organizationalUnitName="2.5.4.11",e["2.16.840.1.113730.1.1"]="nsCertType",e.nsCertType="2.16.840.1.113730.1.1",e["2.5.29.1"]="authorityKeyIdentifier",e["2.5.29.2"]="keyAttributes",e["2.5.29.3"]="certificatePolicies",e["2.5.29.4"]="keyUsageRestriction",e["2.5.29.5"]="policyMapping",e["2.5.29.6"]="subtreesConstraint",e["2.5.29.7"]="subjectAltName",e["2.5.29.8"]="issuerAltName",e["2.5.29.9"]="subjectDirectoryAttributes",e["2.5.29.10"]="basicConstraints",e["2.5.29.11"]="nameConstraints",e["2.5.29.12"]="policyConstraints",e["2.5.29.13"]="basicConstraints",e["2.5.29.14"]="subjectKeyIdentifier",e.subjectKeyIdentifier="2.5.29.14",e["2.5.29.15"]="keyUsage",e.keyUsage="2.5.29.15",e["2.5.29.16"]="privateKeyUsagePeriod",e["2.5.29.17"]="subjectAltName",e.subjectAltName="2.5.29.17",e["2.5.29.18"]="issuerAltName",e.issuerAltName="2.5.29.18",e["2.5.29.19"]="basicConstraints",e.basicConstraints="2.5.29.19",e["2.5.29.20"]="cRLNumber",e["2.5.29.21"]="cRLReason",e["2.5.29.22"]="expirationDate",e["2.5.29.23"]="instructionCode",e["2.5.29.24"]="invalidityDate",e["2.5.29.25"]="cRLDistributionPoints",e["2.5.29.26"]="issuingDistributionPoint",e["2.5.29.27"]="deltaCRLIndicator",e["2.5.29.28"]="issuingDistributionPoint",e["2.5.29.29"]="certificateIssuer",e["2.5.29.30"]="nameConstraints",e["2.5.29.31"]="cRLDistributionPoints",e.cRLDistributionPoints="2.5.29.31",e["2.5.29.32"]="certificatePolicies",e.certificatePolicies="2.5.29.32",e["2.5.29.33"]="policyMappings",e["2.5.29.34"]="policyConstraints",e["2.5.29.35"]="authorityKeyIdentifier",e.authorityKeyIdentifier="2.5.29.35",e["2.5.29.36"]="policyConstraints",e["2.5.29.37"]="extKeyUsage",e.extKeyUsage="2.5.29.37",e["2.5.29.46"]="freshestCRL",e["2.5.29.54"]="inhibitAnyPolicy",e["1.3.6.1.4.1.11129.2.4.2"]="timestampList",e.timestampList="1.3.6.1.4.1.11129.2.4.2",e["1.3.6.1.5.5.7.1.1"]="authorityInfoAccess",e.authorityInfoAccess="1.3.6.1.5.5.7.1.1",e["1.3.6.1.5.5.7.3.1"]="serverAuth",e.serverAuth="1.3.6.1.5.5.7.3.1",e["1.3.6.1.5.5.7.3.2"]="clientAuth",e.clientAuth="1.3.6.1.5.5.7.3.2",e["1.3.6.1.5.5.7.3.3"]="codeSigning",e.codeSigning="1.3.6.1.5.5.7.3.3",e["1.3.6.1.5.5.7.3.4"]="emailProtection",e.emailProtection="1.3.6.1.5.5.7.3.4",e["1.3.6.1.5.5.7.3.8"]="timeStamping",e.timeStamping="1.3.6.1.5.5.7.3.8"}if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var e=!0;define=function(t,e){e(require,module)}}var n,r=function(e,r){r.exports=function(r){var i=n.map(function(t){return e(t)}).concat(t);if(r=r||{},r.defined=r.defined||{},r.defined.oids)return r.oids;r.defined.oids=!0;for(var o=0;o<i.length;++o)i[o](r);return r.oids}},i=define;define=function(t,r){return n="string"==typeof t?r.slice(2):t.slice(2),e?(delete define,i.apply(null,Array.prototype.slice.call(arguments,0))):(define=i,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module"],function(){r.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){function e(t,e,n){if(n>e){var r=new Error("Too few bytes to parse DER.");throw r.available=t.length(),r.remaining=e,r.requested=n,r}}function n(t,o,s,a){var u;e(t,o,2);var c=t.getByte();o--;var l=192&c,h=31&c;u=t.length();var d=i(t,o);if(o-=u-t.length(),void 0!==d&&d>o){if(a.strict){var f=new Error("Too few bytes to read ASN.1 value.");throw f.available=t.length(),f.remaining=o,f.requested=d,f}d=o}var p,y,g=32==(32&c);if(g)if(p=[],void 0===d)for(;;){if(e(t,o,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),o-=2;break}u=t.length(),p.push(n(t,o,s+1,a)),o-=u-t.length()}else for(;d>0;)u=t.length(),p.push(n(t,d,s+1,a)),o-=u-t.length(),d-=u-t.length();if(void 0===p&&l===r.Class.UNIVERSAL&&h===r.Type.BITSTRING&&(y=t.bytes(d)),void 0===p&&a.decodeBitStrings&&l===r.Class.UNIVERSAL&&h===r.Type.BITSTRING&&d>1){var m=t.read,v=o,S=0;if(h===r.Type.BITSTRING&&(e(t,o,1),S=t.getByte(),o--),0===S)try{u=t.length();var b={verbose:a.verbose,strict:!0,decodeBitStrings:!0},B=n(t,o,s+1,b),A=u-t.length();o-=A,h==r.Type.BITSTRING&&A++;var I=B.tagClass;A!==d||I!==r.Class.UNIVERSAL&&I!==r.Class.CONTEXT_SPECIFIC||(p=[B])}catch(t){}void 0===p&&(t.read=m,o=v)}if(void 0===p){if(void 0===d){if(a.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");d=o}if(h===r.Type.BMPSTRING)for(p="";d>0;d-=2)e(t,o,2),p+=String.fromCharCode(t.getInt16()),o-=2;else p=t.getBytes(d)}var C=void 0===y?null:{bitStringContents:y};return r.create(l,h,g,p,C)}var r=t.asn1=t.asn1||{};r.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},r.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},r.create=function(e,n,i,o,s){if(t.util.isArray(o)){for(var a=[],u=0;u<o.length;++u)void 0!==o[u]&&a.push(o[u]);o=a}var c={tagClass:e,type:n,constructed:i,composed:i||t.util.isArray(o),value:o};return s&&"bitStringContents"in s&&(c.bitStringContents=s.bitStringContents,c.original=r.copy(c)),c},r.copy=function(e,n){var i;if(t.util.isArray(e)){i=[];for(var o=0;o<e.length;++o)i.push(r.copy(e[o],n));return i}return"string"==typeof e?e:(i={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:r.copy(e.value,n)},n&&!n.excludeBitStringContents&&(i.bitStringContents=e.bitStringContents),i)},r.equals=function(e,n,i){if(t.util.isArray(e)){if(!t.util.isArray(n))return!1;if(e.length!==n.length)return!1;for(var o=0;o<e.length;++o)return!!r.equals(e[o],n[o])}if(typeof e!=typeof n)return!1;if("string"==typeof e)return e===n;var s=e.tagClass===n.tagClass&&e.type===n.type&&e.constructed===n.constructed&&e.composed===n.composed&&r.equals(e.value,n.value);return i&&i.includeBitStringContents&&(s=s&&e.bitStringContents===n.bitStringContents),s},r.getBerValueLength=function(t){var e=t.getByte();if(128!==e){return 128&e?t.getInt((127&e)<<3):e}};var i=function(t,n){var r=t.getByte();if(n--,128!==r){var i;if(128&r){var o=127&r;e(t,n,o),i=t.getInt(o<<3)}else i=r;if(i<0)throw new Error("Negative length: "+i);return i}};r.fromDer=function(e,r){return void 0===r&&(r={strict:!0,decodeBitStrings:!0}),"boolean"==typeof r&&(r={strict:r,decodeBitStrings:!0}),"strict"in r||(r.strict=!0),"decodeBitStrings"in r||(r.decodeBitStrings=!0),"string"==typeof e&&(e=t.util.createBuffer(e)),n(e,e.length(),0,r)},r.toDer=function(e){var n=t.util.createBuffer(),i=e.tagClass|e.type,o=t.util.createBuffer(),s=!1;if("bitStringContents"in e&&(s=!0,e.original&&(s=r.equals(e,e.original))),s)o.putBytes(e.bitStringContents);else if(e.composed){e.constructed?i|=32:o.putByte(0);for(var a=0;a<e.value.length;++a)void 0!==e.value[a]&&o.putBuffer(r.toDer(e.value[a]))}else if(e.type===r.Type.BMPSTRING)for(var a=0;a<e.value.length;++a)o.putInt16(e.value.charCodeAt(a));else e.type===r.Type.INTEGER&&e.value.length>1&&(0===e.value.charCodeAt(0)&&0==(128&e.value.charCodeAt(1))||255===e.value.charCodeAt(0)&&128==(128&e.value.charCodeAt(1)))?o.putBytes(e.value.substr(1)):o.putBytes(e.value);if(n.putByte(i),o.length()<=127)n.putByte(127&o.length());else{var u=o.length(),c="";do{c+=String.fromCharCode(255&u),u>>>=8}while(u>0);n.putByte(128|c.length);for(var a=c.length-1;a>=0;--a)n.putByte(c.charCodeAt(a))}return n.putBuffer(o),n},r.oidToDer=function(e){var n=e.split("."),r=t.util.createBuffer();r.putByte(40*parseInt(n[0],10)+parseInt(n[1],10));for(var i,o,s,a,u=2;u<n.length;++u){i=!0,o=[],s=parseInt(n[u],10);do{a=127&s,s>>>=7,i||(a|=128),o.push(a),i=!1}while(s>0);for(var c=o.length-1;c>=0;--c)r.putByte(o[c])}return r},r.derToOid=function(e){var n;"string"==typeof e&&(e=t.util.createBuffer(e));var r=e.getByte();n=Math.floor(r/40)+"."+r%40;for(var i=0;e.length()>0;)r=e.getByte(),i<<=7,128&r?i+=127&r:(n+="."+(i+r),i=0);return n},r.utcTimeToDate=function(t){var e=new Date,n=parseInt(t.substr(0,2),10);n=n>=50?1900+n:2e3+n;var r=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),o=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),a=0;if(t.length>11){var u=t.charAt(10),c=10;"+"!==u&&"-"!==u&&(a=parseInt(t.substr(10,2),10),c+=2)}if(e.setUTCFullYear(n,r,i),e.setUTCHours(o,s,a,0),c&&("+"===(u=t.charAt(c))||"-"===u)){var l=parseInt(t.substr(c+1,2),10),h=parseInt(t.substr(c+4,2),10),d=60*l+h;d*=6e4,"+"===u?e.setTime(+e-d):e.setTime(+e+d)}return e},r.generalizedTimeToDate=function(t){var e=new Date,n=parseInt(t.substr(0,4),10),r=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),s=parseInt(t.substr(10,2),10),a=parseInt(t.substr(12,2),10),u=0,c=0,l=!1;"Z"===t.charAt(t.length-1)&&(l=!0);var h=t.length-5,d=t.charAt(h);if("+"===d||"-"===d){c=60*parseInt(t.substr(h+1,2),10)+parseInt(t.substr(h+4,2),10),c*=6e4,"+"===d&&(c*=-1),l=!0}return"."===t.charAt(14)&&(u=1e3*parseFloat(t.substr(14),10)),l?(e.setUTCFullYear(n,r,i),e.setUTCHours(o,s,a,u),e.setTime(+e+c)):(e.setFullYear(n,r,i),e.setHours(o,s,a,u)),e},r.dateToUtcTime=function(t){if("string"==typeof t)return t;var e="",n=[];n.push((""+t.getUTCFullYear()).substr(2)),n.push(""+(t.getUTCMonth()+1)),n.push(""+t.getUTCDate()),n.push(""+t.getUTCHours()),n.push(""+t.getUTCMinutes()),n.push(""+t.getUTCSeconds());for(var r=0;r<n.length;++r)n[r].length<2&&(e+="0"),e+=n[r];return e+="Z"},r.dateToGeneralizedTime=function(t){if("string"==typeof t)return t;var e="",n=[];n.push(""+t.getUTCFullYear()),n.push(""+(t.getUTCMonth()+1)),n.push(""+t.getUTCDate()),n.push(""+t.getUTCHours()),n.push(""+t.getUTCMinutes()),n.push(""+t.getUTCSeconds());for(var r=0;r<n.length;++r)n[r].length<2&&(e+="0"),e+=n[r];return e+="Z"},r.integerToDer=function(e){var n=t.util.createBuffer();if(e>=-128&&e<128)return n.putSignedInt(e,8);if(e>=-32768&&e<32768)return n.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return n.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return n.putSignedInt(e,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=e,r},r.derToInteger=function(e){"string"==typeof e&&(e=t.util.createBuffer(e));var n=8*e.length();if(n>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(n)},r.validate=function(e,n,i,o){var s=!1;if(e.tagClass!==n.tagClass&&void 0!==n.tagClass||e.type!==n.type&&void 0!==n.type)o&&(e.tagClass!==n.tagClass&&o.push("["+n.name+'] Expected tag class "'+n.tagClass+'", got "'+e.tagClass+'"'),e.type!==n.type&&o.push("["+n.name+'] Expected type "'+n.type+'", got "'+e.type+'"'));else if(e.constructed===n.constructed||void 0===n.constructed){if(s=!0,n.value&&t.util.isArray(n.value))for(var a=0,u=0;s&&u<n.value.length;++u)s=n.value[u].optional||!1,e.value[a]&&(s=r.validate(e.value[a],n.value[u],i,o),s?++a:n.value[u].optional&&(s=!0)),!s&&o&&o.push("["+n.name+'] Tag class "'+n.tagClass+'", type "'+n.type+'" expected value length "'+n.value.length+'", got "'+e.value.length+'"');if(s&&i&&(n.capture&&(i[n.capture]=e.value),n.captureAsn1&&(i[n.captureAsn1]=e),n.captureBitStringContents&&"bitStringContents"in e&&(i[n.captureBitStringContents]=e.bitStringContents),n.captureBitStringValue&&"bitStringContents"in e)){if(e.bitStringContents.length<2)i[n.captureBitStringValue]="";else{var c=e.bitStringContents.charCodeAt(0);if(0!==c)throw new Error("captureBitStringValue only supported for zero unused bits");i[n.captureBitStringValue]=e.bitStringContents.slice(1)}}}else o&&o.push("["+n.name+'] Expected constructed "'+n.constructed+'", got "'+e.constructed+'"');return s};var o=/[^\\u0000-\\u00ff]/;r.prettyPrint=function(e,n,i){var s="";n=n||0,i=i||2,n>0&&(s+="\n");for(var a="",u=0;u<n*i;++u)a+=" ";switch(s+=a+"Tag: ",e.tagClass){case r.Class.UNIVERSAL:s+="Universal:";break;case r.Class.APPLICATION:s+="Application:";break;case r.Class.CONTEXT_SPECIFIC:s+="Context-Specific:";break;case r.Class.PRIVATE:s+="Private:"}if(e.tagClass===r.Class.UNIVERSAL)switch(s+=e.type,e.type){case r.Type.NONE:s+=" (None)";break;case r.Type.BOOLEAN:s+=" (Boolean)";break;case r.Type.INTEGER:s+=" (Integer)";break;case r.Type.BITSTRING:s+=" (Bit string)";break;case r.Type.OCTETSTRING:s+=" (Octet string)";break;case r.Type.NULL:s+=" (Null)";break;case r.Type.OID:s+=" (Object Identifier)";break;case r.Type.ODESC:s+=" (Object Descriptor)";break;case r.Type.EXTERNAL:s+=" (External or Instance of)";break;case r.Type.REAL:s+=" (Real)";break;case r.Type.ENUMERATED:s+=" (Enumerated)";break;case r.Type.EMBEDDED:s+=" (Embedded PDV)";break;case r.Type.UTF8:s+=" (UTF8)";break;case r.Type.ROID:s+=" (Relative Object Identifier)";break;case r.Type.SEQUENCE:s+=" (Sequence)";break;case r.Type.SET:s+=" (Set)";break;case r.Type.PRINTABLESTRING:s+=" (Printable String)";break;case r.Type.IA5String:s+=" (IA5String (ASCII))";break;case r.Type.UTCTIME:s+=" (UTC time)";break;case r.Type.GENERALIZEDTIME:s+=" (Generalized time)";break;case r.Type.BMPSTRING:s+=" (BMP String)"}else s+=e.type;if(s+="\n",s+=a+"Constructed: "+e.constructed+"\n",e.composed){for(var c=0,l="",u=0;u<e.value.length;++u)void 0!==e.value[u]&&(c+=1,l+=r.prettyPrint(e.value[u],n+1,i),u+1<e.value.length&&(l+=","))
;s+=a+"Sub values: "+c+l}else{if(s+=a+"Value: ",e.type===r.Type.OID){var h=r.derToOid(e.value);s+=h,t.pki&&t.pki.oids&&h in t.pki.oids&&(s+=" ("+t.pki.oids[h]+") ")}if(e.type===r.Type.INTEGER)try{s+=r.derToInteger(e.value)}catch(n){s+="0x"+t.util.bytesToHex(e.value)}else if(e.type===r.Type.BITSTRING){if(e.value.length>1?s+="0x"+t.util.bytesToHex(e.value.slice(1)):s+="(none)",e.value.length>0){var d=e.value.charCodeAt(0);1==d?s+=" (1 unused bit shown)":d>1&&(s+=" ("+d+" unused bits shown)")}}else e.type===r.Type.OCTETSTRING?(o.test(e.value)||(s+="("+e.value+") "),s+="0x"+t.util.bytesToHex(e.value)):e.type===r.Type.UTF8?s+=t.util.decodeUtf8(e.value):e.type===r.Type.PRINTABLESTRING||e.type===r.Type.IA5String?s+=e.value:o.test(e.value)?s+="0x"+t.util.bytesToHex(e.value):0===e.value.length?s+="[null]":s+=e.value}return s}}if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var e=!0;define=function(t,e){e(require,module)}}var n,r=function(e,r){r.exports=function(r){var i=n.map(function(t){return e(t)}).concat(t);if(r=r||{},r.defined=r.defined||{},r.defined.asn1)return r.asn1;r.defined.asn1=!0;for(var o=0;o<i.length;++o)i[o](r);return r.asn1}},i=define;define=function(t,r){return n="string"==typeof t?r.slice(2):t.slice(2),e?(delete define,i.apply(null,Array.prototype.slice.call(arguments,0))):(define=i,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./util","./oids"],function(){r.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){function e(){i=String.fromCharCode(128),i+=t.util.fillString(String.fromCharCode(0),64),o=!0}function n(t,e,n){for(var r,i,o,s,a,u,c,l,h=n.length();h>=64;){for(i=t.h0,o=t.h1,s=t.h2,a=t.h3,u=t.h4,l=0;l<16;++l)r=n.getInt32(),e[l]=r,c=a^o&(s^a),r=(i<<5|i>>>27)+c+u+1518500249+r,u=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=r;for(;l<20;++l)r=e[l-3]^e[l-8]^e[l-14]^e[l-16],r=r<<1|r>>>31,e[l]=r,c=a^o&(s^a),r=(i<<5|i>>>27)+c+u+1518500249+r,u=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=r;for(;l<32;++l)r=e[l-3]^e[l-8]^e[l-14]^e[l-16],r=r<<1|r>>>31,e[l]=r,c=o^s^a,r=(i<<5|i>>>27)+c+u+1859775393+r,u=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=r;for(;l<40;++l)r=e[l-6]^e[l-16]^e[l-28]^e[l-32],r=r<<2|r>>>30,e[l]=r,c=o^s^a,r=(i<<5|i>>>27)+c+u+1859775393+r,u=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=r;for(;l<60;++l)r=e[l-6]^e[l-16]^e[l-28]^e[l-32],r=r<<2|r>>>30,e[l]=r,c=o&s|a&(o^s),r=(i<<5|i>>>27)+c+u+2400959708+r,u=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=r;for(;l<80;++l)r=e[l-6]^e[l-16]^e[l-28]^e[l-32],r=r<<2|r>>>30,e[l]=r,c=o^s^a,r=(i<<5|i>>>27)+c+u+3395469782+r,u=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=r;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+s|0,t.h3=t.h3+a|0,t.h4=t.h4+u|0,h-=64}}var r=t.sha1=t.sha1||{};t.md=t.md||{},t.md.algorithms=t.md.algorithms||{},t.md.sha1=t.md.algorithms.sha1=r,r.create=function(){o||e();var r=null,s=t.util.createBuffer(),a=new Array(80),u={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return u.start=function(){u.messageLength=0,u.fullMessageLength=u.messageLength64=[];for(var e=u.messageLengthSize/4,n=0;n<e;++n)u.fullMessageLength.push(0);return s=t.util.createBuffer(),r={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},u},u.start(),u.update=function(e,i){"utf8"===i&&(e=t.util.encodeUtf8(e));var o=e.length;u.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var c=u.fullMessageLength.length-1;c>=0;--c)u.fullMessageLength[c]+=o[1],o[1]=o[0]+(u.fullMessageLength[c]/4294967296>>>0),u.fullMessageLength[c]=u.fullMessageLength[c]>>>0,o[0]=o[1]/4294967296>>>0;return s.putBytes(e),n(r,a,s),(s.read>2048||0===s.length())&&s.compact(),u},u.digest=function(){var e=t.util.createBuffer();e.putBytes(s.bytes());var o=u.fullMessageLength[u.fullMessageLength.length-1]+u.messageLengthSize,c=o&u.blockLength-1;e.putBytes(i.substr(0,u.blockLength-c));for(var l,h,d=8*u.fullMessageLength[0],f=0;f<u.fullMessageLength.length-1;++f)l=8*u.fullMessageLength[f+1],h=l/4294967296>>>0,d+=h,e.putInt32(d>>>0),d=l>>>0;e.putInt32(d);var p={h0:r.h0,h1:r.h1,h2:r.h2,h3:r.h3,h4:r.h4};n(p,a,e);var y=t.util.createBuffer();return y.putInt32(p.h0),y.putInt32(p.h1),y.putInt32(p.h2),y.putInt32(p.h3),y.putInt32(p.h4),y},u};var i=null,o=!1}if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var e=!0;define=function(t,e){e(require,module)}}var n,r=function(e,r){r.exports=function(r){var i=n.map(function(t){return e(t)}).concat(t);if(r=r||{},r.defined=r.defined||{},r.defined.sha1)return r.sha1;r.defined.sha1=!0;for(var o=0;o<i.length;++o)i[o](r);return r.sha1}},i=define;define=function(t,r){return n="string"==typeof t?r.slice(2):t.slice(2),e?(delete define,i.apply(null,Array.prototype.slice.call(arguments,0))):(define=i,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./util"],function(){r.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){function e(){i=String.fromCharCode(128),i+=t.util.fillString(String.fromCharCode(0),64),s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=!0}function n(t,e,n){for(var r,i,o,a,u,c,l,h,d,f,p,y,g,m,v,S=n.length();S>=64;){for(l=0;l<16;++l)e[l]=n.getInt32();for(;l<64;++l)r=e[l-2],r=(r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10,i=e[l-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[l]=r+e[l-7]+i+e[l-16]|0;for(h=t.h0,d=t.h1,f=t.h2,p=t.h3,y=t.h4,g=t.h5,m=t.h6,v=t.h7,l=0;l<64;++l)a=(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7),u=m^y&(g^m),o=(h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10),c=h&d|f&(h^d),r=v+a+u+s[l]+e[l],i=o+c,v=m,m=g,g=y,y=p+r>>>0,p=f,f=d,d=h,h=r+i>>>0;t.h0=t.h0+h|0,t.h1=t.h1+d|0,t.h2=t.h2+f|0,t.h3=t.h3+p|0,t.h4=t.h4+y|0,t.h5=t.h5+g|0,t.h6=t.h6+m|0,t.h7=t.h7+v|0,S-=64}}var r=t.sha256=t.sha256||{};t.md=t.md||{},t.md.algorithms=t.md.algorithms||{},t.md.sha256=t.md.algorithms.sha256=r,r.create=function(){o||e();var r=null,s=t.util.createBuffer(),a=new Array(64),u={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return u.start=function(){u.messageLength=0,u.fullMessageLength=u.messageLength64=[];for(var e=u.messageLengthSize/4,n=0;n<e;++n)u.fullMessageLength.push(0);return s=t.util.createBuffer(),r={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},u},u.start(),u.update=function(e,i){"utf8"===i&&(e=t.util.encodeUtf8(e));var o=e.length;u.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var c=u.fullMessageLength.length-1;c>=0;--c)u.fullMessageLength[c]+=o[1],o[1]=o[0]+(u.fullMessageLength[c]/4294967296>>>0),u.fullMessageLength[c]=u.fullMessageLength[c]>>>0,o[0]=o[1]/4294967296>>>0;return s.putBytes(e),n(r,a,s),(s.read>2048||0===s.length())&&s.compact(),u},u.digest=function(){var e=t.util.createBuffer();e.putBytes(s.bytes());var o=u.fullMessageLength[u.fullMessageLength.length-1]+u.messageLengthSize,c=o&u.blockLength-1;e.putBytes(i.substr(0,u.blockLength-c));for(var l,h,d=8*u.fullMessageLength[0],f=0;f<u.fullMessageLength.length-1;++f)l=8*u.fullMessageLength[f+1],h=l/4294967296>>>0,d+=h,e.putInt32(d>>>0),d=l>>>0;e.putInt32(d);var p={h0:r.h0,h1:r.h1,h2:r.h2,h3:r.h3,h4:r.h4,h5:r.h5,h6:r.h6,h7:r.h7};n(p,a,e);var y=t.util.createBuffer();return y.putInt32(p.h0),y.putInt32(p.h1),y.putInt32(p.h2),y.putInt32(p.h3),y.putInt32(p.h4),y.putInt32(p.h5),y.putInt32(p.h6),y.putInt32(p.h7),y},u};var i=null,o=!1,s=null}var e="sha256";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var n=!0;define=function(t,e){e(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(t){return n(t)}).concat(t);if(i=i||{},i.defined=i.defined||{},i.defined[e])return i[e];i.defined[e]=!0;for(var s=0;s<o.length;++s)o[s](i);return i[e]}},o=define;define=function(t,e){return r="string"==typeof t?e.slice(2):t.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){function e(){o=String.fromCharCode(128),o+=t.util.fillString(String.fromCharCode(0),128),a=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],u={},u["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],u["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],u["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],u["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],s=!0}function n(t,e,n){for(var r,i,o,s,u,c,l,h,d,f,p,y,g,m,v,S,b,B,A,I,C,w,T,k,P,E,R,_,N,L,O,D,U,x,M,V=n.length();V>=128;){for(N=0;N<16;++N)e[N][0]=n.getInt32()>>>0,e[N][1]=n.getInt32()>>>0;for(;N<80;++N)D=e[N-2],L=D[0],O=D[1],r=((L>>>19|O<<13)^(O>>>29|L<<3)^L>>>6)>>>0,i=((L<<13|O>>>19)^(O<<3|L>>>29)^(L<<26|O>>>6))>>>0,x=e[N-15],L=x[0],O=x[1],o=((L>>>1|O<<31)^(L>>>8|O<<24)^L>>>7)>>>0,s=((L<<31|O>>>1)^(L<<24|O>>>8)^(L<<25|O>>>7))>>>0,U=e[N-7],M=e[N-16],O=i+U[1]+s+M[1],e[N][0]=r+U[0]+o+M[0]+(O/4294967296>>>0)>>>0,e[N][1]=O>>>0;for(g=t[0][0],m=t[0][1],v=t[1][0],S=t[1][1],b=t[2][0],B=t[2][1],A=t[3][0],I=t[3][1],C=t[4][0],w=t[4][1],T=t[5][0],k=t[5][1],P=t[6][0],E=t[6][1],R=t[7][0],_=t[7][1],N=0;N<80;++N)l=((C>>>14|w<<18)^(C>>>18|w<<14)^(w>>>9|C<<23))>>>0,h=((C<<18|w>>>14)^(C<<14|w>>>18)^(w<<23|C>>>9))>>>0,d=(P^C&(T^P))>>>0,f=(E^w&(k^E))>>>0,u=((g>>>28|m<<4)^(m>>>2|g<<30)^(m>>>7|g<<25))>>>0,c=((g<<4|m>>>28)^(m<<30|g>>>2)^(m<<25|g>>>7))>>>0,p=(g&v|b&(g^v))>>>0,y=(m&S|B&(m^S))>>>0,O=_+h+f+a[N][1]+e[N][1],r=R+l+d+a[N][0]+e[N][0]+(O/4294967296>>>0)>>>0,i=O>>>0,O=c+y,o=u+p+(O/4294967296>>>0)>>>0,s=O>>>0,R=P,_=E,P=T,E=k,T=C,k=w,O=I+i,C=A+r+(O/4294967296>>>0)>>>0,w=O>>>0,A=b,I=B,b=v,B=S,v=g,S=m,O=i+s,g=r+o+(O/4294967296>>>0)>>>0,m=O>>>0;O=t[0][1]+m,t[0][0]=t[0][0]+g+(O/4294967296>>>0)>>>0,t[0][1]=O>>>0,O=t[1][1]+S,t[1][0]=t[1][0]+v+(O/4294967296>>>0)>>>0,t[1][1]=O>>>0,O=t[2][1]+B,t[2][0]=t[2][0]+b+(O/4294967296>>>0)>>>0,t[2][1]=O>>>0,O=t[3][1]+I,t[3][0]=t[3][0]+A+(O/4294967296>>>0)>>>0,t[3][1]=O>>>0,O=t[4][1]+w,t[4][0]=t[4][0]+C+(O/4294967296>>>0)>>>0,t[4][1]=O>>>0,O=t[5][1]+k,t[5][0]=t[5][0]+T+(O/4294967296>>>0)>>>0,t[5][1]=O>>>0,O=t[6][1]+E,t[6][0]=t[6][0]+P+(O/4294967296>>>0)>>>0,t[6][1]=O>>>0,O=t[7][1]+_,t[7][0]=t[7][0]+R+(O/4294967296>>>0)>>>0,t[7][1]=O>>>0,V-=128}}var r=t.sha512=t.sha512||{};t.md=t.md||{},t.md.algorithms=t.md.algorithms||{},t.md.sha512=t.md.algorithms.sha512=r;var i=t.sha384=t.sha512.sha384=t.sha512.sha384||{};i.create=function(){return r.create("SHA-384")},t.md.sha384=t.md.algorithms.sha384=i,t.sha512.sha256=t.sha512.sha256||{create:function(){return r.create("SHA-512/256")}},t.md["sha512/256"]=t.md.algorithms["sha512/256"]=t.sha512.sha256,t.sha512.sha224=t.sha512.sha224||{create:function(){return r.create("SHA-512/224")}},t.md["sha512/224"]=t.md.algorithms["sha512/224"]=t.sha512.sha224,r.create=function(r){if(s||e(),void 0===r&&(r="SHA-512"),!(r in u))throw new Error("Invalid SHA-512 algorithm: "+r);for(var i=u[r],a=null,c=t.util.createBuffer(),l=new Array(80),h=0;h<80;++h)l[h]=new Array(2);var d={algorithm:r.replace("-","").toLowerCase(),blockLength:128,digestLength:64,messageLength:0,fullMessageLength:null,messageLengthSize:16};return d.start=function(){d.messageLength=0,d.fullMessageLength=d.messageLength128=[];for(var e=d.messageLengthSize/4,n=0;n<e;++n)d.fullMessageLength.push(0);c=t.util.createBuffer(),a=new Array(i.length);for(var n=0;n<i.length;++n)a[n]=i[n].slice(0);return d},d.start(),d.update=function(e,r){"utf8"===r&&(e=t.util.encodeUtf8(e));var i=e.length;d.messageLength+=i,i=[i/4294967296>>>0,i>>>0];for(var o=d.fullMessageLength.length-1;o>=0;--o)d.fullMessageLength[o]+=i[1],i[1]=i[0]+(d.fullMessageLength[o]/4294967296>>>0),d.fullMessageLength[o]=d.fullMessageLength[o]>>>0,i[0]=i[1]/4294967296>>>0;return c.putBytes(e),n(a,l,c),(c.read>2048||0===c.length())&&c.compact(),d},d.digest=function(){var e=t.util.createBuffer();e.putBytes(c.bytes());var i=d.fullMessageLength[d.fullMessageLength.length-1]+d.messageLengthSize,s=i&d.blockLength-1;e.putBytes(o.substr(0,d.blockLength-s));for(var u,h,f=8*d.fullMessageLength[0],p=0;p<d.fullMessageLength.length-1;++p)u=8*d.fullMessageLength[p+1],h=u/4294967296>>>0,f+=h,e.putInt32(f>>>0),f=u>>>0;e.putInt32(f);for(var y=new Array(a.length),p=0;p<a.length;++p)y[p]=a[p].slice(0);n(y,l,e);var g,m=t.util.createBuffer();g="SHA-512"===r?y.length:"SHA-384"===r?y.length-2:y.length-4;for(var p=0;p<g;++p)m.putInt32(y[p][0]),p===g-1&&"SHA-512/224"===r||m.putInt32(y[p][1]);return m},d};var o=null,s=!1,a=null,u=null}var e="sha512";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var n=!0;define=function(t,e){e(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(t){return n(t)}).concat(t);if(i=i||{},i.defined=i.defined||{},i.defined[e])return i[e];i.defined[e]=!0;for(var s=0;s<o.length;++s)o[s](i);return i[e]}},o=define;define=function(t,e){return r="string"==typeof t?e.slice(2):t.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){t.md=t.md||{},t.md.algorithms={md5:t.md5,sha1:t.sha1,sha256:t.sha256},t.md.md5=t.md5,t.md.sha1=t.sha1,t.md.sha256=t.sha256}if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var e=!0;define=function(t,e){e(require,module)}}var n,r=function(e,r){r.exports=function(r){var i=n.map(function(t){return e(t)}).concat(t);if(r=r||{},r.defined=r.defined||{},r.defined.md)return r.md;r.defined.md=!0;for(var o=0;o<i.length;++o)i[o](r);return r.md}},i=define;define=function(t,r){return n="string"==typeof t?r.slice(2):t.slice(2),e?(delete define,i.apply(null,Array.prototype.slice.call(arguments,0))):(define=i,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./md5","./sha1","./sha256","./sha512"],function(){r.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){(t.hmac=t.hmac||{}).create=function(){var e=null,n=null,r=null,i=null,o={};return o.start=function(o,s){if(null!==o)if("string"==typeof o){if(!((o=o.toLowerCase())in t.md.algorithms))throw new Error('Unknown hash algorithm "'+o+'"');n=t.md.algorithms[o].create()}else n=o;if(null===s)s=e;else{if("string"==typeof s)s=t.util.createBuffer(s);else if(t.util.isArray(s)){var a=s;s=t.util.createBuffer();for(var u=0;u<a.length;++u)s.putByte(a[u])}var c=s.length();c>n.blockLength&&(n.start(),n.update(s.bytes()),s=n.digest()),r=t.util.createBuffer(),i=t.util.createBuffer(),c=s.length();for(var u=0;u<c;++u){var a=s.at(u);r.putByte(54^a),i.putByte(92^a)}if(c<n.blockLength)for(var a=n.blockLength-c,u=0;u<a;++u)r.putByte(54),i.putByte(92);e=s,r=r.bytes(),i=i.bytes()}n.start(),n.update(r)},o.update=function(t){n.update(t)},o.getMac=function(){var t=n.digest().bytes();return n.start(),n.update(i),n.update(t),n.digest()},o.digest=o.getMac,o}}if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var e=!0;define=function(t,e){e(require,module)}}var n,r=function(e,r){r.exports=function(r){var i=n.map(function(t){return e(t)}).concat(t);if(r=r||{},r.defined=r.defined||{},r.defined.hmac)return r.hmac;r.defined.hmac=!0;for(var o=0;o<i.length;++o)i[o](r);return r.hmac}},i=define;define=function(t,r){return n="string"==typeof t?r.slice(2):t.slice(2),e?(delete define,i.apply(null,Array.prototype.slice.call(arguments,0))):(define=i,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./md","./util"],function(){r.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){var e="undefined"!=typeof process&&process.versions&&process.versions.node,n=null;t.disableNativeCode||!e||process.versions["node-webkit"]||(n=require("crypto")),(t.prng=t.prng||{}).create=function(e){function r(t){if(a.pools[0].messageLength>=32)return o(),t();var e=32-a.pools[0].messageLength<<5;a.seedFile(e,function(e,n){if(e)return t(e);a.collect(n),o(),t()})}function i(){if(a.pools[0].messageLength>=32)return o();var t=32-a.pools[0].messageLength<<5;a.collect(a.seedFileSync(t)),o()}function o(){var t=a.plugin.md.create();t.update(a.pools[0].digest().getBytes()),a.pools[0].start();for(var e=1,n=1;n<32;++n)(e=31===e?2147483648:e<<2)%a.reseeds==0&&(t.update(a.pools[n].digest().getBytes()),a.pools[n].start());var r=t.digest().getBytes();t.start(),t.update(r);var i=t.digest().getBytes();a.key=a.plugin.formatKey(r),a.seed=a.plugin.formatSeed(i),a.reseeds=4294967295===a.reseeds?0:a.reseeds+1,a.generated=0}function s(e){var n=null;if("undefined"!=typeof window){var r=window.crypto||window.msCrypto;r&&r.getRandomValues&&(n=function(t){return r.getRandomValues(t)})}var i=t.util.createBuffer();if(n)for(;i.length()<e;){var o=Math.max(1,Math.min(e-i.length(),65536)/4),s=new Uint32Array(Math.floor(o));try{n(s);for(var a=0;a<s.length;++a)i.putInt32(s[a])}catch(t){if(!("undefined"!=typeof QuotaExceededError&&t instanceof QuotaExceededError))throw t}}if(i.length()<e)for(var u,c,l,h=Math.floor(65536*Math.random());i.length()<e;){c=16807*(65535&h),u=16807*(h>>16),c+=(32767&u)<<16,c+=u>>15,c=(2147483647&c)+(c>>31),h=4294967295&c;for(var a=0;a<3;++a)l=h>>>(a<<3),l^=Math.floor(256*Math.random()),i.putByte(String.fromCharCode(255&l))}return i.getBytes(e)}for(var a={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0},u=e.md,c=new Array(32),l=0;l<32;++l)c[l]=u.create();return a.pools=c,a.pool=0,a.generate=function(e,n){function i(h){if(h)return n(h);if(l.length()>=e)return n(null,l.getBytes(e));if(a.generated>1048575&&(a.key=null),null===a.key)return t.util.nextTick(function(){r(i)});var d=o(a.key,a.seed);a.generated+=d.length,l.putBytes(d),a.key=u(o(a.key,s(a.seed))),a.seed=c(o(a.key,a.seed)),t.util.setImmediate(i)}if(!n)return a.generateSync(e);var o=a.plugin.cipher,s=a.plugin.increment,u=a.plugin.formatKey,c=a.plugin.formatSeed,l=t.util.createBuffer();a.key=null,i()},a.generateSync=function(e){var n=a.plugin.cipher,r=a.plugin.increment,o=a.plugin.formatKey,s=a.plugin.formatSeed;a.key=null;for(var u=t.util.createBuffer();u.length()<e;){a.generated>1048575&&(a.key=null),null===a.key&&i();var c=n(a.key,a.seed);a.generated+=c.length,u.putBytes(c),a.key=o(n(a.key,r(a.seed))),a.seed=s(n(a.key,a.seed))}return u.getBytes(e)},n?(a.seedFile=function(t,e){n.randomBytes(t,function(t,n){if(t)return e(t);e(null,n.toString())})},a.seedFileSync=function(t){return n.randomBytes(t).toString()}):(a.seedFile=function(t,e){try{e(null,s(t))}catch(t){e(t)}},a.seedFileSync=s),a.collect=function(t){for(var e=t.length,n=0;n<e;++n)a.pools[a.pool].update(t.substr(n,1)),a.pool=31===a.pool?0:a.pool+1},a.collectInt=function(t,e){for(var n="",r=0;r<e;r+=8)n+=String.fromCharCode(t>>r&255);a.collect(n)},a.registerWorker=function(t){if(t===self)a.seedFile=function(t,e){function n(t){var r=t.data;r.forge&&r.forge.prng&&(self.removeEventListener("message",n),e(r.forge.prng.err,r.forge.prng.bytes))}self.addEventListener("message",n),self.postMessage({forge:{prng:{needed:t}}})};else{var e=function(e){var n=e.data;n.forge&&n.forge.prng&&a.seedFile(n.forge.prng.needed,function(e,n){t.postMessage({forge:{prng:{err:e,bytes:n}}})})};t.addEventListener("message",e)}},a}}if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var e=!0;define=function(t,e){e(require,module)}}var n,r=function(e,r){r.exports=function(r){var i=n.map(function(t){return e(t)}).concat(t);if(r=r||{},r.defined=r.defined||{},r.defined.prng)return r.prng;r.defined.prng=!0;for(var o=0;o<i.length;++o)i[o](r);return r.prng}},i=define;define=function(t,r){return n="string"==typeof t?r.slice(2):t.slice(2),e?(delete define,i.apply(null,Array.prototype.slice.call(arguments,0))):(define=i,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./md","./util"],function(){r.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){t.random&&t.random.getBytes||function(e){function n(){var e=t.prng.create(r);return e.getBytes=function(t,n){return e.generate(t,n)},e.getBytesSync=function(t){return e.generate(t)},e}var r={},i=new Array(4),o=t.util.createBuffer();r.formatKey=function(e){var n=t.util.createBuffer(e);return e=new Array(4),e[0]=n.getInt32(),e[1]=n.getInt32(),e[2]=n.getInt32(),e[3]=n.getInt32(),t.aes._expandKey(e,!1)},r.formatSeed=function(e){var n=t.util.createBuffer(e);return e=new Array(4),e[0]=n.getInt32(),e[1]=n.getInt32(),e[2]=n.getInt32(),e[3]=n.getInt32(),e},r.cipher=function(e,n){return t.aes._updateBlock(e,n,i,!1),o.putInt32(i[0]),o.putInt32(i[1]),o.putInt32(i[2]),o.putInt32(i[3]),o.getBytes()},r.increment=function(t){return++t[3],t},r.md=t.md.sha256;var s=n(),a="undefined"!=typeof process&&process.versions&&process.versions.node,u=null;if("undefined"!=typeof window){var c=window.crypto||window.msCrypto;c&&c.getRandomValues&&(u=function(t){return c.getRandomValues(t)})}if(t.disableNativeCode||!a&&!u){if("undefined"==typeof window||window.document,s.collectInt(+new Date,32),"undefined"!=typeof navigator){var l="";for(var h in navigator)try{"string"==typeof navigator[h]&&(l+=navigator[h])}catch(t){}s.collect(l),l=null}e&&(e().mousemove(function(t){s.collectInt(t.clientX,16),s.collectInt(t.clientY,16)}),e().keypress(function(t){s.collectInt(t.charCode,8)}))}if(t.random)for(var h in s)t.random[h]=s[h];else t.random=s;t.random.createInstance=n}("undefined"!=typeof jQuery?jQuery:null)}var e="random";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var n=!0;define=function(t,e){e(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(t){return n(t)}).concat(t);if(i=i||{},i.defined=i.defined||{},i.defined[e])return i[e];i.defined[e]=!0;for(var s=0;s<o.length;++s)o[s](i);return i[e]}},o=define;define=function(t,e){return r="string"==typeof t?e.slice(2):t.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./aes","./md","./prng","./util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){function e(t,e,n){this.data=[],null!=t&&("number"==typeof t?this.fromNumber(t,e,n):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function n(){return new e(null)}function r(t,e,n,r,i,o){for(;--o>=0;){var s=e*this.data[t++]+n.data[r]+i;i=Math.floor(s/67108864),n.data[r++]=67108863&s}return i}function i(t,e,n,r,i,o){for(var s=32767&e,a=e>>15;--o>=0;){var u=32767&this.data[t],c=this.data[t++]>>15,l=a*u+c*s;u=s*u+((32767&l)<<15)+n.data[r]+(1073741823&i),i=(u>>>30)+(l>>>15)+a*c+(i>>>30),n.data[r++]=1073741823&u}return i}function o(t,e,n,r,i,o){for(var s=16383&e,a=e>>14;--o>=0;){var u=16383&this.data[t],c=this.data[t++]>>14,l=a*u+c*s;u=s*u+((16383&l)<<14)+n.data[r]+i,i=(u>>28)+(l>>14)+a*c,n.data[r++]=268435455&u}return i}function s(t){return ne.charAt(t)}function a(t,e){var n=re[t.charCodeAt(e)];return null==n?-1:n}function u(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function c(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function l(t){var e=n();return e.fromInt(t),e}function h(t,n){var r;if(16==n)r=4;else if(8==n)r=3;else if(256==n)r=8;else if(2==n)r=1;else if(32==n)r=5;else{if(4!=n)return void this.fromRadix(t,n);r=2}this.t=0,this.s=0;for(var i=t.length,o=!1,s=0;--i>=0;){var u=8==r?255&t[i]:a(t,i);u<0?"-"==t.charAt(i)&&(o=!0):(o=!1,0==s?this.data[this.t++]=u:s+r>this.DB?(this.data[this.t-1]|=(u&(1<<this.DB-s)-1)<<s,this.data[this.t++]=u>>this.DB-s):this.data[this.t-1]|=u<<s,(s+=r)>=this.DB&&(s-=this.DB))}8==r&&0!=(128&t[0])&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),o&&e.ZERO.subTo(this,this)}function d(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function f(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var n,r=(1<<e)-1,i=!1,o="",a=this.t,u=this.DB-a*this.DB%e;if(a-- >0)for(u<this.DB&&(n=this.data[a]>>u)>0&&(i=!0,o=s(n));a>=0;)u<e?(n=(this.data[a]&(1<<u)-1)<<e-u,n|=this.data[--a]>>(u+=this.DB-e)):(n=this.data[a]>>(u-=e)&r,u<=0&&(u+=this.DB,--a)),n>0&&(i=!0),i&&(o+=s(n));return i?o:"0"}function p(){var t=n();return e.ZERO.subTo(this,t),t}function y(){return this.s<0?this.negate():this}function g(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(0!=(e=n-t.t))return this.s<0?-e:e;for(;--n>=0;)if(0!=(e=this.data[n]-t.data[n]))return e;return 0}function m(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}function v(){return this.t<=0?0:this.DB*(this.t-1)+m(this.data[this.t-1]^this.s&this.DM)}function S(t,e){var n;for(n=this.t-1;n>=0;--n)e.data[n+t]=this.data[n];for(n=t-1;n>=0;--n)e.data[n]=0;e.t=this.t+t,e.s=this.s}function b(t,e){for(var n=t;n<this.t;++n)e.data[n-t]=this.data[n];e.t=Math.max(this.t-t,0),e.s=this.s}function B(t,e){var n,r=t%this.DB,i=this.DB-r,o=(1<<i)-1,s=Math.floor(t/this.DB),a=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)e.data[n+s+1]=this.data[n]>>i|a,a=(this.data[n]&o)<<r;for(n=s-1;n>=0;--n)e.data[n]=0;e.data[s]=a,e.t=this.t+s+1,e.s=this.s,e.clamp()}function A(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)return void(e.t=0);var r=t%this.DB,i=this.DB-r,o=(1<<r)-1;e.data[0]=this.data[n]>>r;for(var s=n+1;s<this.t;++s)e.data[s-n-1]|=(this.data[s]&o)<<i,e.data[s-n]=this.data[s]>>r;r>0&&(e.data[this.t-n-1]|=(this.s&o)<<i),e.t=this.t-n,e.clamp()}function I(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this.data[n]-t.data[n],e.data[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;n<this.t;)r+=this.data[n],e.data[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r-=t.data[n],e.data[n++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e.data[n++]=this.DV+r:r>0&&(e.data[n++]=r),e.t=n,e.clamp()}function C(t,n){var r=this.abs(),i=t.abs(),o=r.t;for(n.t=o+i.t;--o>=0;)n.data[o]=0;for(o=0;o<i.t;++o)n.data[o+r.t]=r.am(0,i.data[o],n,o,0,r.t);n.s=0,n.clamp(),this.s!=t.s&&e.ZERO.subTo(n,n)}function w(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t.data[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e.data[n],t,2*n,0,1);(t.data[n+e.t]+=e.am(n+1,2*e.data[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t.data[n+e.t]-=e.DV,t.data[n+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(n,e.data[n],t,2*n,0,1)),t.s=0,t.clamp()}function T(t,r,i){var o=t.abs();if(!(o.t<=0)){var s=this.abs();if(s.t<o.t)return null!=r&&r.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=n());var a=n(),u=this.s,c=t.s,l=this.DB-m(o.data[o.t-1]);l>0?(o.lShiftTo(l,a),s.lShiftTo(l,i)):(o.copyTo(a),s.copyTo(i));var h=a.t,d=a.data[h-1];if(0!=d){var f=d*(1<<this.F1)+(h>1?a.data[h-2]>>this.F2:0),p=this.FV/f,y=(1<<this.F1)/f,g=1<<this.F2,v=i.t,S=v-h,b=null==r?n():r;for(a.dlShiftTo(S,b),i.compareTo(b)>=0&&(i.data[i.t++]=1,i.subTo(b,i)),e.ONE.dlShiftTo(h,b),b.subTo(a,a);a.t<h;)a.data[a.t++]=0;for(;--S>=0;){var B=i.data[--v]==d?this.DM:Math.floor(i.data[v]*p+(i.data[v-1]+g)*y);if((i.data[v]+=a.am(0,B,i,S,0,h))<B)for(a.dlShiftTo(S,b),i.subTo(b,i);i.data[v]<--B;)i.subTo(b,i)}null!=r&&(i.drShiftTo(h,r),u!=c&&e.ZERO.subTo(r,r)),i.t=h,i.clamp(),l>0&&i.rShiftTo(l,i),u<0&&e.ZERO.subTo(i,i)}}}function k(t){var r=n();return this.abs().divRemTo(t,null,r),this.s<0&&r.compareTo(e.ZERO)>0&&t.subTo(r,r),r}function P(t){this.m=t}function E(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function R(t){return t}function _(t){t.divRemTo(this.m,null,t)}function N(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function L(t,e){t.squareTo(e),this.reduce(e)}function O(){if(this.t<1)return 0;var t=this.data[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function D(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function U(t){var r=n();return t.abs().dlShiftTo(this.m.t,r),r.divRemTo(this.m,null,r),t.s<0&&r.compareTo(e.ZERO)>0&&this.m.subTo(r,r),r}function x(t){var e=n();return t.copyTo(e),this.reduce(e),e}function M(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t.data[e],r=n*this.mpl+((n*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(n=e+this.m.t,
t.data[n]+=this.m.am(0,r,t,e,0,this.m.t);t.data[n]>=t.DV;)t.data[n]-=t.DV,t.data[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function V(t,e){t.squareTo(e),this.reduce(e)}function K(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function j(){return 0==(this.t>0?1&this.data[0]:this.s)}function q(t,r){if(t>4294967295||t<1)return e.ONE;var i=n(),o=n(),s=r.convert(this),a=m(t)-1;for(s.copyTo(i);--a>=0;)if(r.sqrTo(i,o),(t&1<<a)>0)r.mulTo(o,s,i);else{var u=i;i=o,o=u}return r.revert(i)}function F(t,e){var n;return n=t<256||e.isEven()?new P(e):new D(e),this.exp(t,n)}function z(){var t=n();return this.copyTo(t),t}function G(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function H(){return 0==this.t?this.s:this.data[0]<<24>>24}function W(){return 0==this.t?this.s:this.data[0]<<16>>16}function J(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function X(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1}function Q(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),i=l(r),o=n(),s=n(),a="";for(this.divRemTo(i,o,s);o.signum()>0;)a=(r+s.intValue()).toString(t).substr(1)+a,o.divRemTo(i,o,s);return s.intValue().toString(t)+a}function Z(t,n){this.fromInt(0),null==n&&(n=10);for(var r=this.chunkSize(n),i=Math.pow(n,r),o=!1,s=0,u=0,c=0;c<t.length;++c){var l=a(t,c);l<0?"-"==t.charAt(c)&&0==this.signum()&&(o=!0):(u=n*u+l,++s>=r&&(this.dMultiply(i),this.dAddOffset(u,0),s=0,u=0))}s>0&&(this.dMultiply(Math.pow(n,s)),this.dAddOffset(u,0)),o&&e.ZERO.subTo(this,this)}function Y(t,n,r){if("number"==typeof n)if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(e.ONE.shiftLeft(t-1),st,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(n);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(e.ONE.shiftLeft(t-1),this);else{var i=new Array,o=7&t;i.length=1+(t>>3),n.nextBytes(i),o>0?i[0]&=(1<<o)-1:i[0]=0,this.fromString(i,256)}}function $(){var t=this.t,e=new Array;e[0]=this.s;var n,r=this.DB-t*this.DB%8,i=0;if(t-- >0)for(r<this.DB&&(n=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this.data[t]&(1<<r)-1)<<8-r,n|=this.data[--t]>>(r+=this.DB-8)):(n=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),0!=(128&n)&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}function tt(t){return 0==this.compareTo(t)}function et(t){return this.compareTo(t)<0?this:t}function nt(t){return this.compareTo(t)>0?this:t}function rt(t,e,n){var r,i,o=Math.min(t.t,this.t);for(r=0;r<o;++r)n.data[r]=e(this.data[r],t.data[r]);if(t.t<this.t){for(i=t.s&this.DM,r=o;r<this.t;++r)n.data[r]=e(this.data[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=o;r<t.t;++r)n.data[r]=e(i,t.data[r]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()}function it(t,e){return t&e}function ot(t){var e=n();return this.bitwiseTo(t,it,e),e}function st(t,e){return t|e}function at(t){var e=n();return this.bitwiseTo(t,st,e),e}function ut(t,e){return t^e}function ct(t){var e=n();return this.bitwiseTo(t,ut,e),e}function lt(t,e){return t&~e}function ht(t){var e=n();return this.bitwiseTo(t,lt,e),e}function dt(){for(var t=n(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function ft(t){var e=n();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function pt(t){var e=n();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function yt(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function gt(){for(var t=0;t<this.t;++t)if(0!=this.data[t])return t*this.DB+yt(this.data[t]);return this.s<0?this.t*this.DB:-1}function mt(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function vt(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=mt(this.data[n]^e);return t}function St(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this.data[e]&1<<t%this.DB)}function bt(t,n){var r=e.ONE.shiftLeft(t);return this.bitwiseTo(r,n,r),r}function Bt(t){return this.changeBit(t,st)}function At(t){return this.changeBit(t,lt)}function It(t){return this.changeBit(t,ut)}function Ct(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this.data[n]+t.data[n],e.data[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;n<this.t;)r+=this.data[n],e.data[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r+=t.data[n],e.data[n++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,r>0?e.data[n++]=r:r<-1&&(e.data[n++]=this.DV+r),e.t=n,e.clamp()}function wt(t){var e=n();return this.addTo(t,e),e}function Tt(t){var e=n();return this.subTo(t,e),e}function kt(t){var e=n();return this.multiplyTo(t,e),e}function Pt(t){var e=n();return this.divRemTo(t,e,null),e}function Et(t){var e=n();return this.divRemTo(t,null,e),e}function Rt(t){var e=n(),r=n();return this.divRemTo(t,e,r),new Array(e,r)}function _t(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function Nt(t,e){if(0!=t){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function Lt(){}function Ot(t){return t}function Dt(t,e,n){t.multiplyTo(e,n)}function Ut(t,e){t.squareTo(e)}function xt(t){return this.exp(t,new Lt)}function Mt(t,e,n){var r=Math.min(this.t+t.t,e);for(n.s=0,n.t=r;r>0;)n.data[--r]=0;var i;for(i=n.t-this.t;r<i;++r)n.data[r+this.t]=this.am(0,t.data[r],n,r,0,this.t);for(i=Math.min(t.t,e);r<i;++r)this.am(0,t.data[r],n,r,0,e-r);n.clamp()}function Vt(t,e,n){--e;var r=n.t=this.t+t.t-e;for(n.s=0;--r>=0;)n.data[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)n.data[this.t+r-e]=this.am(e-r,t.data[r],n,0,0,this.t+r-e);n.clamp(),n.drShiftTo(1,n)}function Kt(t){this.r2=n(),this.q3=n(),e.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function jt(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=n();return t.copyTo(e),this.reduce(e),e}function qt(t){return t}function Ft(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function zt(t,e){t.squareTo(e),this.reduce(e)}function Gt(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function Ht(t,e){var r,i,o=t.bitLength(),s=l(1);if(o<=0)return s;r=o<18?1:o<48?3:o<144?4:o<768?5:6,i=o<8?new P(e):e.isEven()?new Kt(e):new D(e);var a=new Array,u=3,c=r-1,h=(1<<r)-1;if(a[1]=i.convert(this),r>1){var d=n();for(i.sqrTo(a[1],d);u<=h;)a[u]=n(),i.mulTo(d,a[u-2],a[u]),u+=2}var f,p,y=t.t-1,g=!0,v=n();for(o=m(t.data[y])-1;y>=0;){for(o>=c?f=t.data[y]>>o-c&h:(f=(t.data[y]&(1<<o+1)-1)<<c-o,y>0&&(f|=t.data[y-1]>>this.DB+o-c)),u=r;0==(1&f);)f>>=1,--u;if((o-=u)<0&&(o+=this.DB,--y),g)a[f].copyTo(s),g=!1;else{for(;u>1;)i.sqrTo(s,v),i.sqrTo(v,s),u-=2;u>0?i.sqrTo(s,v):(p=s,s=v,v=p),i.mulTo(v,a[f],s)}for(;y>=0&&0==(t.data[y]&1<<o);)i.sqrTo(s,v),p=s,s=v,v=p,--o<0&&(o=this.DB-1,--y)}return i.revert(s)}function Wt(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var r=e;e=n,n=r}var i=e.getLowestSetBit(),o=n.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),n.rShiftTo(o,n));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),e.compareTo(n)>=0?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return o>0&&n.lShiftTo(o,n),n}function Jt(t){if(t<=0)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(this.t>0)if(0==e)n=this.data[0]%t;else for(var r=this.t-1;r>=0;--r)n=(e*n+this.data[r])%t;return n}function Xt(t){var n=t.isEven();if(this.isEven()&&n||0==t.signum())return e.ZERO;for(var r=t.clone(),i=this.clone(),o=l(1),s=l(0),a=l(0),u=l(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),n?(o.isEven()&&s.isEven()||(o.addTo(this,o),s.subTo(t,s)),o.rShiftTo(1,o)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;i.isEven();)i.rShiftTo(1,i),n?(a.isEven()&&u.isEven()||(a.addTo(this,a),u.subTo(t,u)),a.rShiftTo(1,a)):u.isEven()||u.subTo(t,u),u.rShiftTo(1,u);r.compareTo(i)>=0?(r.subTo(i,r),n&&o.subTo(a,o),s.subTo(u,s)):(i.subTo(r,i),n&&a.subTo(o,a),u.subTo(s,u))}return 0!=i.compareTo(e.ONE)?e.ZERO:u.compareTo(t)>=0?u.subtract(t):u.signum()<0?(u.addTo(t,u),u.signum()<0?u.add(t):u):u}function Qt(t){var e,n=this.abs();if(1==n.t&&n.data[0]<=ie[ie.length-1]){for(e=0;e<ie.length;++e)if(n.data[0]==ie[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<ie.length;){for(var r=ie[e],i=e+1;i<ie.length&&r<oe;)r*=ie[i++];for(r=n.modInt(r);e<i;)if(r%ie[e++]==0)return!1}return n.millerRabin(t)}function Zt(t){var n=this.subtract(e.ONE),r=n.getLowestSetBit();if(r<=0)return!1;for(var i,o=n.shiftRight(r),s=Yt(),a=0;a<t;++a){do{i=new e(this.bitLength(),s)}while(i.compareTo(e.ONE)<=0||i.compareTo(n)>=0);var u=i.modPow(o,this);if(0!=u.compareTo(e.ONE)&&0!=u.compareTo(n)){for(var c=1;c++<r&&0!=u.compareTo(n);)if(u=u.modPowInt(2,this),0==u.compareTo(e.ONE))return!1;if(0!=u.compareTo(n))return!1}}return!0}function Yt(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(256*Math.random())}}}var $t;"undefined"==typeof navigator?(e.prototype.am=o,$t=28):"Microsoft Internet Explorer"==navigator.appName?(e.prototype.am=i,$t=30):"Netscape"!=navigator.appName?(e.prototype.am=r,$t=26):(e.prototype.am=o,$t=28),e.prototype.DB=$t,e.prototype.DM=(1<<$t)-1,e.prototype.DV=1<<$t;e.prototype.FV=Math.pow(2,52),e.prototype.F1=52-$t,e.prototype.F2=2*$t-52;var te,ee,ne="0123456789abcdefghijklmnopqrstuvwxyz",re=new Array;for(te="0".charCodeAt(0),ee=0;ee<=9;++ee)re[te++]=ee;for(te="a".charCodeAt(0),ee=10;ee<36;++ee)re[te++]=ee;for(te="A".charCodeAt(0),ee=10;ee<36;++ee)re[te++]=ee;P.prototype.convert=E,P.prototype.revert=R,P.prototype.reduce=_,P.prototype.mulTo=N,P.prototype.sqrTo=L,D.prototype.convert=U,D.prototype.revert=x,D.prototype.reduce=M,D.prototype.mulTo=K,D.prototype.sqrTo=V,e.prototype.copyTo=u,e.prototype.fromInt=c,e.prototype.fromString=h,e.prototype.clamp=d,e.prototype.dlShiftTo=S,e.prototype.drShiftTo=b,e.prototype.lShiftTo=B,e.prototype.rShiftTo=A,e.prototype.subTo=I,e.prototype.multiplyTo=C,e.prototype.squareTo=w,e.prototype.divRemTo=T,e.prototype.invDigit=O,e.prototype.isEven=j,e.prototype.exp=q,e.prototype.toString=f,e.prototype.negate=p,e.prototype.abs=y,e.prototype.compareTo=g,e.prototype.bitLength=v,e.prototype.mod=k,e.prototype.modPowInt=F,e.ZERO=l(0),e.ONE=l(1),Lt.prototype.convert=Ot,Lt.prototype.revert=Ot,Lt.prototype.mulTo=Dt,Lt.prototype.sqrTo=Ut,Kt.prototype.convert=jt,Kt.prototype.revert=qt,Kt.prototype.reduce=Ft,Kt.prototype.mulTo=Gt,Kt.prototype.sqrTo=zt;var ie=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],oe=(1<<26)/ie[ie.length-1];e.prototype.chunkSize=J,e.prototype.toRadix=Q,e.prototype.fromRadix=Z,e.prototype.fromNumber=Y,e.prototype.bitwiseTo=rt,e.prototype.changeBit=bt,e.prototype.addTo=Ct,e.prototype.dMultiply=_t,e.prototype.dAddOffset=Nt,e.prototype.multiplyLowerTo=Mt,e.prototype.multiplyUpperTo=Vt,e.prototype.modInt=Jt,e.prototype.millerRabin=Zt,e.prototype.clone=z,e.prototype.intValue=G,e.prototype.byteValue=H,e.prototype.shortValue=W,e.prototype.signum=X,e.prototype.toByteArray=$,e.prototype.equals=tt,e.prototype.min=et,e.prototype.max=nt,e.prototype.and=ot,e.prototype.or=at,e.prototype.xor=ct,e.prototype.andNot=ht,e.prototype.not=dt,e.prototype.shiftLeft=ft,e.prototype.shiftRight=pt,e.prototype.getLowestSetBit=gt,e.prototype.bitCount=vt,e.prototype.testBit=St,e.prototype.setBit=Bt,e.prototype.clearBit=At,e.prototype.flipBit=It,e.prototype.add=wt,e.prototype.subtract=Tt,e.prototype.multiply=kt,e.prototype.divide=Pt,e.prototype.remainder=Et,e.prototype.divideAndRemainder=Rt,e.prototype.modPow=Ht,e.prototype.modInverse=Xt,e.prototype.pow=xt,e.prototype.gcd=Wt,e.prototype.isProbablePrime=Qt,t.jsbn=t.jsbn||{},t.jsbn.BigInteger=e}if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var e=!0;define=function(t,e){e(require,module)}}var n,r=function(e,r){r.exports=function(r){var i=n.map(function(t){return e(t)}).concat(t);if(r=r||{},r.defined=r.defined||{},r.defined.jsbn)return r.jsbn;r.defined.jsbn=!0;for(var o=0;o<i.length;++o)i[o](r);return r.jsbn}},i=define;define=function(t,r){return n="string"==typeof t?r.slice(2):t.slice(2),e?(delete define,i.apply(null,Array.prototype.slice.call(arguments,0))):(define=i,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module"],function(){r.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){function e(e,n,r){r||(r=t.md.sha1.create());for(var i="",o=Math.ceil(n/r.digestLength),s=0;s<o;++s){var a=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,255&s);r.start(),r.update(e+a),i+=r.digest().getBytes()}return i.substring(0,n)}var n=t.pkcs1=t.pkcs1||{};n.encode_rsa_oaep=function(n,r,i){var o,s,a,u;"string"==typeof i?(o=i,s=arguments[3]||void 0,a=arguments[4]||void 0):i&&(o=i.label||void 0,s=i.seed||void 0,a=i.md||void 0,i.mgf1&&i.mgf1.md&&(u=i.mgf1.md)),a?a.start():a=t.md.sha1.create(),u||(u=a);var c=Math.ceil(n.n.bitLength()/8),l=c-2*a.digestLength-2;if(r.length>l){var h=new Error("RSAES-OAEP input message length is too long.");throw h.length=r.length,h.maxLength=l,h}o||(o=""),a.update(o,"raw");for(var d=a.digest(),f="",p=l-r.length,y=0;y<p;y++)f+="\0";var g=d.getBytes()+f+""+r;if(s){if(s.length!==a.digestLength){var h=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw h.seedLength=s.length,h.digestLength=a.digestLength,h}}else s=t.random.getBytes(a.digestLength);var m=e(s,c-a.digestLength-1,u),v=t.util.xorBytes(g,m,g.length),S=e(v,a.digestLength,u);return"\0"+t.util.xorBytes(s,S,s.length)+v},n.decode_rsa_oaep=function(n,r,i){var o,s,a;"string"==typeof i?(o=i,s=arguments[3]||void 0):i&&(o=i.label||void 0,s=i.md||void 0,i.mgf1&&i.mgf1.md&&(a=i.mgf1.md));var u=Math.ceil(n.n.bitLength()/8);if(r.length!==u){var c=new Error("RSAES-OAEP encoded message length is invalid.");throw c.length=r.length,c.expectedLength=u,c}if(void 0===s?s=t.md.sha1.create():s.start(),a||(a=s),u<2*s.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");o||(o=""),s.update(o,"raw");for(var l=s.digest().getBytes(),h=r.charAt(0),d=r.substring(1,s.digestLength+1),f=r.substring(1+s.digestLength),p=e(f,s.digestLength,a),y=t.util.xorBytes(d,p,d.length),g=e(y,u-s.digestLength-1,a),m=t.util.xorBytes(f,g,f.length),v=m.substring(0,s.digestLength),c="\0"!==h,S=0;S<s.digestLength;++S)c|=l.charAt(S)!==v.charAt(S);for(var b=1,B=s.digestLength,A=s.digestLength;A<m.length;A++){var I=m.charCodeAt(A),C=1&I^1;c|=I&(b?65534:0),b&=C,B+=b}if(c||1!==m.charCodeAt(B))throw new Error("Invalid RSAES-OAEP padding.");return m.substring(B+1)}}if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var e=!0;define=function(t,e){e(require,module)}}var n,r=function(e,r){r.exports=function(r){var i=n.map(function(t){return e(t)}).concat(t);if(r=r||{},r.defined=r.defined||{},r.defined.pkcs1)return r.pkcs1;r.defined.pkcs1=!0;for(var o=0;o<i.length;++o)i[o](r);return r.pkcs1}},i=define;define=function(t,r){return n="string"==typeof t?r.slice(2):t.slice(2),e?(delete define,i.apply(null,Array.prototype.slice.call(arguments,0))):(define=i,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./util","./random","./sha1"],function(){r.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){function e(e,n,r){var i=t.util.createBuffer(),o=Math.ceil(n.n.bitLength()/8);if(e.length>o-11){var s=new Error("Message is too long for PKCS#1 v1.5 padding.");throw s.length=e.length,s.max=o-11,s}i.putByte(0),i.putByte(r);var a,u=o-3-e.length;if(0===r||1===r){a=0===r?0:255;for(var c=0;c<u;++c)i.putByte(a)}else for(;u>0;){for(var l=0,h=t.random.getBytes(u),c=0;c<u;++c)a=h.charCodeAt(c),0===a?++l:i.putByte(a);u=l}return i.putByte(0),i.putBytes(e),i}function n(e,n,r,i){var o=Math.ceil(n.n.bitLength()/8),s=t.util.createBuffer(e),a=s.getByte(),u=s.getByte();if(0!==a||r&&0!==u&&1!==u||!r&&2!=u||r&&0===u&&void 0===i)throw new Error("Encryption block is invalid.");var c=0;if(0===u){c=o-3-i;for(var l=0;l<c;++l)if(0!==s.getByte())throw new Error("Encryption block is invalid.")}else if(1===u)for(c=0;s.length()>1;){if(255!==s.getByte()){--s.read;break}++c}else if(2===u)for(c=0;s.length()>1;){if(0===s.getByte()){--s.read;break}++c}if(0!==s.getByte()||c!==o-3-s.length())throw new Error("Encryption block is invalid.");return s.getBytes()}function r(e,n,r){function i(){o(e.pBits,function(t,n){return t?r(t):(e.p=n,null!==e.q?s(t,e.q):void o(e.qBits,s))})}function o(e,n){t.prime.generateProbablePrime(e,a,n)}function s(t,n){if(t)return r(t);if(e.q=n,e.p.compareTo(e.q)<0){var a=e.p;e.p=e.q,e.q=a}if(0!==e.p.subtract(c.ONE).gcd(e.e).compareTo(c.ONE))return e.p=null,void i();if(0!==e.q.subtract(c.ONE).gcd(e.e).compareTo(c.ONE))return e.q=null,void o(e.qBits,s);if(e.p1=e.p.subtract(c.ONE),e.q1=e.q.subtract(c.ONE),e.phi=e.p1.multiply(e.q1),0!==e.phi.gcd(e.e).compareTo(c.ONE))return e.p=e.q=null,void i();if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits)return e.q=null,void o(e.qBits,s);var u=e.e.modInverse(e.phi);e.keys={privateKey:h.rsa.setPrivateKey(e.n,e.e,u,e.p,e.q,u.mod(e.p1),u.mod(e.q1),e.q.modInverse(e.p)),publicKey:h.rsa.setPublicKey(e.n,e.e)},r(null,e.keys)}"function"==typeof n&&(r=n,n={}),n=n||{};var a={algorithm:{name:n.algorithm||"PRIMEINC",options:{workers:n.workers||2,workLoad:n.workLoad||100,workerScript:n.workerScript}}};"prng"in n&&(a.prng=n.prng),i()}function i(e){var n=e.toString(16);n[0]>="8"&&(n="00"+n);var r=t.util.hexToBytes(n);return r.length>1&&(0===r.charCodeAt(0)&&0==(128&r.charCodeAt(1))||255===r.charCodeAt(0)&&128==(128&r.charCodeAt(1)))?r.substr(1):r}function o(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function s(t){return"undefined"!=typeof window&&"object"==typeof window.crypto&&"object"==typeof window.crypto.subtle&&"function"==typeof window.crypto.subtle[t]}function a(t){return"undefined"!=typeof window&&"object"==typeof window.msCrypto&&"object"==typeof window.msCrypto.subtle&&"function"==typeof window.msCrypto.subtle[t]}function u(e){for(var n=t.util.hexToBytes(e.toString(16)),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}if(void 0===c)var c=t.jsbn.BigInteger;var l=t.asn1;t.pki=t.pki||{},t.pki.rsa=t.rsa=t.rsa||{};var h=t.pki,d=[6,4,2,4,2,4,6,2],f={name:"PrivateKeyInfo",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:l.Class.UNIVERSAL,type:l.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:l.Class.UNIVERSAL,type:l.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},p={name:"RSAPrivateKey",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},y={name:"RSAPublicKey",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},g=t.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:l.Class.UNIVERSAL,type:l.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:l.Class.UNIVERSAL,type:l.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},m=function(t){var e;if(!(t.algorithm in h.oids)){var n=new Error("Unknown message digest algorithm.");throw n.algorithm=t.algorithm,n}e=h.oids[t.algorithm];var r=l.oidToDer(e).getBytes(),i=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[]),o=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[]);o.value.push(l.create(l.Class.UNIVERSAL,l.Type.OID,!1,r)),o.value.push(l.create(l.Class.UNIVERSAL,l.Type.NULL,!1,""));var s=l.create(l.Class.UNIVERSAL,l.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(o),i.value.push(s),l.toDer(i).getBytes()},v=function(e,n,r){if(r)return e.modPow(n.e,n.n);if(!n.p||!n.q)return e.modPow(n.d,n.n);n.dP||(n.dP=n.d.mod(n.p.subtract(c.ONE))),n.dQ||(n.dQ=n.d.mod(n.q.subtract(c.ONE))),n.qInv||(n.qInv=n.q.modInverse(n.p));var i;do{i=new c(t.util.bytesToHex(t.random.getBytes(n.n.bitLength()/8)),16)}while(i.compareTo(n.n)>=0||!i.gcd(n.n).equals(c.ONE));e=e.multiply(i.modPow(n.e,n.n)).mod(n.n);for(var o=e.mod(n.p).modPow(n.dP,n.p),s=e.mod(n.q).modPow(n.dQ,n.q);o.compareTo(s)<0;)o=o.add(n.p);var a=o.subtract(s).multiply(n.qInv).mod(n.p).multiply(n.q).add(s);return a=a.multiply(i.modInverse(n.n)).mod(n.n)};h.rsa.encrypt=function(n,r,i){var o,s=i,a=Math.ceil(r.n.bitLength()/8);!1!==i&&!0!==i?(s=2===i,o=e(n,r,i)):(o=t.util.createBuffer(),o.putBytes(n));for(var u=new c(o.toHex(),16),l=v(u,r,s),h=l.toString(16),d=t.util.createBuffer(),f=a-Math.ceil(h.length/2);f>0;)d.putByte(0),--f;return d.putBytes(t.util.hexToBytes(h)),d.getBytes()},h.rsa.decrypt=function(e,r,i,o){var s=Math.ceil(r.n.bitLength()/8);if(e.length!==s){var a=new Error("Encrypted message length is invalid.");throw a.length=e.length,a.expected=s,a}var u=new c(t.util.createBuffer(e).toHex(),16);if(u.compareTo(r.n)>=0)throw new Error("Encrypted message is invalid.");for(var l=v(u,r,i),h=l.toString(16),d=t.util.createBuffer(),f=s-Math.ceil(h.length/2);f>0;)d.putByte(0),--f;return d.putBytes(t.util.hexToBytes(h)),!1!==o?n(d.getBytes(),r,i):d.getBytes()},h.rsa.createKeyPairGenerationState=function(e,n,r){"string"==typeof e&&(e=parseInt(e,10)),e=e||2048,r=r||{};var i,o=r.prng||t.random,s={nextBytes:function(t){for(var e=o.getBytesSync(t.length),n=0;n<t.length;++n)t[n]=e.charCodeAt(n)}},a=r.algorithm||"PRIMEINC";if("PRIMEINC"!==a)throw new Error("Invalid key generation algorithm: "+a);return i={algorithm:a,state:0,bits:e,rng:s,eInt:n||65537,e:new c(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null},i.e.fromInt(i.eInt),i},h.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var n=new c(null);n.fromInt(30);for(var r,i=0,s=function(t,e){return t|e},a=+new Date,u=0;null===t.keys&&(e<=0||u<e);){if(0===t.state){var l=null===t.p?t.pBits:t.qBits,f=l-1;0===t.pqState?(t.num=new c(l,t.rng),t.num.testBit(f)||t.num.bitwiseTo(c.ONE.shiftLeft(f),s,t.num),t.num.dAddOffset(31-t.num.mod(n).byteValue(),0),i=0,++t.pqState):1===t.pqState?t.num.bitLength()>l?t.pqState=0:t.num.isProbablePrime(o(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(d[i++%8],0):2===t.pqState?t.pqState=0===t.num.subtract(c.ONE).gcd(t.e).compareTo(c.ONE)?3:0:3===t.pqState&&(t.pqState=0,null===t.p?t.p=t.num:t.q=t.num,null!==t.p&&null!==t.q&&++t.state,t.num=null)}else if(1===t.state)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(2===t.state)t.p1=t.p.subtract(c.ONE),t.q1=t.q.subtract(c.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(3===t.state)0===t.phi.gcd(t.e).compareTo(c.ONE)?++t.state:(t.p=null,t.q=null,t.state=0);else if(4===t.state)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(5===t.state){var p=t.e.modInverse(t.phi);t.keys={privateKey:h.rsa.setPrivateKey(t.n,t.e,p,t.p,t.q,p.mod(t.p1),p.mod(t.q1),t.q.modInverse(t.p)),publicKey:h.rsa.setPublicKey(t.n,t.e)}}r=+new Date,u+=r-a,a=r}return null!==t.keys},h.rsa.generateKeyPair=function(e,n,i,o){if(1===arguments.length?"object"==typeof e?(i=e,e=void 0):"function"==typeof e&&(o=e,e=void 0):2===arguments.length?"number"==typeof e?"function"==typeof n?(o=n,n=void 0):"number"!=typeof n&&(i=n,n=void 0):(i=e,o=n,e=void 0,n=void 0):3===arguments.length&&("number"==typeof n?"function"==typeof i&&(o=i,i=void 0):(o=i,i=n,n=void 0)),i=i||{},void 0===e&&(e=i.bits||2048),void 0===n&&(n=i.e||65537),!t.disableNativeCode&&o&&e>=256&&e<=16384&&(65537===n||3===n)){if(s("generateKey")&&s("exportKey"))return window.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:u(n),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(t){return window.crypto.subtle.exportKey("pkcs8",t.privateKey)}).catch(function(t){o(t)}).then(function(e){if(e){var n=h.privateKeyFromAsn1(l.fromDer(t.util.createBuffer(e)));o(null,{privateKey:n,publicKey:h.setRsaPublicKey(n.n,n.e)})}});if(a("generateKey")&&a("exportKey")){var c=window.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:u(n),hash:{name:"SHA-256"}},!0,["sign","verify"]);return c.oncomplete=function(e){var n=e.target.result,r=window.msCrypto.subtle.exportKey("pkcs8",n.privateKey);r.oncomplete=function(e){var n=e.target.result,r=h.privateKeyFromAsn1(l.fromDer(t.util.createBuffer(n)));o(null,{privateKey:r,publicKey:h.setRsaPublicKey(r.n,r.e)})},r.onerror=function(t){o(t)}},void(c.onerror=function(t){o(t)})}}var d=h.rsa.createKeyPairGenerationState(e,n,i);if(!o)return h.rsa.stepKeyPairGenerationState(d,0),d.keys;r(d,i,o)},h.setRsaPublicKey=h.rsa.setPublicKey=function(r,i){var o={n:r,e:i};return o.encrypt=function(n,r,i){if("string"==typeof r?r=r.toUpperCase():void 0===r&&(r="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===r)r={encode:function(t,n,r){return e(t,n,2).getBytes()}};else if("RSA-OAEP"===r||"RSAES-OAEP"===r)r={encode:function(e,n){return t.pkcs1.encode_rsa_oaep(n,e,i)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(r))r={encode:function(t){return t}};else if("string"==typeof r)throw new Error('Unsupported encryption scheme: "'+r+'".');var s=r.encode(n,o,!0);return h.rsa.encrypt(s,o,!0)},o.verify=function(t,e,r){"string"==typeof r?r=r.toUpperCase():void 0===r&&(r="RSASSA-PKCS1-V1_5"),"RSASSA-PKCS1-V1_5"===r?r={verify:function(t,e){return e=n(e,o,!0),t===l.fromDer(e).value[1].value}}:"NONE"!==r&&"NULL"!==r&&null!==r||(r={verify:function(t,e){return e=n(e,o,!0),t===e}});var i=h.rsa.decrypt(e,o,!0,!1);return r.verify(t,i,o.n.bitLength())},o},h.setRsaPrivateKey=h.rsa.setPrivateKey=function(e,r,i,o,s,a,u,c){var l={n:e,e:r,d:i,p:o,q:s,dP:a,dQ:u,qInv:c};return l.decrypt=function(e,r,i){"string"==typeof r?r=r.toUpperCase():void 0===r&&(r="RSAES-PKCS1-V1_5");var o=h.rsa.decrypt(e,l,!1,!1);if("RSAES-PKCS1-V1_5"===r)r={decode:n};else if("RSA-OAEP"===r||"RSAES-OAEP"===r)r={decode:function(e,n){return t.pkcs1.decode_rsa_oaep(n,e,i)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(r))throw new Error('Unsupported encryption scheme: "'+r+'".');r={decode:function(t){return t}}}return r.decode(o,l,!1)},l.sign=function(t,e){var n=!1;"string"==typeof e&&(e=e.toUpperCase()),void 0===e||"RSASSA-PKCS1-V1_5"===e?(e={encode:m},n=1):"NONE"!==e&&"NULL"!==e&&null!==e||(e={encode:function(){return t}},n=1);var r=e.encode(t,l.n.bitLength());return h.rsa.encrypt(r,l,n)},l},h.wrapRsaPrivateKey=function(t){return l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,l.integerToDer(0).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(h.oids.rsaEncryption).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.NULL,!1,"")]),l.create(l.Class.UNIVERSAL,l.Type.OCTETSTRING,!1,l.toDer(t).getBytes())])},h.privateKeyFromAsn1=function(e){var n={},r=[];if(l.validate(e,f,n,r)&&(e=l.fromDer(t.util.createBuffer(n.privateKey))),n={},r=[],!l.validate(e,p,n,r)){var i=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw i.errors=r,i}var o,s,a,u,d,y,g,m;return o=t.util.createBuffer(n.privateKeyModulus).toHex(),s=t.util.createBuffer(n.privateKeyPublicExponent).toHex(),a=t.util.createBuffer(n.privateKeyPrivateExponent).toHex(),u=t.util.createBuffer(n.privateKeyPrime1).toHex(),d=t.util.createBuffer(n.privateKeyPrime2).toHex(),y=t.util.createBuffer(n.privateKeyExponent1).toHex(),g=t.util.createBuffer(n.privateKeyExponent2).toHex(),m=t.util.createBuffer(n.privateKeyCoefficient).toHex(),h.setRsaPrivateKey(new c(o,16),new c(s,16),new c(a,16),new c(u,16),new c(d,16),new c(y,16),new c(g,16),new c(m,16))},h.privateKeyToAsn1=h.privateKeyToRSAPrivateKey=function(t){return l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,l.integerToDer(0).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,i(t.n)),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,i(t.e)),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,i(t.d)),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,i(t.p)),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,i(t.q)),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,i(t.dP)),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,i(t.dQ)),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,i(t.qInv))])},h.publicKeyFromAsn1=function(e){var n={},r=[];if(l.validate(e,g,n,r)){var i=l.derToOid(n.publicKeyOid);if(i!==h.oids.rsaEncryption){var o=new Error("Cannot read public key. Unknown OID.");throw o.oid=i,o}e=n.rsaPublicKey}if(r=[],!l.validate(e,y,n,r)){var o=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw o.errors=r,o}var s=t.util.createBuffer(n.publicKeyModulus).toHex(),a=t.util.createBuffer(n.publicKeyExponent).toHex();return h.setRsaPublicKey(new c(s,16),new c(a,16))},h.publicKeyToAsn1=h.publicKeyToSubjectPublicKeyInfo=function(t){return l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(h.oids.rsaEncryption).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.NULL,!1,"")]),l.create(l.Class.UNIVERSAL,l.Type.BITSTRING,!1,[h.publicKeyToRSAPublicKey(t)])])},h.publicKeyToRSAPublicKey=function(t){
return l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,i(t.n)),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,i(t.e))])}}if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var e=!0;define=function(t,e){e(require,module)}}var n,r=function(e,r){r.exports=function(r){var i=n.map(function(t){return e(t)}).concat(t);if(r=r||{},r.defined=r.defined||{},r.defined.rsa)return r.rsa;r.defined.rsa=!0;for(var o=0;o<i.length;++o)i[o](r);return r.rsa}},i=define;define=function(t,r){return n="string"==typeof t?r.slice(2):t.slice(2),e?(delete define,i.apply(null,Array.prototype.slice.call(arguments,0))):(define=i,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./asn1","./jsbn","./oids","./pkcs1","./prime","./random","./util"],function(){r.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){if("function"!=typeof define){if("object"!=typeof module||!module.exports)return void("undefined"==typeof forge&&(forge={disableNativeCode:!1}));var t=!0;define=function(t,e){e(require,module)}}var e,n=function(t,n){n.exports=function(n){var r=e.map(function(e){return t(e)});if(n=n||{},n.defined=n.defined||{},n.defined.forge)return n.forge;n.defined.forge=!0;for(var i=0;i<r.length;++i)"function"==typeof r[i]&&r[i](n);return n},n.exports.disableNativeCode=!1,n.exports(n.exports)},r=define;define=function(n,i){return e="string"==typeof n?i.slice(2):n.slice(2),t?(delete define,r.apply(null,Array.prototype.slice.call(arguments,0))):(define=r,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./aes","./aesCipherSuites","./asn1","./cipher","./cipherModes","./debug","./des","./hmac","./kem","./log","./md","./mgf1","./pbkdf2","./pem","./pkcs7","./pkcs1","./pkcs12","./pki","./prime","./prng","./pss","./random","./rc2","./ssh","./task","./tls","./util"],function(){n.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(t){var e={},n={};e.define=function(t,e,r){if(e&&e.length)for(var i=0;i<e.length;i++)e[i]=n[e[i]];n[t]=r.apply(this,e||[])},t.connectsdk=e,"undefined"!=typeof exports&&(exports.connectsdk=e),e.define("connectsdk.core",[],function(){return e}),"undefined"==typeof define&&(t.define=e.define)}("undefined"==typeof window?this:window),define("connectsdk.core",[],function(){var t="undefined"==typeof window?this:window,e={};return t.connectsdk=e,"undefined"!=typeof exports&&(exports.connectsdk=e),e}),define("connectsdk.promise",["connectsdk.core"],function(t){return function(t){function e(t){var e=this;this.pending=[],this.resolve=function(t){e.complete("resolve",t)},this.reject=function(t){e.complete("reject",t)},t&&(this.isSingleton=!0)}e.prototype={then:function(t,e){return this.pending.push({resolve:t,reject:e}),this},complete:function(t,e){for(;this.pending[0];)this.pending.shift()[t](e)}},t.Promise=e}(connectsdk),connectsdk.Promise}),define("connectsdk.net",["connectsdk.core"],function(t){function e(){if(!("undefined"==typeof XMLHttpRequest||"file:"===window.location.protocol&&window.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return!1}function n(t){return t.status>=200&&t.status<300||304==t.status||0==t.status&&t.responseText}function r(r,i){function s(t){if(4==h.readyState){var e=h.mimeType||h.getResponseHeader("content-type")||"";if(d.status=h.status,d.responseText=h.responseText,/json/.test(e)?d.responseJSON=o.parseJSON(h.responseText):/xml/.test(e)&&(d.responseXML=o.parseXML(h.responseText)),d.success=n(h),i.callback)return i.callback(d,h);d.success?(i.success&&i.success(d,h),c&&c.resolve(d,h)):(i.error&&i.error(d,h),c&&c.reject(d,h))}}function a(){var t={Accept:"text/javascript, application/json, text/html, application/xml, text/xml, */*","Content-Type":"application/json"};for(var e in t)i.headers.hasOwnProperty(e)||(i.headers[e]=t[e]);for(var e in i.headers)h.setRequestHeader(e,i.headers[e])}function u(){try{a(),h.send(i.postBody)}catch(t){i.error&&i.error()}}var c,l,h=e(),d={};return t.Promise&&(c=new t.Promise),void 0===i&&(i={}),i.method=i.method?i.method.toLowerCase():"get",i.asynchronous=i.asynchronous||!0,i.postBody=i.postBody||"",h.onreadystatechange=s,h.open(i.method,r,i.asynchronous),i.headers=i.headers||{},i.contentType&&(i.headers["Content-Type"]=i.contentType),"string"!=typeof i.postBody&&(i.postBody=o.serialize(i.postBody)),l={set:function(t,e){return i.headers[t]=e,l},send:function(t,e){return i.postBody=o.serialize(t),i.callback=e,u(),l},end:function(t){return i.callback=t,u(),l},data:function(t){return i.postBody=o.serialize(t),l},then:function(){return l.end(),c&&c.then.apply(c,arguments),l}}}function i(t,e,n){function r(t){i.success(t),i.teardown()}var i=this;this.url=t,this.methodName="__connectsdk_jsonp_"+parseInt((new Date).getTime()),this.success=e,this.failure=n,window[this.methodName]=r}var o={},s="".trim?function(t){return t.trim()}:function(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};return o.serialize=function(t){if(t){if("string"==typeof t)return t;var e=[];for(var n in t)e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")}},o.parseJSON=function(t){return"string"==typeof t&&t?(t=s(t),window.JSON.parse(t)):null},window.DOMParser?o.parseXML=function(t){return(new DOMParser).parseFromString(t,"text/xml")}:o.parseXML=function(t){var e=new ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e},i.prototype.run=function(){this.scriptTag=document.createElement("script"),this.scriptTag.id=this.methodName,this.scriptTag.src=this.url.replace("{callback}",this.methodName);var t=this;this.scriptTag.onerror=function(){t.failure()},document.body.appendChild(this.scriptTag)},i.prototype.teardown=function(){window[this.methodName]=null;try{delete window[this.methodName]}catch(t){}this.scriptTag&&document.body.removeChild(this.scriptTag)},o.get=function(t,e){return void 0===e&&(e={}),e.method="get",r(t,e)},o.post=function(t,e){return void 0===e&&(e={}),e.method="post",r(t,e)},o.jsonp=function(t,e){void 0===e&&(e={}),new i(t,e.success,e.failure).run()},t.get=o.get,t.post=o.post,t.jsonp=o.jsonp,o.ajax=r,t.net=o,o}),define("connectsdk.Util",["connectsdk.core"],function(t){var e=function(){function t(){return{applePayPaymentProductId:302,androidPayPaymentProductId:320,bancontactPaymentProductId:3012,getMetadata:function(){return{screenSize:window.innerWidth+"x"+window.innerHeight,platformIdentifier:window.navigator.userAgent,sdkIdentifier:(document.GC&&document.GC.rppEnabledPage?"rpp-":"")+"JavaScriptClientSDK/v3.9.3",sdkCreator:"Ingenico"}},base64Encode:function(t){if("object"==typeof t)try{t=JSON.stringify(t)}catch(t){throw"data must be either a String or a JSON object"}var e,n,r,i,o,s,a,u,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=0,h=0,d="",f=[];if(!t)return t;do{e=t.charCodeAt(l++),n=t.charCodeAt(l++),r=t.charCodeAt(l++),u=e<<16|n<<8|r,i=u>>18&63,o=u>>12&63,s=u>>6&63,a=63&u,f[h++]=c.charAt(i)+c.charAt(o)+c.charAt(s)+c.charAt(a)}while(l<t.length);d=f.join("");var p=t.length%3;return(p?d.slice(0,p-3):d)+"===".slice(p||3)},filterOutProductsThatAreNotSupportedInThisBrowser:function(t){for(var e=t.paymentProducts.length-1;e>=0;e--){var n=t.paymentProducts[e];n&&this.paymentProductsThatAreNotSupportedInThisBrowser.indexOf(n.id)>-1&&t.paymentProducts.splice(e,1)}},paymentProductsThatAreNotSupportedInThisBrowser:[302]}}var e;return{getInstance:function(){return e||(e=t()),e}}}();return t.Util=e,e}),define("connectsdk.AndroidPay",["connectsdk.core","connectsdk.promise","connectsdk.Util"],function(t,e,n){var r=n.getInstance(),i=null,o=null,s=null,a=function(t,e){var n="TEST";return"PROD"===s.environment&&(n="PROD"),[{supportedMethods:["https://android.com/pay"],data:{merchantId:o.androidPay.merchantId,environment:n,allowedCardNetworks:t,paymentMethodTokenizationParameters:{tokenizationType:"NETWORK_TOKEN",parameters:{publicKey:e}}}}]},u=function(){var t=(s.totalAmount/100).toFixed(2);return{total:{label:"Total",amount:{currency:s.currency,value:t}}}},c=function(){return{requestShipping:!1,requestPayerEmail:!1,requestPayerPhone:!1,requestPayerName:!1}},l=function(t,n){var r=new e,i=a(t.networks,n.publicKey),o=u(),s=c(),l=new PaymentRequest(i,o,s);return setTimeout(function(){l.canMakePayment?l.canMakePayment().then(function(t){t?r.resolve(!0):r.resolve(!1)}).catch(function(t){r.reject(t)}):r.resolve(!0)}),r},h=function(){var t=new e;return i.getPaymentProductPublicKey(r.androidPayPaymentProductId).then(function(e){t.resolve(e)},function(){t.reject()}),t},d=function(){var t=new e;return i.getPaymentProductNetworks(r.androidPayPaymentProductId,s).then(function(e){e.networks&&e.networks.length>0?t.resolve(e):t.reject()},function(){t.reject()}),t},f=function(){return window&&window.PaymentRequest},p=function(t){i=t,this.isAndroidPayAvailable=function(t,n){s=t,o=n;var i=new e;return setTimeout(function(){f()?d().then(function(t){h().then(function(e){l(t,e).then(function(t){t||r.paymentProductsThatAreNotSupportedInThisBrowser.push(r.androidPayPaymentProductId),i.resolve(t)},function(){r.paymentProductsThatAreNotSupportedInThisBrowser.push(r.androidPayPaymentProductId),i.reject("failed to run canMakePayment() check with the payment request API")})},function(){r.paymentProductsThatAreNotSupportedInThisBrowser.push(r.androidPayPaymentProductId),i.reject("failed to retrieve payment product publickey")})},function(){r.paymentProductsThatAreNotSupportedInThisBrowser.push(r.androidPayPaymentProductId),i.reject("failed to retrieve paymentproduct networks")}):(r.paymentProductsThatAreNotSupportedInThisBrowser.push(r.androidPayPaymentProductId),i.reject("Payment Request API is not available"))}),i},this.isMerchantIdProvided=function(t){return t.androidPay.merchantId?t.androidPay.merchantId:(r.paymentProductsThatAreNotSupportedInThisBrowser.push(r.androidPayPaymentProductId),!1)}};return t.AndroidPay=p,p}),define("connectsdk.PublicKeyResponse",["connectsdk.core"],function(t){var e=function(t){this.json=t,this.keyId=t.keyId,this.publicKey=t.publicKey};return t.PublicKeyResponse=e,e}),define("connectsdk.PaymentProductPublicKeyResponse",["connectsdk.core"],function(t){var e=function(t){this.json=t,this.keyId=t.keyId,this.publicKey=t.publicKey};return t.PaymentProductPublicKeyResponse=e,e}),define("connectsdk.C2SCommunicatorConfiguration",["connectsdk.core"],function(t){var e=function(t,e){if(this.endpoints={PROD:{EU:{API:"https://ams1.api-ingenico.com/client/v1",ASSETS:"https://assets.pay1.secured-by-ingenico.com"},US:{API:"https://us.api-ingenico.com/client/v1",ASSETS:"https://assets.pay2.secured-by-ingenico.com"},AMS:{API:"https://ams2.api-ingenico.com/client/v1",ASSETS:"https://assets.pay3.secured-by-ingenico.com"},PAR:{API:"https://par.api-ingenico.com/client/v1",ASSETS:"https://assets.pay4.secured-by-ingenico.com"}},PREPROD:{EU:{API:"https://ams1.preprod.api-ingenico.com/client/v1",ASSETS:"https://assets.pay1.preprod.secured-by-ingenico.com"},US:{API:"https://us.preprod.api-ingenico.com/client/v1",ASSETS:"https://assets.pay2.preprod.secured-by-ingenico.com"},AMS:{API:"https://ams2.preprod.api-ingenico.com/client/v1",ASSETS:"https://assets.pay3.preprod.secured-by-ingenico.com"},PAR:{API:"https://par-preprod.api-ingenico.com/client/v1",ASSETS:"https://assets.pay4.preprod.secured-by-ingenico.com"}},SANDBOX:{EU:{API:"https://ams1.sandbox.api-ingenico.com/client/v1",ASSETS:"https://assets.pay1.sandbox.secured-by-ingenico.com"},US:{API:"https://us.sandbox.api-ingenico.com/client/v1",ASSETS:"https://assets.pay2.sandbox.secured-by-ingenico.com"},AMS:{API:"https://ams2.sandbox.api-ingenico.com/client/v1",ASSETS:"https://assets.pay3.sandbox.secured-by-ingenico.com"},PAR:{API:"https://par.sandbox.api-ingenico.com/client/v1",ASSETS:"https://assets.pay4.sandbox.secured-by-ingenico.com"}},INTEGRATION:{EU:{API:"https://int-test-api.gcsip.nl:4443/client/v1",ASSETS:"https://assets.int-test-rpp.gcsip.nl:4443"},US:{API:"https://int-test-api.gcsip.nl:4443/client/v1",ASSETS:"https://assets.int-test-rpp.gcsip.nl:4443"},AMS:{API:"https://int-test-api.gcsip.nl:4443/client/v1",ASSETS:"https://assets.int-test-rpp.gcsip.nl:4443"},PAR:{API:"https://int-test-api.gcsip.nl:4443/client/v1",ASSETS:"https://assets.int-test-rpp.gcsip.nl:4443"}},DEV_NAMI:{EU:{API:"https://nami-test-api.gcsip.nl:4443/client/v1",ASSETS:"https://assets.nami-test-rpp.gcsip.nl:4443"},US:{API:"https://nami-test-api.gcsip.nl:4443/client/v1",ASSETS:"https://assets.nami-test-rpp.gcsip.nl:4443"},AMS:{API:"https://nami-test-api.gcsip.nl:4443/client/v1",ASSETS:"https://assets.nami-test-rpp.gcsip.nl:4443"},PAR:{API:"https://nami-test-api.gcsip.nl:4443/client/v1",ASSETS:"https://assets.nami-test-rpp.gcsip.nl:4443"}},DEV_ISC:{EU:{API:"//api.gc-dev.isaac.local/client/v1",ASSETS:"//rpp.gc-dev.isaac.local"},US:{API:"//api.gc-ci-dev.isaac.local/client/v1",ASSETS:"//rpp.gc-ci-dev.isaac.local"},AMS:{API:"//api.gc-dev.isaac.local/client/v1",ASSETS:"//rpp.gc-dev.isaac.local"},PAR:{API:"//api.gc-dev.isaac.local/client/v1",ASSETS:"//rpp.gc-dev.isaac.local"}}},t.clientSessionId){if(t.clientSessionID)throw new Error("You cannot use both the clientSessionId and the clientSessionID at the same time, please use the clientSessionId only.")}else t.clientSessionId=t.clientSessionID;if(t.assetUrl){if(t.assetsBaseUrl)throw new Error("You cannot use both the assetUrl and the assetsBaseUrl at the same time, please use the assetUrl only.")}else t.assetUrl=t.assetsBaseUrl;if(t.clientApiUrl){if(t.apiBaseUrl)throw new Error("You cannot use both the clientApiUrl and the apiBaseUrl at the same time, please use the clientApiUrl only.")}else t.clientApiUrl=t.apiBaseUrl;if(this.clientSessionId=t.clientSessionId,this.customerId=t.customerId,t.region&&!t.clientApiUrl)console.warn("Using regions is deprecated, switch to clientApiUrl"),this.clientApiUrl=this.endpoints[t.environment][t.region].API,this.assetUrl=this.endpoints[t.environment][t.region].ASSETS;else{if(this.clientApiUrl=t.clientApiUrl,this.assetUrl=t.assetUrl,!this.clientApiUrl)throw new Error("This version of the connectSDK requires an clientApiUrl, which you did not provide.");if(!this.assetUrl)throw new Error("This version of the connectSDK requires an assetUrl, which you did not provide.");if(-1===this.clientApiUrl.indexOf("//"))throw new Error("A valid URL is required for the clientApiUrl, you provided '"+this.clientApiUrl+"'");var n=this.clientApiUrl.split("/");if(""!==n[0]&&0!==n[0].indexOf("http"))throw new Error("A valid URL is required for the clientApiUrl, you provided '"+this.clientApiUrl+"'");var r=n.splice(3).join("/");if(r){if("client"===r)this.clientApiUrl+="/"+e.split("/")[1];else if(0!==r.indexOf(e)||r.length!==e.length)throw new Error("This version of the connectSDK is only compatible with "+e+", you supplied: '"+r+"'")}else this.clientApiUrl+="/"+e}};return t.C2SCommunicatorConfiguration=e,e}),define("connectsdk.IinDetailsResponse",["connectsdk.core","connectsdk.promise"],function(t,e){var n=function(){this.status="",this.countryCode="",this.paymentProductId="",this.isAllowedInContext="",this.coBrands=[]};return t.IinDetailsResponse=n,n}),define("connectsdk.C2SCommunicator",["connectsdk.core","connectsdk.promise","connectsdk.net","connectsdk.Util","connectsdk.PublicKeyResponse","connectsdk.PaymentProductPublicKeyResponse","connectsdk.IinDetailsResponse","connectsdk.AndroidPay"],function(t,e,n,r,i,o,s,a){var u=function(t,u){var c=t,l=r.getInstance(),h={},d=u,f=this,p=new a(f),y={expirydate:"tel",string:"text",numericstring:"tel",integer:"number",expirationDate:"tel"},g=function(t){return t&&m(t,"/")?t:t+"/"},m=function(t,e){return-1!==t.indexOf(e,t.length-e.length)},v=function(t,e){for(var n=0,r=t.fields.length;n<r;n++){var i=t.fields[n];i.type=i.displayHints.obfuscate?"password":y[i.type];for(validatorKey in i.dataRestrictions.validators)i.validators=i.validators||[],i.validators.push(validatorKey);i.displayHints.formElement&&"list"===i.displayHints.formElement.type&&(i.displayHints.formElement.list=!0),i.displayHints.tooltip&&i.displayHints.tooltip.image&&(i.displayHints.tooltip.image=g(e)+i.displayHints.tooltip.image)}return t.fields.sort(function(t,e){return t.displayHints.displayOrder<e.displayHints.displayOrder?-1:1}),t.displayHints.logo=g(e)+t.displayHints.logo,t},S=function(t,e,n){for(var r=0,i=t["paymentProduct"+n].length;r<i;r++){var o=t["paymentProduct"+n][r];o.displayHints.logo=g(e)+o.displayHints.logo}return t["paymentProduct"+n].sort(function(t,e){return t.displayHints.displayOrder<e.displayHints.displayOrder?-1:1}),t},b=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r&&r.id===e)return!0}return!1},B=l.getMetadata();this.getBasicPaymentProducts=function(t,r){var i=t.locale?t.locale+"_":"",r=r||{},o=new e,s=(new Date).getTime(),a="getPaymentProducts-"+t.totalAmount+"_"+t.countryCode+"_"+i+t.isRecurring+"_"+t.currency+"_"+JSON.stringify(r);if(h[a])setTimeout(function(){o.resolve(h[a])},0);else{var u=t.locale?"&locale="+t.locale:"";n.get(g(c.clientApiUrl)+c.customerId+"/products?countryCode="+t.countryCode+"&isRecurring="+t.isRecurring+"&amount="+t.totalAmount+"&currencyCode="+t.currency+"&hide=fields"+u+"&cacheBust="+s).set("X-GCS-ClientMetaInfo",l.base64Encode(B)).set("Authorization","GCS v1Client:"+c.clientSessionId).end(function(e){if(e.success){var n=S(e.responseJSON,c.assetUrl,"s");b(n.paymentProducts,l.androidPayPaymentProductId)?p.isMerchantIdProvided(r)?p.isAndroidPayAvailable(t,r).then(function(t){l.filterOutProductsThatAreNotSupportedInThisBrowser(n),0===n.paymentProducts.length&&o.reject("No payment products available"),h[a]=n,o.resolve(n)},function(){l.filterOutProductsThatAreNotSupportedInThisBrowser(n),0===n.paymentProducts.length&&o.reject("No payment products available"),h[a]=n,o.resolve(n)}):(l.filterOutProductsThatAreNotSupportedInThisBrowser(n),console.warn("You have not provided a merchantId for Android Pay, you can set this in the paymentProductSpecificInputs object"),o.resolve(n)):(l.filterOutProductsThatAreNotSupportedInThisBrowser(n),0===n.paymentProducts.length&&o.reject("No payment products available"),h[a]=n,o.resolve(n))}else o.reject("failed to retrieve Basic Payment Products",e)})}return o},this.getBasicPaymentProductGroups=function(t){var r=t.locale?t.locale+"_":"",i=new e,o=(new Date).getTime(),s="getPaymentProductGroups-"+t.totalAmount+"_"+t.countryCode+"_"+r+t.isRecurring+"_"+t.currency;if(h[s])setTimeout(function(){i.resolve(h[s])},0);else{var a=t.locale?"&locale="+t.locale:"";n.get(g(c.clientApiUrl)+c.customerId+"/productgroups?countryCode="+t.countryCode+"&isRecurring="+t.isRecurring+"&amount="+t.totalAmount+"&currencyCode="+t.currency+"&hide=fields"+a+"&cacheBust="+o).set("X-GCS-ClientMetaInfo",l.base64Encode(B)).set("Authorization","GCS v1Client:"+c.clientSessionId).end(function(t){if(t.success){var e=S(t.responseJSON,c.assetUrl,"Groups");h[s]=e,i.resolve(e)}else i.reject()})}return i},this.getPaymentProduct=function(r,i,o){var o=o||{},s=i.locale?i.locale+"_":"",a=new e,u=(new Date).getTime(),f="getPaymentProduct-"+r+"_"+i.totalAmount+"_"+i.countryCode+"_"+s+i.isRecurring+"_"+i.currency+"_"+JSON.stringify(o);if(l.paymentProductsThatAreNotSupportedInThisBrowser.indexOf(r)>-1)setTimeout(function(){a.reject({errorId:"48b78d2d-1b35-4f8b-92cb-57cc2638e901",errors:[{code:"1007",propertyName:"productId",message:"UNKNOWN_PRODUCT_ID",httpStatusCode:404}]})},0);else if(d&&d.id===r)if(h[f])setTimeout(function(){a.resolve(h[f])},0);else{var y=v(d,c.assetUrl);h[f]=y,setTimeout(function(){a.resolve(h[f])},0)}else if(h[f])setTimeout(function(){a.resolve(h[f])},0);else{var m=i.locale?"&locale="+i.locale:"",S=g(c.clientApiUrl)+c.customerId+"/products/"+r+"?countryCode="+i.countryCode+"&isRecurring="+i.isRecurring+"&amount="+i.totalAmount+"&currencyCode="+i.currency+m;r===l.bancontactPaymentProductId&&o&&o.bancontact&&o.bancontact.forceBasicFlow&&(S+="&forceBasicFlow="+o.bancontact.forceBasicFlow),S+="&cacheBust="+u,n.get(S).set("X-GCS-ClientMetaInfo",l.base64Encode(B)).set("Authorization","GCS v1Client:"+c.clientSessionId).end(function(e){if(e.success){var n=v(e.responseJSON,t.assetUrl);r===l.androidPayPaymentProductId?p.isMerchantIdProvided(o)?p.isAndroidPayAvailable(i,o).then(function(t){t?(h[f]=n,a.resolve(n)):(h[f]=n,a.reject(n))},function(){h[f]=n,a.reject(n)}):(h[f]=n,a.reject(n)):(h[f]=n,a.resolve(n))}else a.reject("failed to retrieve Payment Product",e)})}return a},this.getPaymentProductGroup=function(r,i){var o=i.locale?i.locale+"_":"",s=new e,a=(new Date).getTime(),u="getPaymentProductGroup-"+r+"_"+i.totalAmount+"_"+i.countryCode+"_"+o+i.isRecurring+"_"+i.currency;if(d&&d.id===r)if(h[u])setTimeout(function(){s.resolve(h[u])},0);else{var f=v(d,c.assetUrl);h[u]=f,setTimeout(function(){s.resolve(h[u])},0)}else if(h[u])setTimeout(function(){s.resolve(h[u])},0);else{var p=i.locale?"&locale="+i.locale:"";n.get(g(c.clientApiUrl)+c.customerId+"/productgroups/"+r+"?countryCode="+i.countryCode+"&isRecurring="+i.isRecurring+"&amount="+i.totalAmount+"&currencyCode="+i.currency+p+"&cacheBust="+a).set("X-GCS-ClientMetaInfo",l.base64Encode(B)).set("Authorization","GCS v1Client:"+c.clientSessionId).end(function(e){if(e.success){var n=v(e.responseJSON,t.assetUrl);h[u]=n,s.resolve(n)}else s.reject()})}return s},this.getPaymentProductIdByCreditCardNumber=function(t,r){var i=new e,o=new s,a="getPaymentProductIdByCreditCardNumber-"+t,u=this;if(this.context=r,h[a])setTimeout(function(){i.resolve(h[a])},0);else{!function(t){return!(t.length<6)}(t)?(o.status="NOT_ENOUGH_DIGITS",setTimeout(function(){i.resolve(o)},0)):n.post(g(c.clientApiUrl)+c.customerId+"/services/getIINdetails").data(JSON.stringify(this.convertContextToIinDetailsContext(t,this.context))).set("X-GCS-ClientMetaInfo",l.base64Encode(B)).set("Authorization","GCS v1Client:"+c.clientSessionId).end(function(t){t.success?(o.json=t.responseJSON,o.countryCode=t.responseJSON.countryCode,o.paymentProductId=t.responseJSON.paymentProductId,o.isAllowedInContext=t.responseJSON.isAllowedInContext,o.coBrands=t.responseJSON.coBrands,t.responseJSON.hasOwnProperty("isAllowedInContext")?(o.status="SUPPORTED",!1===o.isAllowedInContext&&(o.status="EXISTING_BUT_NOT_ALLOWED"),h[a]=o,i.resolve(o)):u.getPaymentProduct(o.paymentProductId,u.context).then(function(t){o.status=t?"SUPPORTED":"UNSUPPORTED",h[a]=o,i.resolve(o)},function(){o.status="UNKNOWN",i.reject(o)})):(o.status="UNKNOWN",i.reject(o))})}return i},this.convertContextToIinDetailsContext=function(t,e){return{bin:t,paymentContext:{countryCode:e.countryCode,isRecurring:e.isRecurring,amountOfMoney:{amount:e.totalAmount,currencyCode:e.currency}}}},this.getPublicKey=function(){var t=new e;return h.publicKey?setTimeout(function(){t.resolve(h.publicKey)},0):n.get(g(c.clientApiUrl)+c.customerId+"/crypto/publickey").set("X-GCS-ClientMetaInfo",l.base64Encode(B)).set("Authorization","GCS v1Client:"+c.clientSessionId).end(function(e){if(e.success){var n=new i(e.responseJSON);h.publicKey=n,t.resolve(n)}else t.reject("unable to get public key")}),t},this.getPaymentProductPublicKey=function(t){var r=new e,i="paymentProductPublicKey";return h[i]?setTimeout(function(){r.resolve(h[i])},0):n.get(g(c.clientApiUrl)+c.customerId+"/products/"+t+"/publicKey").set("X-GCS-ClientMetaInfo",l.base64Encode(B)).set("Authorization","GCS v1Client:"+c.clientSessionId).end(function(t){if(t.success){var e=new o(t.responseJSON);h[i]=e,r.resolve(e)}else r.reject("unable to get payment product public key")}),r},this.getPaymentProductNetworks=function(t,r){var i=new e,o="paymentProductNetworks-"+t+"_"+r.countryCode+"_"+r.currency+"_"+r.totalAmount+"_"+r.isRecurring;return h[o]?setTimeout(function(){i.resolve(h[o])},0):n.get(g(c.clientApiUrl)+c.customerId+"/products/"+t+"/networks?countryCode="+r.countryCode+"&currencyCode="+r.currency+"&amount="+r.totalAmount+"&isRecurring="+r.isRecurring).set("X-GCS-ClientMetaInfo",l.base64Encode(B)).set("Authorization","GCS v1Client:"+c.clientSessionId).end(function(t){t.success?(h[o]=t.responseJSON,i.resolve(t.responseJSON)):i.reject()}),i},this.getPaymentProductDirectory=function(t,r,i){var o=new e,s="getPaymentProductDirectory-"+t+"_"+r+"_"+i;return h[s]?setTimeout(function(){o.resolve(h[s])},0):n.get(g(c.clientApiUrl)+c.customerId+"/products/"+t+"/directory?countryCode="+i+"&currencyCode="+r).set("X-GCS-ClientMetaInfo",l.base64Encode(B)).set("Authorization","GCS v1Client:"+c.clientSessionId).end(function(t){t.success?(h[s]=t.responseJSON,o.resolve(t.responseJSON)):o.reject("unable to retrieve payment product directory")}),o},this.convertAmount=function(t,r,i){var o=new e,s="convertAmount-"+t+"_"+r+"_"+i;return h[s]?setTimeout(function(){o.resolve(h[s])},0):n.get(g(c.clientApiUrl)+c.customerId+"/services/convert/amount?source="+r+"&target="+i+"&amount="+t).set("X-GCS-ClientMetaInfo",l.base64Encode(B)).set("Authorization","GCS v1Client:"+c.clientSessionId).end(function(t){t.success?(h[s]=t.responseJSON,o.resolve(t.responseJSON)):o.reject("unable to convert amount")}),o},this.getThirdPartyPaymentStatus=function(t){var r=new e;return n.get(g(c.clientApiUrl)+c.customerId+"/payments/"+t+"/thirdpartystatus").set("X-GCS-ClientMetaInfo",l.base64Encode(B)).set("Authorization","GCS v1Client:"+c.clientSessionId).end(function(t){t.success?r.resolve(t.responseJSON):r.reject("unable to retrieve third party status")}),r},this.getCustomerDetails=function(t,r){var i=new e,o="getCustomerDetails_"+r.countryCode;return o=A(o,r.values),h[o]?setTimeout(function(){i.resolve(h[o])},0):n.post(g(c.clientApiUrl)+c.customerId+"/products/"+t+"/customerDetails").data(JSON.stringify(r)).set("X-GCS-ClientMetaInfo",l.base64Encode(B)).set("Authorization","GCS v1Client:"+c.clientSessionId).end(function(t){t.success?(h[o]=t.responseJSON,i.resolve(t.responseJSON)):i.reject(t.responseJSON)}),i};var A=function(t,e){var n=t;for(var r in e)e.hasOwnProperty(r)&&(n+="_"+e[r].key+"_"+e[r].value);return n}};return t.C2SCommunicator=u,u}),define("connectsdk.LabelTemplateElement",["connectsdk.core"],function(t){var e=function(t){this.json=t,this.attributeKey=t.attributeKey,this.mask=t.mask,this.wildcardMask=t.mask?t.mask.replace(/9/g,"*"):""};return t.LabelTemplateElement=e,e}),define("connectsdk.Attribute",["connectsdk.core"],function(t){var e=function(t){this.json=t,this.key=t.key,this.value=t.value,this.status=t.status,this.mustWriteReason=t.mustWriteReason};return t.Attribute=e,e}),define("connectsdk.AccountOnFileDisplayHints",["connectsdk.core","connectsdk.LabelTemplateElement"],function(t,e){var n=function(t,n,r){if(t.labelTemplate)for(var i=0,o=t.labelTemplate.length;i<o;i++){var s=new e(t.labelTemplate[i]);n.push(s),r[s.attributeKey]=s}},r=function(t){this.json=t,this.labelTemplate=[],this.labelTemplateElementByAttributeKey={},n(t,this.labelTemplate,this.labelTemplateElementByAttributeKey)};return t.AccountOnFileDisplayHints=r,r}),define("connectsdk.AccountOnFile",["connectsdk.core","connectsdk.AccountOnFileDisplayHints","connectsdk.Attribute"],function(t,e,n){var r=function(t,e,r){if(t.attributes)for(var i=0,o=t.attributes.length;i<o;i++){var s=new n(t.attributes[i]);e.push(s),r[s.key]=s}},i=function(n){this.json=n,this.attributes=[],this.attributeByKey={},this.displayHints=new e(n.displayHints),this.id=n.id,this.paymentProductId=n.paymentProductId,this.getMaskedValueByAttributeKey=function(e){var n,r=this.attributeByKey[e].value;try{n=this.displayHints.labelTemplateElementByAttributeKey[e].wildcardMask}catch(t){}if(void 0!==r&&void 0!==n){return(new t.MaskingUtil).applyMask(n,r)}},r(n,this.attributes,this.attributeByKey)};return t.AccountOnFile=i,i}),define("connectsdk.PaymentProductDisplayHints",["connectsdk.core"],function(t){var e=function(t){this.json=t,this.displayOrder=t.displayOrder,this.label=t.label,this.logo=t.logo};return t.PaymentProductDisplayHints=e,e}),define("connectsdk.BasicPaymentProduct",["connectsdk.core","connectsdk.AccountOnFile","connectsdk.PaymentProductDisplayHints"],function(t,e,n){var r=function(t,n,r){if(t.accountsOnFile)for(var i=0,o=t.accountsOnFile.length;i<o;i++){var s=new e(t.accountsOnFile[i]);n.push(s),r[s.id]=s}},i=function(t){this.json=t,this.json.type="product",this.accountsOnFile=[],this.accountOnFileById={},this.allowsRecurring=t.allowsRecurring,this.allowsTokenization=t.allowsTokenization,this.autoTokenized=t.autoTokenized,this.displayHints=new n(t.displayHints),this.id=t.id,this.maxAmount=t.maxAmount,this.minAmount=t.minAmount,this.paymentMethod=t.paymentMethod,this.mobileIntegrationLevel=t.mobileIntegrationLevel,this.usesRedirectionTo3rdParty=t.usesRedirectionTo3rdParty,this.paymentProductGroup=t.paymentProductGroup,r(t,this.accountsOnFile,this.accountOnFileById)};return t.BasicPaymentProduct=i,i}),define("connectsdk.BasicPaymentProductGroup",["connectsdk.core","connectsdk.AccountOnFile","connectsdk.PaymentProductDisplayHints"],function(t,e,n){var r=function(t,n,r){if(t.accountsOnFile)for(var i=0,o=t.accountsOnFile.length;i<o;i++){var s=new e(t.accountsOnFile[i]);n.push(s),r[s.id]=s}},i=function(t){this.json=t,this.json.type="group",this.id=t.id,this.displayHints=new n(t.displayHints),this.accountsOnFile=[],this.accountOnFileById={},r(t,this.accountsOnFile,this.accountOnFileById)};return t.BasicPaymentProductGroup=i,i}),define("connectsdk.MaskedString",["connectsdk.core"],function(t){var e=function(t,e){this.formattedValue=t,this.cursorIndex=e};return t.MaskedString=e,e}),define("connectsdk.MaskingUtil",["connectsdk.core","connectsdk.MaskedString"],function(t,e){var n=function(t,e,r,i,o){t+e<o.length&&t<i.length&&("9"===i[t]&&Number(o[t+e])>-1&&" "!==o[t+e]||"*"===i[t]?r.push(o[t+e]):o[t+e]===i[t]?r.push(o[t+e]):"9"!==i[t]&&"*"!==i[t]?(r.push(i[t]),e--):(o.splice(t+e,1),t--),n(t+1,e,r,i,o))},r=function(){this.applyMask=function(t,r,i){var o=[],s=r.split("");if(t){for(var a=t.split(""),u=[],c=0,l=a.length;c<l;c++){var h=a[c];"{"===h||"}"===h||u.push(h)}n(0,0,o,u,s)}else for(var c=0,l=s.length;c<l;c++){var h=s[c];o.push(h)}r=o.join("");var d=1;if(i)for(var f=i.split(""),c=0,l=o.length;c<l;c++)if(o[c]!==f[c]){d=c+1;break}return r.substring(0,r.length-1)===i&&(d=r.length+1),new e(r,d)},this.getMaxLengthBasedOnMask=function(t){if(t){for(var e=t.split(""),n=-1,r=0,i=e.length;r<i;r++){n++;var o=e[r];"{"!==o&&"}"!==o||n--}return n}},this.removeMask=function(t,e){var n=[],r=e?e.split(""):[];if(t)for(var i=t.split(""),o=-1,s=!1,a=0,u=i.length;a<u;a++){o++;var c=i[a];"{"===c||"}"===c?(o--,"{"===c?s=!0:"}"===c&&(s=!1)):s&&r[o]&&n.push(r[o])}else for(var a=0,u=r.length;a<u;a++){var c=r[a];n.push(c)}return n.join("").trim()}};return t.MaskingUtil=r,r}),define("connectsdk.ValidationRuleLuhn",["connectsdk.core"],function(t){var e=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.validate=function(t){var e=[[0,2,4,6,8,1,3,5,7,9],[0,1,2,3,4,5,6,7,8,9]],n=0;return t.replace(/\D+/g,"").replace(/[\d]/g,function(t,r,i){n+=e[i.length-r&1][parseInt(t,10)]}),n%10==0&&n>0}};return t.ValidationRuleLuhn=e,e}),define("connectsdk.ValidationRuleExpirationDate",["connectsdk.core"],function(t){var e=function(t){return/\d{4}|\d{6}$/g.test(t)},n=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.validate=function(t){if(t=t.replace(/[^\d]/g,""),4===t.length)split=[t.substring(0,2),"20"+t.substring(2,4)];else{if(6!==t.length)return!1;split=[t.substring(0,2),t.substring(2,6)]}if(e(t)){var n=new Date((new Date).getFullYear(),(new Date).getMonth(),1),r=new Date(split[1],split[0]-1,1);return r.getMonth()===Number(split[0]-1)&&r.getFullYear()===Number(split[1])&&r>=n}return!1}};return t.ValidationRuleExpirationDate=n,n}),define("connectsdk.ValidationRuleFixedList",["connectsdk.core"],function(t){var e=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.allowedValues=t.attributes.allowedValues,
this.validate=function(t){for(var e=0,n=this.allowedValues.length;e<n;e++)if(this.allowedValues[e]===t)return!0;return!1}};return t.ValidationRuleFixedList=e,e}),define("connectsdk.ValidationRuleLength",["connectsdk.core"],function(t){var e=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.maxLength=t.attributes.maxLength,this.minLength=t.attributes.minLength,this.validate=function(t){return this.minLength<=t.length&&t.length<=this.maxLength}};return t.ValidationRuleLength=e,e}),define("connectsdk.ValidationRuleRange",["connectsdk.core"],function(t){var e=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.maxValue=t.attributes.maxValue,this.minValue=t.attributes.minValue,this.validate=function(t){return!isNaN(t)&&(t=Number(t),this.minValue<=t&&t<=this.maxValue)}};return t.ValidationRuleRange=e,e}),define("connectsdk.ValidationRuleRegularExpression",["connectsdk.core"],function(t){var e=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.regularExpression=t.attributes.regularExpression,this.validate=function(t){return new RegExp(this.regularExpression).test(t)}};return t.ValidationRuleRegularExpression=e,e}),define("connectsdk.ValidationRuleEmailAddress",["connectsdk.core"],function(t){var e=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.validate=function(t){return new RegExp(/^[^@\.]+(\.[^@\.]+)*@([^@\.]+\.)*[^@\.]+\.[^@\.][^@\.]+$/i).test(t)}};return t.ValidationRuleEmailAddress=e,e}),define("connectsdk.ValidationRuleTermsAndConditions",["connectsdk.core"],function(t){var e=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.validate=function(t){return!0===t||"true"===t}};return t.ValidationRuleTermsAndConditions=e,e}),define("connectsdk.ValidationRuleBoletoBancarioRequiredness",["connectsdk.core"],function(t){var e=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.fiscalNumberLength=t.attributes.fiscalNumberLength,this.validate=function(t,e){return e.length===this.fiscalNumberLength&&t.length>0||e.length!==this.fiscalNumberLength}};return t.ValidationRuleBoletoBancarioRequiredness=e,e}),define("connectsdk.ValidationRuleIban",["connectsdk.core"],function(t){var e=function(t){return t.replace(/[^\d\w]+/g,"").toUpperCase()},n=function(t){return"string"==typeof t&&/^[A-Z]{2}[0-9]{2}[A-Z0-9]{4}[0-9]{7}([A-Z0-9]?){0,16}$/.test(e(t))},r=function(t){return e(t).replace(/(^.{4})(.*)/,"$2$1").replace(/[A-Z]/g,function(t){return t.charCodeAt(0)-55})},i=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.validate=function(t){if(!n(t))return!1;for(var e,i=r(t);i.length>2;)e=i.slice(0,9),i=parseInt(e,10)%97+i.slice(e.length);return parseInt(i,10)%97==1}};return t.ValidationRuleIban=i,i}),define("connectsdk.ValidationRuleFactory",["connectsdk.core","connectsdk.ValidationRuleEmailAddress","connectsdk.ValidationRuleTermsAndConditions","connectsdk.ValidationRuleExpirationDate","connectsdk.ValidationRuleFixedList","connectsdk.ValidationRuleLength","connectsdk.ValidationRuleLuhn","connectsdk.ValidationRuleRange","connectsdk.ValidationRuleRegularExpression","connectsdk.ValidationRuleBoletoBancarioRequiredness","connectsdk.ValidationRuleIban"],function(connectsdk,ValidationRuleEmailAddress,ValidationRuleTermsAndConditions,ValidationRuleExpirationDate,ValidationRuleFixedList,ValidationRuleLength,ValidationRuleLuhn,ValidationRuleRange,ValidationRuleRegularExpression,ValidationRuleBoletoBancarioRequiredness,ValidationRuleIban){var ValidationRuleFactory=function(){this.makeValidator=function(json){try{var classType=json.type.charAt(0).toUpperCase()+json.type.slice(1),className=eval("ValidationRule"+classType);return new className(json)}catch(t){console.warn("no validator for ",classType)}return null}};return connectsdk.ValidationRuleFactory=ValidationRuleFactory,ValidationRuleFactory}),define("connectsdk.DataRestrictions",["connectsdk.core","connectsdk.ValidationRuleExpirationDate","connectsdk.ValidationRuleFixedList","connectsdk.ValidationRuleLength","connectsdk.ValidationRuleLuhn","connectsdk.ValidationRuleRange","connectsdk.ValidationRuleRegularExpression","connectsdk.ValidationRuleEmailAddress","connectsdk.ValidationRuleTermsAndConditions","connectsdk.ValidationRuleIban","connectsdk.ValidationRuleFactory"],function(t,e,n,r,i,o,s,a,u,c,l){var h=function(t,e){this.json=t,this.isRequired=t.isRequired,this.validationRules=[],this.validationRuleByType={},function(t,e,n){var r=new l;if(t.validators)for(var i in t.validators){var o=r.makeValidator({type:i,attributes:t.validators[i]});o&&(e.push(o),n[o.type]=o)}}(t,this.validationRules,this.validationRuleByType)};return t.DataRestrictions=h,h}),define("connectsdk.ValueMappingElement",["connectsdk.core"],function(t){var e=function(t){this.json=t,this.displayName=t.displayName,this.value=t.value};return t.ValueMappingElement=e,e}),define("connectsdk.FormElement",["connectsdk.core","connectsdk.ValueMappingElement"],function(t,e){var n=function(t){this.json=t,this.type=t.type,this.valueMapping=[],function(t,n){if(t.valueMapping)for(var r=0,i=t.valueMapping.length;r<i;r++)n.push(new e(t.valueMapping[r]))}(t,this.valueMapping)};return t.FormElement=n,n}),define("connectsdk.Tooltip",["connectsdk.core"],function(t){var e=function(t){this.json=t,this.image=t.image,this.label=t.label};return t.Tooltip=e,e}),define("connectsdk.PaymentProductFieldDisplayHints",["connectsdk.core","connectsdk.Tooltip","connectsdk.FormElement"],function(t,e,n){var r=function(t){this.json=t,this.displayOrder=t.displayOrder,t.formElement&&(this.formElement=new n(t.formElement)),this.label=t.label,this.mask=t.mask,this.obfuscate=t.obfuscate,this.placeholderLabel=t.placeholderLabel,this.preferredInputType=t.preferredInputType,this.tooltip=t.tooltip?new e(t.tooltip):void 0,this.alwaysShow=t.alwaysShow,this.wildcardMask=t.mask?t.mask.replace(/9/g,"*"):""};return t.PaymentProductFieldDisplayHints=r,r}),define("connectsdk.PaymentProductField",["connectsdk.core","connectsdk.PaymentProductFieldDisplayHints","connectsdk.DataRestrictions","connectsdk.MaskingUtil"],function(t,e,n,r){var i=function(t){this.json=t,this.displayHints=new e(t.displayHints),this.dataRestrictions=new n(t.dataRestrictions,this.displayHints.mask),this.id=t.id,this.type=t.type;var i=[];this.getErrorCodes=function(t){return t&&(i=[],this.isValid(t)),i},this.isValid=function(t){var e=this.dataRestrictions.validationRules,n=!1;t=this.removeMask(t);for(var r=0,o=e.length;r<o;r++){var s=e[r];s.validate(t)||(n=!0,i.push(s.errorMessageId))}return!n},this.applyMask=function(t,e){return(new r).applyMask(this.displayHints.mask,t,e)},this.applyWildcardMask=function(t,e){return(new r).applyMask(this.displayHints.wildcardMask,t,e)},this.removeMask=function(t){return(new r).removeMask(this.displayHints.mask,t)}};return t.PaymentProductField=i,i}),define("connectsdk.PaymentProduct",["connectsdk.core","connectsdk.BasicPaymentProduct","connectsdk.PaymentProductField"],function(t,e,n){var r=function(t,e,r){if(t.fields)for(var i=0,o=t.fields.length;i<o;i++){var s=new n(t.fields[i]);e.push(s),r[s.id]=s}},i=function(t){var n=new e(t);return n.json=t,n.paymentProductFields=[],n.paymentProductFieldById={},r(n.json,n.paymentProductFields,n.paymentProductFieldById),n};return t.PaymentProduct=i,i}),define("connectsdk.PaymentProductGroup",["connectsdk.core","connectsdk.BasicPaymentProduct","connectsdk.PaymentProductField"],function(t,e,n){var r=function(t,e,r){if(t.fields)for(var i=0,o=t.fields.length;i<o;i++){var s=new n(t.fields[i]);e.push(s),r[s.id]=s}},i=function(t){var n=new e(t);return n.json=t,n.json.type="group",n.paymentProductFields=[],n.paymentProductFieldById={},r(n.json,n.paymentProductFields,n.paymentProductFieldById),n};return t.PaymentProductGroup=i,i}),define("connectsdk.BasicPaymentProducts",["connectsdk.core","connectsdk.BasicPaymentProduct"],function(t,e){var n=function(t,n,r,i,o,s){if(t.paymentProducts)for(var a=0,u=t.paymentProducts.length;a<u;a++){var c=new e(t.paymentProducts[a]);if(n.push(c),i[c.id]=c,c.accountsOnFile)for(var l=c.accountsOnFile,h=0,d=l.length;h<d;h++){var f=l[h];r.push(f),o[f.id]=f,s[f.id]=c}}},r=function(t){this.basicPaymentProducts=[],this.basicPaymentProductById={},this.basicPaymentProductByAccountOnFileId={},this.accountsOnFile=[],this.accountOnFileById={},this.json=t,n(t,this.basicPaymentProducts,this.accountsOnFile,this.basicPaymentProductById,this.accountOnFileById,this.basicPaymentProductByAccountOnFileId)};return t.BasicPaymentProducts=r,r}),define("connectsdk.BasicPaymentProductGroups",["connectsdk.core","connectsdk.BasicPaymentProductGroup"],function(t,e){var n=function(t,n,r,i,o){if(t.paymentProductGroups)for(var s=0,a=t.paymentProductGroups.length;s<a;s++){var u=new e(t.paymentProductGroups[s]);if(n.push(u),i[u.id]=u,u.accountsOnFile)for(var c=u.accountsOnFile,l=0,h=c.length;l<h;l++){var d=c[l];r.push(d),o[d.id]=d}}},r=function(t){this.basicPaymentProductGroups=[],this.basicPaymentProductGroupById={},this.accountsOnFile=[],this.accountOnFileById={},this.json=t,n(t,this.basicPaymentProductGroups,this.accountsOnFile,this.basicPaymentProductGroupById,this.accountOnFileById)};return t.BasicPaymentProductGroups=r,r}),define("connectsdk.BasicPaymentItems",["connectsdk.core"],function(t){"use strict";var e=function(t,e,n){var r=[];if(e){for(var i=0,o=e.basicPaymentProductGroups.length;i<o;i++)for(var s=e.basicPaymentProductGroups[i].id,a=!1,u=0,c=t.basicPaymentProducts.length;u<c;u++){var l=t.basicPaymentProducts[u].paymentProductGroup;l===s&&!1===a?(t.basicPaymentProducts.splice(u,1,e.basicPaymentProductGroups[i]),a=!0):l===s&&!0===a&&r.push(u)}for(var i=r.length-1,o=0;i>=o;i--)t.basicPaymentProducts.splice(r[i],1)}n.basicPaymentItems=JSON.parse(JSON.stringify(t.basicPaymentProducts));for(var i=0,o=n.basicPaymentItems.length;i<o;i++){var h=n.basicPaymentItems[i];if(n.basicPaymentItemById[h.id]=h,h.accountsOnFile)for(var d=h.accountsOnFile,u=0,c=d.length;u<c;u++){var f=d[u];n.accountsOnFile.push(f),n.accountOnFileById[f.id]=f}}},n=function(t,n){this.basicPaymentItems=[],this.basicPaymentItemById={},this.accountsOnFile=[],this.accountOnFileById={},e(t,n,this)};return t.BasicPaymentItems=n,n}),define("connectsdk.PaymentRequest",["connectsdk.core"],function(t){var e=function(t){var e={},n=null,r=null,i=!1;this.isValid=function(){var t=this.getErrorMessageIds(),e=this.getPaymentProduct();if(!e)return!1;for(var n=!0,r=0;r<e.paymentProductFields.length;r++){var i=e.paymentProductFields[r];if(i.dataRestrictions.isRequired){this.getValue(i.id)||this.getAccountOnFile()||(n=!1)}}return 0===t.length&&n},this.setValue=function(t,n){e[t]=n},this.setTokenize=function(t){i=t},this.getTokenize=function(){return i},this.getErrorMessageIds=function(){var t=[];for(key in e){var r=n.paymentProductFieldById[key];r&&(t=t.concat(r.getErrorCodes(e[key])))}return t},this.getValue=function(t){return e[t]},this.getValues=function(){return e},this.getMaskedValue=function(t){return n.paymentProductFieldById[t].applyMask(this.getValue(t)).formattedValue()},this.getMaskedValues=function(){var t=e,r=[];for(var i in t){var o=n.paymentProductFieldById[i],s=o.applyMask(this.getValue(i));r[i]=s.formattedValue}return r},this.getUnmaskedValues=function(){var t=e,r=[];for(var i in t){var o=n.paymentProductFieldById[i];if(o){var s=o.applyMask(this.getValue(i)),a=s.formattedValue;r[i]=o.removeMask(a)}}return r},this.setPaymentProduct=function(t){"group"!==t.type&&(n=t)},this.getPaymentProduct=function(){return n},this.setAccountOnFile=function(t){for(var n=0,i=t.attributes.length;n<i;n++){var o=t.attributes[n];delete e[o.key]}r=t},this.getAccountOnFile=function(){return r},this.getClientSessionID=function(){return t}};return t.PaymentRequest=e,e}),define("connectsdk.C2SPaymentProductContext",["connectsdk.core"],function(t){var e=function(t){this.totalAmount=void 0===t.totalAmount?"":t.totalAmount,this.countryCode=t.countryCode,this.isRecurring=void 0===t.isRecurring?"":t.isRecurring,this.currency=t.currency,void 0!==t.locale&&(this.locale=t.locale)};return t.C2SPaymentProductContext=e,e}),define("connectsdk.JOSEEncryptor",["connectsdk.core"],function(t){var e=forge.pki,n=(forge.asn1,function(t){return t=forge.util.encode64(t),t=t.split("=")[0],t=t.replace(/\+/g,"-"),t=t.replace(/\//g,"_")}),r=function(t){var e={alg:"RSA-OAEP",enc:"A256CBC-HS512",kid:t};return JSON.stringify(e)},i=function(t){var n=forge.util.decode64(t),r=forge.util.createBuffer(n,"raw"),i=forge.asn1.fromDer(r);return e.publicKeyFromAsn1(i)},o=function(t,e){return e.encrypt(t,"RSA-OAEP")},s=function(t,e,n){var r=forge.cipher.createCipher("AES-CBC",e);return r.start({iv:n}),r.update(forge.util.createBuffer(t)),r.finish(),r.output.bytes()},a=function(t){var e=forge.util.createBuffer(t),n=8*e.length(),r=forge.util.createBuffer();return r.putInt32(0),r.putInt32(n),r.bytes()},u=function(t,e,n,r,i){var o=forge.util.createBuffer();o.putBytes(e),o.putBytes(n),o.putBytes(r),o.putBytes(i);var s=o.bytes(),a=forge.hmac.create();return a.start(forge.sha512.create(),t),a.update(s),a.digest().bytes()},c=function(){this.encrypt=function(t,e){var c=JSON.stringify(t),l=r(e.keyId),h=n(l),d=forge.random.getBytesSync(64),f=i(e.publicKey),p=o(d,f),y=n(p),g=d.substring(0,32),m=d.substring(32),v=forge.random.getBytesSync(16),S=n(v),b=s(c,m,v),B=n(b),A=a(h),I=u(g,h,v,b,A),C=I.substring(0,I.length/2);return h+"."+y+"."+S+"."+B+"."+n(C)}};return t.JOSEEncryptor=c,c}),define("connectsdk.Encryptor",["connectsdk.core","connectsdk.promise","connectsdk.JOSEEncryptor"],function(t,e,n){var r=function(t){this.encrypt=function(r){var i=new e,o="";return t.then(function(t){if(r.isValid()){var e={clientSessionId:r.getClientSessionID(),nonce:forge.util.bytesToHex(forge.random.getBytesSync(16)),paymentProductId:r.getPaymentProduct().id,tokenize:r.getTokenize()};r.getAccountOnFile()&&(e.accountOnFileId=r.getAccountOnFile().id);for(var s=[],a=r.getUnmaskedValues(),u=Object.getOwnPropertyNames(a),c=0;c<u.length;c++){var l=u[c];"length"!==l&&s.push({key:l,value:a[l]})}e.paymentValues=s;var h=new n;o=h.encrypt(e,t),i.resolve(o)}else i.reject(r.getErrorMessageIds())},function(t){i.reject(t)}),i}};return t.Encryptor=r,r}),define("connectsdk.Session",["connectsdk.core","connectsdk.C2SCommunicator","connectsdk.C2SCommunicatorConfiguration","connectsdk.IinDetailsResponse","connectsdk.promise","connectsdk.C2SPaymentProductContext","connectsdk.BasicPaymentProducts","connectsdk.BasicPaymentProductGroups","connectsdk.PaymentProduct","connectsdk.PaymentProductGroup","connectsdk.BasicPaymentItems","connectsdk.PaymentRequest","connectsdk.Encryptor"],function(t,e,n,r,i,o,s,a,u,c,l,h,d){var f=function(t,r){var f,p,y,g,m,v,S=new n(t,"client/v1"),b=new e(S,r),B=this;this.clientApiUrl=S.clientApiUrl,this.assetUrl=S.assetUrl,this.getBasicPaymentProducts=function(t,e){var n=new i,r=new o(t);return b.getBasicPaymentProducts(r,e).then(function(e){y=t;var r=new s(e);n.resolve(r)},function(){n.reject()}),n},this.getBasicPaymentProductGroups=function(t){var e=new i,n=new o(t);return b.getBasicPaymentProductGroups(n).then(function(n){y=t;var r=new a(n);e.resolve(r)},function(){e.reject()}),e},this.getBasicPaymentItems=function(t,e,n){var r=new i;return e?B.getBasicPaymentProducts(t,n).then(function(e){B.getBasicPaymentProductGroups(t).then(function(t){var n=new l(e,t);r.resolve(n)},function(){r.reject()})},function(){r.reject()}):B.getBasicPaymentProducts(t,n).then(function(t){var e=new l(t,null);r.resolve(e)},function(){r.reject()}),r},this.getPaymentProduct=function(t,e,n){var r=new i;f=t;var s=new o(y||e);return b.getPaymentProduct(t,s,n).then(function(t){p=new u(t),r.resolve(p)},function(){p=null,r.reject()}),r},this.getPaymentProductGroup=function(t,e){var n=new i;m=t;var r=new o(y||e);return b.getPaymentProductGroup(t,r).then(function(t){v=new c(t),n.resolve(v)},function(){v=null,n.reject()}),n},this.getIinDetails=function(t,e){t=t.replace(/ /g,"").substring(0,6);var n=new o(y||e);return b.getPaymentProductIdByCreditCardNumber(t,n)},this.getPublicKey=function(){return b.getPublicKey()},this.getPaymentProductPublicKey=function(t){return b.getPaymentProductPublicKey(t)},this.getPaymentProductNetworks=function(t,e){var n=new i,r=new o(e);return b.getPaymentProductNetworks(t,r).then(function(t){y=e,n.resolve(t)},function(){n.reject()}),n},this.getPaymentProductDirectory=function(t,e,n){return b.getPaymentProductDirectory(t,e,n)},this.convertAmount=function(t,e,n){return b.convertAmount(t,e,n)},this.getPaymentRequest=function(){return g||(g=new h(S.clientSessionId)),g},this.getEncryptor=function(){var t=b.getPublicKey();return new d(t)},this.getThirdPartyPaymentStatus=function(t){var e=new i;return b.getThirdPartyPaymentStatus(t).then(function(t){e.resolve(t)},function(){e.reject()}),e},this.getCustomerDetails=function(t,e){return b.getCustomerDetails(t,e)}};return t.Session=f,f});
//# sourceMappingURL=connectsdk.min.js.map
