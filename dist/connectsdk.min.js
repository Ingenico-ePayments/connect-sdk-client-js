!function(){function t(t){function e(t){if(8!==t&&16!==t&&24!==t&&32!==t)throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}function n(t){if(this.data="",this.read=0,"string"==typeof t)this.data=t;else if(i.isArrayBuffer(t)||i.isArrayBufferView(t)){var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch(t){for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof n||"object"==typeof t&&"string"==typeof t.data&&"number"==typeof t.read)&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}function r(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var n=i.isArrayBuffer(t),r=i.isArrayBufferView(t);if(n||r)return this.data=n?new DataView(t):new DataView(t.buffer,t.byteOffset,t.byteLength),void(this.write="writeOffset"in e?e.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!==t&&void 0!==t&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}var i=t.util=t.util||{};!function(){function t(t){if(t.source===window&&t.data===e){t.stopPropagation();var r=n.slice();n.length=0,r.forEach(function(t){t()})}}if("undefined"!=typeof process&&process.nextTick)return i.nextTick=process.nextTick,void("function"==typeof setImmediate?i.setImmediate=setImmediate:i.setImmediate=i.nextTick);if("function"==typeof setImmediate)return i.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(i.nextTick=function(t){return setImmediate(t)});if(i.setImmediate=function(t){setTimeout(t,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var e="forge.setImmediate",n=[];i.setImmediate=function(t){n.push(t),1===n.length&&window.postMessage(e,"*")},window.addEventListener("message",t,!0)}if("undefined"!=typeof MutationObserver){var r=Date.now(),o=!0,a=document.createElement("div"),n=[];new MutationObserver(function(){var t=n.slice();n.length=0,t.forEach(function(t){t()})}).observe(a,{attributes:!0});var s=i.setImmediate;i.setImmediate=function(t){Date.now()-r>15?(r=Date.now(),s(t)):(n.push(t),1===n.length&&a.setAttribute("a",o=!o))}}i.nextTick=i.setImmediate}(),i.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},i.isArrayBuffer=function(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer},i.isArrayBufferView=function(t){return t&&i.isArrayBuffer(t.buffer)&&void 0!==t.byteLength},i.ByteBuffer=n,i.ByteStringBuffer=n;i.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},i.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},i.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},i.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))},i.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var n=this.data;e>0;)1&e&&(n+=t),(e>>>=1)>0&&(t+=t);return this.data=n,this._optimizeConstructedString(e),this},i.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this},i.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(i.encodeUtf8(t))},i.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},i.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},i.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},i.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255))},i.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))},i.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))},i.ByteStringBuffer.prototype.putInt=function(t,n){e(n);var r="";do{n-=8,r+=String.fromCharCode(t>>n&255)}while(n>0);return this.putBytes(r)},i.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)},i.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())},i.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},i.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t},i.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t},i.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t},i.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t},i.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t},i.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t},i.ByteStringBuffer.prototype.getInt=function(t){e(t);var n=0;do{n=(n<<8)+this.data.charCodeAt(this.read++),t-=8}while(t>0);return n},i.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),n=2<<t-2;return e>=n&&(e-=n<<1),e},i.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},i.ByteStringBuffer.prototype.bytes=function(t){return void 0===t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},i.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)},i.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this},i.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},i.ByteStringBuffer.prototype.copy=function(){var t=i.createBuffer(this.data);return t.read=this.read,t},i.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},i.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},i.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this},i.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var n=this.data.charCodeAt(e);n<16&&(t+="0"),t+=n.toString(16)}return t},i.ByteStringBuffer.prototype.toString=function(){return i.decodeUtf8(this.bytes())},i.DataBuffer=r,i.DataBuffer.prototype.length=function(){return this.write-this.read},i.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},i.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var n=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),r=new Uint8Array(this.length()+e);return r.set(n),this.data=new DataView(r.buffer),this},i.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this},i.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var n=0;n<e;++n)this.data.setUint8(t);return this},i.DataBuffer.prototype.putBytes=function(t,e){if(i.isArrayBufferView(t)){var n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),r=n.byteLength-n.byteOffset;this.accommodate(r);var o=new Uint8Array(this.data.buffer,this.write);return o.set(n),this.write+=r,this}if(i.isArrayBuffer(t)){var n=new Uint8Array(t);this.accommodate(n.byteLength);var o=new Uint8Array(this.data.buffer);return o.set(n,this.write),this.write+=n.byteLength,this}if(t instanceof i.DataBuffer||"object"==typeof t&&"number"==typeof t.read&&"number"==typeof t.write&&i.isArrayBufferView(t.data)){var n=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(n.byteLength);var o=new Uint8Array(t.data.byteLength,this.write);return o.set(n),this.write+=n.byteLength,this}if(t instanceof i.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary","string"==typeof t){var a;if("hex"===e)return this.accommodate(Math.ceil(t.length/2)),a=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.hex.decode(t,a,this.write),this;if("base64"===e)return this.accommodate(3*Math.ceil(t.length/4)),a=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.base64.decode(t,a,this.write),this;if("utf8"===e&&(t=i.encodeUtf8(t),e="binary"),"binary"===e||"raw"===e)return this.accommodate(t.length),a=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.raw.decode(a),this;if("utf16"===e)return this.accommodate(2*t.length),a=new Uint16Array(this.data.buffer,this.write),this.write+=i.text.utf16.encode(a),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)},i.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this},i.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")},i.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this},i.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this},i.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this},i.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this},i.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this},i.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this},i.DataBuffer.prototype.putInt=function(t,n){e(n),this.accommodate(n/8);do{n-=8,this.data.setInt8(this.write++,t>>n&255)}while(n>0);return this},i.DataBuffer.prototype.putSignedInt=function(t,n){return e(n),this.accommodate(n/8),t<0&&(t+=2<<n-1),this.putInt(t,n)},i.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},i.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t},i.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t},i.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t},i.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t},i.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t},i.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t},i.DataBuffer.prototype.getInt=function(t){e(t);var n=0;do{n=(n<<8)+this.data.getInt8(this.read++),t-=8}while(t>0);return n},i.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),n=2<<t-2;return e>=n&&(e-=n<<1),e},i.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},i.DataBuffer.prototype.bytes=function(t){return void 0===t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},i.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)},i.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this},i.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},i.DataBuffer.prototype.copy=function(){return new i.DataBuffer(this)},i.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this},i.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},i.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this},i.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var n=this.data.getUint8(e);n<16&&(t+="0"),t+=n.toString(16)}return t},i.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if("binary"===(t=t||"utf8")||"raw"===t)return i.binary.raw.encode(e);if("hex"===t)return i.binary.hex.encode(e);if("base64"===t)return i.binary.base64.encode(e);if("utf8"===t)return i.text.utf8.decode(e);if("utf16"===t)return i.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)},i.createBuffer=function(t,e){return e=e||"raw",void 0!==t&&"utf8"===e&&(t=i.encodeUtf8(t)),new i.ByteBuffer(t)},i.fillString=function(t,e){for(var n="";e>0;)1&e&&(n+=t),(e>>>=1)>0&&(t+=t);return n},i.xorBytes=function(t,e,n){for(var r="",i="",o="",a=0,s=0;n>0;--n,++a)i=t.charCodeAt(a)^e.charCodeAt(a),s>=10&&(r+=o,o="",s=0),o+=String.fromCharCode(i),++s;return r+=o},i.hexToBytes=function(t){var e="",n=0;for(!0&t.length&&(n=1,e+=String.fromCharCode(parseInt(t[0],16)));n<t.length;n+=2)e+=String.fromCharCode(parseInt(t.substr(n,2),16));return e},i.bytesToHex=function(t){return i.createBuffer(t).toHex()},i.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t)};var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];i.encode64=function(t,e){for(var n,r,i,a="",s="",u=0;u<t.length;)n=t.charCodeAt(u++),r=t.charCodeAt(u++),i=t.charCodeAt(u++),a+=o.charAt(n>>2),a+=o.charAt((3&n)<<4|r>>4),isNaN(r)?a+="==":(a+=o.charAt((15&r)<<2|i>>6),a+=isNaN(i)?"=":o.charAt(63&i)),e&&a.length>e&&(s+=a.substr(0,e)+"\r\n",a=a.substr(e));return s+=a},i.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e,n,r,i,o="",s=0;s<t.length;)e=a[t.charCodeAt(s++)-43],n=a[t.charCodeAt(s++)-43],r=a[t.charCodeAt(s++)-43],i=a[t.charCodeAt(s++)-43],o+=String.fromCharCode(e<<2|n>>4),64!==r&&(o+=String.fromCharCode((15&n)<<4|r>>2),64!==i&&(o+=String.fromCharCode((3&r)<<6|i)));return o},i.encodeUtf8=function(t){return unescape(encodeURIComponent(t))},i.decodeUtf8=function(t){return decodeURIComponent(escape(t))},i.binary={raw:{},hex:{},base64:{}},i.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)},i.binary.raw.decode=function(t,e,n){var r=e;r||(r=new Uint8Array(t.length)),n=n||0;for(var i=n,o=0;o<t.length;++o)r[i++]=t.charCodeAt(o);return e?i-n:r},i.binary.hex.encode=i.bytesToHex,i.binary.hex.decode=function(t,e,n){var r=e;r||(r=new Uint8Array(Math.ceil(t.length/2))),n=n||0;var i=0,o=n;for(1&t.length&&(i=1,r[o++]=parseInt(t[0],16));i<t.length;i+=2)r[o++]=parseInt(t.substr(i,2),16);return e?o-n:r},i.binary.base64.encode=function(t,e){for(var n,r,i,a="",s="",u=0;u<t.byteLength;)n=t[u++],r=t[u++],i=t[u++],a+=o.charAt(n>>2),a+=o.charAt((3&n)<<4|r>>4),isNaN(r)?a+="==":(a+=o.charAt((15&r)<<2|i>>6),a+=isNaN(i)?"=":o.charAt(63&i)),e&&a.length>e&&(s+=a.substr(0,e)+"\r\n",a=a.substr(e));return s+=a},i.binary.base64.decode=function(t,e,n){var r=e;r||(r=new Uint8Array(3*Math.ceil(t.length/4))),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),n=n||0;for(var i,o,s,u,c=0,l=n;c<t.length;)i=a[t.charCodeAt(c++)-43],o=a[t.charCodeAt(c++)-43],s=a[t.charCodeAt(c++)-43],u=a[t.charCodeAt(c++)-43],r[l++]=i<<2|o>>4,64!==s&&(r[l++]=(15&o)<<4|s>>2,64!==u&&(r[l++]=(3&s)<<6|u));return e?l-n:r.subarray(0,l)},i.text={utf8:{},utf16:{}},i.text.utf8.encode=function(t,e,n){t=i.encodeUtf8(t);var r=e;r||(r=new Uint8Array(t.length)),n=n||0;for(var o=n,a=0;a<t.length;++a)r[o++]=t.charCodeAt(a);return e?o-n:r},i.text.utf8.decode=function(t){return i.decodeUtf8(String.fromCharCode.apply(null,t))},i.text.utf16.encode=function(t,e,n){var r=e;r||(r=new Uint8Array(2*t.length));var i=new Uint16Array(r.buffer);n=n||0;for(var o=n,a=n,s=0;s<t.length;++s)i[a++]=t.charCodeAt(s),o+=2;return e?o-n:r},i.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))},i.deflate=function(t,e,n){if(e=i.decode64(t.deflate(i.encode64(e)).rval),n){var r=2;32&e.charCodeAt(1)&&(r=6),e=e.substring(r,e.length-4)}return e},i.inflate=function(t,e,n){var r=t.inflate(i.encode64(e)).rval;return null===r?null:i.decode64(r)};var s=function(t,e,n){if(!t)throw new Error("WebStorage not available.");var r;if(null===n?r=t.removeItem(e):(n=i.encode64(JSON.stringify(n)),r=t.setItem(e,n)),void 0!==r&&!0!==r.rval){var o=new Error(r.error.message);throw o.id=r.error.id,o.name=r.error.name,o}},u=function(t,e){if(!t)throw new Error("WebStorage not available.");var n=t.getItem(e);if(t.init)if(null===n.rval){if(n.error){var r=new Error(n.error.message);throw r.id=n.error.id,r.name=n.error.name,r}n=null}else n=n.rval;return null!==n&&(n=JSON.parse(i.decode64(n))),n},c=function(t,e,n,r){var i=u(t,e);null===i&&(i={}),i[n]=r,s(t,e,i)},l=function(t,e,n){var r=u(t,e);return null!==r&&(r=n in r?r[n]:null),r},h=function(t,e,n){var r=u(t,e);if(null!==r&&n in r){delete r[n];var i=!0;for(var o in r){i=!1;break}i&&(r=null),s(t,e,r)}},f=function(t,e){s(t,e,null)},d=function(t,e,n){var r=null;void 0===n&&(n=["web","flash"]);var i,o=!1,a=null;for(var s in n){i=n[s];try{if("flash"===i||"both"===i){if(null===e[0])throw new Error("Flash local storage not available.");r=t.apply(this,e),o="flash"===i}"web"!==i&&"both"!==i||(e[0]=localStorage,r=t.apply(this,e),o=!0)}catch(t){a=t}if(o)break}if(!o)throw a;return r};i.setItem=function(t,e,n,r,i){d(c,arguments,i)},i.getItem=function(t,e,n,r){return d(l,arguments,r)},i.removeItem=function(t,e,n,r){d(h,arguments,r)},i.clearItems=function(t,e,n){d(f,arguments,n)},i.parseUrl=function(t){var e=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;e.lastIndex=0;var n=e.exec(t),r=null===n?null:{full:t,scheme:n[1],host:n[2],port:n[3],path:n[4]};return r&&(r.fullHost=r.host,r.port?80!==r.port&&"http"===r.scheme?r.fullHost+=":"+r.port:443!==r.port&&"https"===r.scheme&&(r.fullHost+=":"+r.port):"http"===r.scheme?r.port=80:"https"===r.scheme&&(r.port=443),r.full=r.scheme+"://"+r.fullHost),r};var p=null;i.getQueryVariables=function(t){var e,n=function(t){for(var e={},n=t.split("&"),r=0;r<n.length;r++){var i,o,a=n[r].indexOf("=");a>0?(i=n[r].substring(0,a),o=n[r].substring(a+1)):(i=n[r],o=null),i in e||(e[i]=[]),i in Object.prototype||null===o||e[i].push(unescape(o))}return e};return void 0===t?(null===p&&(p="undefined"!=typeof window&&window.location&&window.location.search?n(window.location.search.substring(1)):{}),e=p):e=n(t),e},i.parseFragment=function(t){var e=t,n="",r=t.indexOf("?");r>0&&(e=t.substring(0,r),n=t.substring(r+1));var o=e.split("/");return o.length>0&&""===o[0]&&o.shift(),{pathString:e,queryString:n,path:o,query:""===n?{}:i.getQueryVariables(n)}},i.makeRequest=function(t){var e=i.parseFragment(t),n={path:e.pathString,query:e.queryString,getPath:function(t){return void 0===t?e.path:e.path[t]},getQuery:function(t,n){var r;return void 0===t?r=e.query:(r=e.query[t])&&void 0!==n&&(r=r[n]),r},getQueryLast:function(t,e){var r=n.getQuery(t);return r?r[r.length-1]:e}};return n},i.makeLink=function(t,e,n){t=jQuery.isArray(t)?t.join("/"):t;var r=jQuery.param(e||{});return n=n||"",t+(r.length>0?"?"+r:"")+(n.length>0?"#"+n:"")},i.setPath=function(t,e,n){if("object"==typeof t&&null!==t)for(var r=0,i=e.length;r<i;){var o=e[r++];if(r==i)t[o]=n;else{var a=o in t;(!a||a&&"object"!=typeof t[o]||a&&null===t[o])&&(t[o]={}),t=t[o]}}},i.getPath=function(t,e,n){for(var r=0,i=e.length,o=!0;o&&r<i&&"object"==typeof t&&null!==t;){var a=e[r++];o=a in t,o&&(t=t[a])}return o?t:n},i.deletePath=function(t,e){if("object"==typeof t&&null!==t)for(var n=0,r=e.length;n<r;){var i=e[n++];if(n==r)delete t[i];else{if(!(i in t)||"object"!=typeof t[i]||null===t[i])break;t=t[i]}}},i.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},i.format=function(t){for(var e,n,r=/%./g,i=0,o=[],a=0;e=r.exec(t);){n=t.substring(a,r.lastIndex-2),n.length>0&&o.push(n),a=r.lastIndex;var s=e[0][1];switch(s){case"s":case"o":i<arguments.length?o.push(arguments[1+i++]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+s+"?>")}}return o.push(t.substring(a)),o.join("")},i.formatNumber=function(t,e,n,r){var i=t,o=isNaN(e=Math.abs(e))?2:e,a=void 0===n?",":n,s=void 0===r?".":r,u=i<0?"-":"",c=parseInt(i=Math.abs(+i||0).toFixed(o),10)+"",l=c.length>3?c.length%3:0;return u+(l?c.substr(0,l)+s:"")+c.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+s)+(o?a+Math.abs(i-c).toFixed(o).slice(2):"")},i.formatSize=function(t){return t=t>=1073741824?i.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?i.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?i.formatNumber(t/1024,0)+" KiB":i.formatNumber(t,0)+" bytes"},i.bytesFromIP=function(t){return-1!==t.indexOf(".")?i.bytesFromIPv4(t):-1!==t.indexOf(":")?i.bytesFromIPv6(t):null},i.bytesFromIPv4=function(t){if(t=t.split("."),4!==t.length)return null;for(var e=i.createBuffer(),n=0;n<t.length;++n){var r=parseInt(t[n],10);if(isNaN(r))return null;e.putByte(r)}return e.getBytes()},i.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(t){return 0===t.length&&++e,!0});for(var n=2*(8-t.length+e),r=i.createBuffer(),o=0;o<8;++o)if(t[o]&&0!==t[o].length){var a=i.hexToBytes(t[o]);a.length<2&&r.putByte(0),r.putBytes(a)}else r.fillWithByte(0,n),n=0;return r.getBytes()},i.bytesToIP=function(t){return 4===t.length?i.bytesToIPv4(t):16===t.length?i.bytesToIPv6(t):null},i.bytesToIPv4=function(t){if(4!==t.length)return null;for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e.join(".")},i.bytesToIPv6=function(t){if(16!==t.length)return null;for(var e=[],n=[],r=0,o=0;o<t.length;o+=2){for(var a=i.bytesToHex(t[o]+t[o+1]);"0"===a[0]&&"0"!==a;)a=a.substr(1);if("0"===a){var s=n[n.length-1],u=e.length;s&&u===s.end+1?(s.end=u,s.end-s.start>n[r].end-n[r].start&&(r=n.length-1)):n.push({start:u,end:u})}e.push(a)}if(n.length>0){var c=n[r];c.end-c.start>0&&(e.splice(c.start,c.end-c.start+1,""),0===c.start&&e.unshift(""),7===c.end&&e.push(""))}return e.join(":")},i.estimateCores=function(t,e){function n(t,s,u){if(0===s){var c=Math.floor(t.reduce(function(t,e){return t+e},0)/t.length);return i.cores=Math.max(1,c),URL.revokeObjectURL(a),e(null,i.cores)}r(u,function(e,r){t.push(o(u,r)),n(t,s-1,u)})}function r(t,e){for(var n=[],r=[],i=0;i<t;++i){var o=new Worker(a);o.addEventListener("message",function(i){if(r.push(i.data),r.length===t){for(var o=0;o<t;++o)n[o].terminate();e(null,r)}}),n.push(o)}for(var i=0;i<t;++i)n[i].postMessage(i)}function o(t,e){for(var n=[],r=0;r<t;++r)for(var i=e[r],o=n[r]=[],a=0;a<t;++a)if(r!==a){var s=e[a];(i.st>s.st&&i.st<s.et||s.st>i.st&&s.st<i.et)&&o.push(a)}return n.reduce(function(t,e){return Math.max(t,e.length)},0)}if("function"==typeof t&&(e=t,t={}),t=t||{},"cores"in i&&!t.update)return e(null,i.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return i.cores=navigator.hardwareConcurrency,e(null,i.cores);if("undefined"==typeof Worker)return i.cores=1,e(null,i.cores);if("undefined"==typeof Blob)return i.cores=2,e(null,i.cores);var a=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(t){for(var e=Date.now(),n=e+4;Date.now()<n;);self.postMessage({st:e,et:n})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16)}}if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var e=!0;define=function(t,e){e(require,module)}}var n,r=function(e,r){r.exports=function(r){var i=n.map(function(t){return e(t)}).concat(t);if(r=r||{},r.defined=r.defined||{},r.defined.util)return r.util;r.defined.util=!0;for(var o=0;o<i.length;++o)i[o](r);return r.util}},i=define;define=function(t,r){return n="string"==typeof t?r.slice(2):t.slice(2),e?(delete define,i.apply(null,Array.prototype.slice.call(arguments,0))):(define=i,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module"],function(){r.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){t.cipher=t.cipher||{},t.cipher.algorithms=t.cipher.algorithms||{},t.cipher.createCipher=function(e,n){var r=e;if("string"==typeof r&&(r=t.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+e);return new t.cipher.BlockCipher({algorithm:r,key:n,decrypt:!1})},t.cipher.createDecipher=function(e,n){var r=e;if("string"==typeof r&&(r=t.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+e);return new t.cipher.BlockCipher({algorithm:r,key:n,decrypt:!0})},t.cipher.registerAlgorithm=function(e,n){e=e.toUpperCase(),t.cipher.algorithms[e]=n},t.cipher.getAlgorithm=function(e){return e=e.toUpperCase(),e in t.cipher.algorithms?t.cipher.algorithms[e]:null};var e=t.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};e.prototype.start=function(e){e=e||{};var n={};for(var r in e)n[r]=e[r];n.decrypt=this._decrypt,this._finish=!1,this._input=t.util.createBuffer(),this.output=e.output||t.util.createBuffer(),this.mode.start(n)},e.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},e.prototype.finish=function(t){!t||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(e){return t(this.blockSize,e,!1)},this.mode.unpad=function(e){return t(this.blockSize,e,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e))&&(this._finish=!0,this.update(),!(this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))&&!(this.mode.afterFinish&&!this.mode.afterFinish(this.output,e)))}}var e="cipher";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var n=!0;define=function(t,e){e(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(t){return n(t)}).concat(t);if(i=i||{},i.defined=i.defined||{},i.defined[e])return i[e];i.defined[e]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[e]}},o=define;define=function(t,e){return r="string"==typeof t?e.slice(2):t.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){function e(e){if("string"==typeof e&&(e=t.util.createBuffer(e)),t.util.isArray(e)&&e.length>4){var n=e;e=t.util.createBuffer();for(var r=0;r<n.length;++r)e.putByte(n[r])}return t.util.isArray(e)||(e=[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]),e}function n(t){t[t.length-1]=t[t.length-1]+1&4294967295}function r(t){return[t/4294967296|0,4294967295&t]}t.cipher=t.cipher||{};var i=t.cipher.modes=t.cipher.modes||{};i.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},i.ecb.prototype.start=function(t){},i.ecb.prototype.encrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)e.putInt32(this._outBlock[r])},i.ecb.prototype.decrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)e.putInt32(this._outBlock[r])},i.ecb.prototype.pad=function(t,e){var n=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(n,n),!0},i.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var n=t.length(),r=t.at(n-1);return!(r>this.blockSize<<2)&&(t.truncate(r),!0)},i.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},i.cbc.prototype.start=function(t){if(null===t.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=e(t.iv),this._prev=this._iv.slice(0)}},i.cbc.prototype.encrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=this._prev[r]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)e.putInt32(this._outBlock[r]);this._prev=this._outBlock},i.cbc.prototype.decrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)e.putInt32(this._prev[r]^this._outBlock[r]);this._prev=this._inBlock.slice(0)},i.cbc.prototype.pad=function(t,e){var n=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(n,n),!0},i.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var n=t.length(),r=t.at(n-1);return!(r>this.blockSize<<2)&&(t.truncate(r),!0)},i.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=t.util.createBuffer(),this._partialBytes=0},i.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=e(t.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.cfb.prototype.encrypt=function(t,e,n){var r=t.length();if(0===r)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&r>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);else{var o=(this.blockSize-r)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),
o>0&&!n)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}},i.cfb.prototype.decrypt=function(t,e,n){var r=t.length();if(0===r)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&r>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);else{var o=(this.blockSize-r)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!n)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}},i.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=t.util.createBuffer(),this._partialBytes=0},i.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=e(t.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ofb.prototype.encrypt=function(t,e,n){var r=t.length();if(0===t.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&r>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];else{var o=(this.blockSize-r)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!n)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}},i.ofb.prototype.decrypt=i.ofb.prototype.encrypt,i.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=t.util.createBuffer(),this._partialBytes=0},i.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=e(t.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ctr.prototype.encrypt=function(t,e,r){var i=t.length();if(0===i)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&i>=this.blockSize)for(var o=0;o<this._ints;++o)e.putInt32(t.getInt32()^this._outBlock[o]);else{var a=(this.blockSize-i)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialOutput.putInt32(t.getInt32()^this._outBlock[o]);if(a>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}n(this._inBlock)},i.ctr.prototype.decrypt=i.ctr.prototype.encrypt,i.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=t.util.createBuffer(),this._partialBytes=0,this._R=3774873600},i.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var i=t.util.createBuffer(e.iv);this._cipherLength=0;var o;if(o="additionalData"in e?t.util.createBuffer(e.additionalData):t.util.createBuffer(),this._tagLength="tagLength"in e?e.tagLength:128,this._tag=null,e.decrypt&&(this._tag=t.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var a=i.length();if(12===a)this._j0=[i.getInt32(),i.getInt32(),i.getInt32(),1];else{for(this._j0=[0,0,0,0];i.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[i.getInt32(),i.getInt32(),i.getInt32(),i.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(r(8*a)))}this._inBlock=this._j0.slice(0),n(this._inBlock),this._partialBytes=0,o=t.util.createBuffer(o),this._aDataLength=r(8*o.length());var s=o.length()%this.blockSize;for(s&&o.fillWithByte(0,this.blockSize-s),this._s=[0,0,0,0];o.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[o.getInt32(),o.getInt32(),o.getInt32(),o.getInt32()])},i.gcm.prototype.encrypt=function(t,e,r){var i=t.length();if(0===i)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&i>=this.blockSize){for(var o=0;o<this._ints;++o)e.putInt32(this._outBlock[o]^=t.getInt32());this._cipherLength+=this.blockSize}else{var a=(this.blockSize-i)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialOutput.putInt32(t.getInt32()^this._outBlock[o]);if(0===a||r){if(r){var s=i%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(var o=0;o<this._ints;++o)this._outBlock[o]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),n(this._inBlock)},i.gcm.prototype.decrypt=function(t,e,r){var i=t.length();if(i<this.blockSize&&!(r&&i>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),n(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var o=0;o<this._ints;++o)e.putInt32(this._outBlock[o]^this._hashBlock[o]);i<this.blockSize?this._cipherLength+=i%this.blockSize:this._cipherLength+=this.blockSize},i.gcm.prototype.afterFinish=function(e,n){var i=!0;n.decrypt&&n.overflow&&e.truncate(this.blockSize-n.overflow),this.tag=t.util.createBuffer();var o=this._aDataLength.concat(r(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,o);var a=[];this.cipher.encrypt(this._j0,a);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^a[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),n.decrypt&&this.tag.bytes()!==this._tag&&(i=!1),i},i.gcm.prototype.multiply=function(t,e){for(var n=[0,0,0,0],r=e.slice(0),i=0;i<128;++i){t[i/32|0]&1<<31-i%32&&(n[0]^=r[0],n[1]^=r[1],n[2]^=r[2],n[3]^=r[3]),this.pow(r,r)}return n},i.gcm.prototype.pow=function(t,e){for(var n=1&t[3],r=3;r>0;--r)e[r]=t[r]>>>1|(1&t[r-1])<<31;e[0]=t[0]>>>1,n&&(e[0]^=this._R)},i.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],n=0;n<32;++n){var r=n/8|0,i=t[r]>>>4*(7-n%8)&15,o=this._m[n][i];e[0]^=o[0],e[1]^=o[1],e[2]^=o[2],e[3]^=o[3]}return e},i.gcm.prototype.ghash=function(t,e,n){return e[0]^=n[0],e[1]^=n[1],e[2]^=n[2],e[3]^=n[3],this.tableMultiply(e)},i.gcm.prototype.generateHashTable=function(t,e){for(var n=8/e,r=4*n,i=16*n,o=new Array(i),a=0;a<i;++a){var s=[0,0,0,0],u=a/r|0,c=(r-1-a%r)*e;s[u]=1<<e-1<<c,o[a]=this.generateSubHashTable(this.multiply(s,t),e)}return o},i.gcm.prototype.generateSubHashTable=function(t,e){var n=1<<e,r=n>>>1,i=new Array(n);i[r]=t.slice(0);for(var o=r>>>1;o>0;)this.pow(i[2*o],i[o]=[]),o>>=1;for(o=2;o<r;){for(var a=1;a<o;++a){var s=i[o],u=i[a];i[o+a]=[s[0]^u[0],s[1]^u[1],s[2]^u[2],s[3]^u[3]]}o*=2}for(i[0]=[0,0,0,0],o=r+1;o<n;++o){var c=i[o^r];i[o]=[t[0]^c[0],t[1]^c[1],t[2]^c[2],t[3]^c[3]]}return i}}var e="cipherModes";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var n=!0;define=function(t,e){e(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(t){return n(t)}).concat(t);if(i=i||{},i.defined=i.defined||{},i.defined[e])return i[e];i.defined[e]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[e]}},o=define;define=function(t,e){return r="string"==typeof t?e.slice(2):t.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){function e(e,n){var r=function(){return new t.aes.Algorithm(e,n)};t.cipher.registerAlgorithm(e,r)}function n(){h=!0,u=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;a=new Array(256),s=new Array(256),c=new Array(4),l=new Array(4);for(var e=0;e<4;++e)c[e]=new Array(256),l[e]=new Array(256);for(var n,r,i,o,f,d,p,y=0,g=0,e=0;e<256;++e){o=g^g<<1^g<<2^g<<3^g<<4,o=o>>8^255&o^99,a[y]=o,s[o]=y,f=t[o],n=t[y],r=t[n],i=t[r],d=f<<24^o<<16^o<<8^o^f,p=(n^r^i)<<24^(y^i)<<16^(y^r^i)<<8^y^n^i;for(var m=0;m<4;++m)c[m][y]=d,l[m][o]=p,d=d<<24|d>>>8,p=p<<24|p>>>8;0===y?y=g=1:(y=n^t[t[t[n^i]]],g^=t[t[g]])}}function r(t,e){for(var n,r=t.slice(0),i=1,o=r.length,s=o+6+1,c=f*s,h=o;h<c;++h)n=r[h-1],h%o==0?(n=a[n>>>16&255]<<24^a[n>>>8&255]<<16^a[255&n]<<8^a[n>>>24]^u[i]<<24,i++):o>6&&h%o==4&&(n=a[n>>>24]<<24^a[n>>>16&255]<<16^a[n>>>8&255]<<8^a[255&n]),r[h]=r[h-o]^n;if(e){var d,p=l[0],y=l[1],g=l[2],m=l[3],v=r.slice(0);c=r.length;for(var h=0,S=c-f;h<c;h+=f,S-=f)if(0===h||h===c-f)v[h]=r[S],v[h+1]=r[S+3],v[h+2]=r[S+2],v[h+3]=r[S+1];else for(var b=0;b<f;++b)d=r[S+b],v[h+(3&-b)]=p[a[d>>>24]]^y[a[d>>>16&255]]^g[a[d>>>8&255]]^m[a[255&d]];r=v}return r}function i(t,e,n,r){var i,o,u,h,f,d=t.length/4-1;r?(i=l[0],o=l[1],u=l[2],h=l[3],f=s):(i=c[0],o=c[1],u=c[2],h=c[3],f=a);var p,y,g,m,v,S,b;p=e[0]^t[0],y=e[r?3:1]^t[1],g=e[2]^t[2],m=e[r?1:3]^t[3];for(var B=3,A=1;A<d;++A)v=i[p>>>24]^o[y>>>16&255]^u[g>>>8&255]^h[255&m]^t[++B],S=i[y>>>24]^o[g>>>16&255]^u[m>>>8&255]^h[255&p]^t[++B],b=i[g>>>24]^o[m>>>16&255]^u[p>>>8&255]^h[255&y]^t[++B],m=i[m>>>24]^o[p>>>16&255]^u[y>>>8&255]^h[255&g]^t[++B],p=v,y=S,g=b;n[0]=f[p>>>24]<<24^f[y>>>16&255]<<16^f[g>>>8&255]<<8^f[255&m]^t[++B],n[r?3:1]=f[y>>>24]<<24^f[g>>>16&255]<<16^f[m>>>8&255]<<8^f[255&p]^t[++B],n[2]=f[g>>>24]<<24^f[m>>>16&255]<<16^f[p>>>8&255]<<8^f[255&y]^t[++B],n[r?1:3]=f[m>>>24]<<24^f[p>>>16&255]<<16^f[y>>>8&255]<<8^f[255&g]^t[++B]}function o(e){e=e||{};var n,r=(e.mode||"CBC").toUpperCase(),i="AES-"+r;n=e.decrypt?t.cipher.createDecipher(i,e.key):t.cipher.createCipher(i,e.key);var o=n.start;return n.start=function(e,r){var i=null;r instanceof t.util.ByteBuffer&&(i=r,r={}),r=r||{},r.output=i,r.iv=e,o.call(n,r)},n}t.aes=t.aes||{},t.aes.startEncrypting=function(t,e,n,r){var i=o({key:t,output:n,decrypt:!1,mode:r});return i.start(e),i},t.aes.createEncryptionCipher=function(t,e){return o({key:t,output:null,decrypt:!1,mode:e})},t.aes.startDecrypting=function(t,e,n,r){var i=o({key:t,output:n,decrypt:!0,mode:r});return i.start(e),i},t.aes.createDecryptionCipher=function(t,e){return o({key:t,output:null,decrypt:!0,mode:e})},t.aes.Algorithm=function(t,e){h||n();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(t,e){return i(r._w,t,e,!1)},decrypt:function(t,e){return i(r._w,t,e,!0)}}}),r._init=!1},t.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var n,i=e.key;if("string"!=typeof i||16!==i.length&&24!==i.length&&32!==i.length){if(t.util.isArray(i)&&(16===i.length||24===i.length||32===i.length)){n=i,i=t.util.createBuffer();for(var o=0;o<n.length;++o)i.putByte(n[o])}}else i=t.util.createBuffer(i);if(!t.util.isArray(i)){n=i,i=[];var a=n.length();if(16===a||24===a||32===a){a>>>=2;for(var o=0;o<a;++o)i.push(n.getInt32())}}if(!t.util.isArray(i)||4!==i.length&&6!==i.length&&8!==i.length)throw new Error("Invalid key parameter.");var s=this.mode.name,u=-1!==["CFB","OFB","CTR","GCM"].indexOf(s);this._w=r(i,e.decrypt&&!u),this._init=!0}},t.aes._expandKey=function(t,e){return h||n(),r(t,e)},t.aes._updateBlock=i,e("AES-ECB",t.cipher.modes.ecb),e("AES-CBC",t.cipher.modes.cbc),e("AES-CFB",t.cipher.modes.cfb),e("AES-OFB",t.cipher.modes.ofb),e("AES-CTR",t.cipher.modes.ctr),e("AES-GCM",t.cipher.modes.gcm);var a,s,u,c,l,h=!1,f=4}if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var e=!0;define=function(t,e){e(require,module)}}var n,r=function(e,r){r.exports=function(r){var i=n.map(function(t){return e(t)}).concat(t);if(r=r||{},r.defined=r.defined||{},r.defined.aes)return r.aes;r.defined.aes=!0;for(var o=0;o<i.length;++o)i[o](r);return r.aes}},i=define;define=function(t,r){return n="string"==typeof t?r.slice(2):t.slice(2),e?(delete define,i.apply(null,Array.prototype.slice.call(arguments,0))):(define=i,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./cipher","./cipherModes","./util"],function(){r.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){t.pki=t.pki||{};var e=t.pki.oids=t.oids=t.oids||{};e["1.2.840.113549.1.1.1"]="rsaEncryption",e.rsaEncryption="1.2.840.113549.1.1.1",e["1.2.840.113549.1.1.4"]="md5WithRSAEncryption",e.md5WithRSAEncryption="1.2.840.113549.1.1.4",e["1.2.840.113549.1.1.5"]="sha1WithRSAEncryption",e.sha1WithRSAEncryption="1.2.840.113549.1.1.5",e["1.2.840.113549.1.1.7"]="RSAES-OAEP",e["RSAES-OAEP"]="1.2.840.113549.1.1.7",e["1.2.840.113549.1.1.8"]="mgf1",e.mgf1="1.2.840.113549.1.1.8",e["1.2.840.113549.1.1.9"]="pSpecified",e.pSpecified="1.2.840.113549.1.1.9",e["1.2.840.113549.1.1.10"]="RSASSA-PSS",e["RSASSA-PSS"]="1.2.840.113549.1.1.10",e["1.2.840.113549.1.1.11"]="sha256WithRSAEncryption",e.sha256WithRSAEncryption="1.2.840.113549.1.1.11",e["1.2.840.113549.1.1.12"]="sha384WithRSAEncryption",e.sha384WithRSAEncryption="1.2.840.113549.1.1.12",e["1.2.840.113549.1.1.13"]="sha512WithRSAEncryption",e.sha512WithRSAEncryption="1.2.840.113549.1.1.13",e["1.3.14.3.2.7"]="desCBC",e.desCBC="1.3.14.3.2.7",e["1.3.14.3.2.26"]="sha1",e.sha1="1.3.14.3.2.26",e["2.16.840.1.101.3.4.2.1"]="sha256",e.sha256="2.16.840.1.101.3.4.2.1",e["2.16.840.1.101.3.4.2.2"]="sha384",e.sha384="2.16.840.1.101.3.4.2.2",e["2.16.840.1.101.3.4.2.3"]="sha512",e.sha512="2.16.840.1.101.3.4.2.3",e["1.2.840.113549.2.5"]="md5",e.md5="1.2.840.113549.2.5",e["1.2.840.113549.1.7.1"]="data",e.data="1.2.840.113549.1.7.1",e["1.2.840.113549.1.7.2"]="signedData",e.signedData="1.2.840.113549.1.7.2",e["1.2.840.113549.1.7.3"]="envelopedData",e.envelopedData="1.2.840.113549.1.7.3",e["1.2.840.113549.1.7.4"]="signedAndEnvelopedData",e.signedAndEnvelopedData="1.2.840.113549.1.7.4",e["1.2.840.113549.1.7.5"]="digestedData",e.digestedData="1.2.840.113549.1.7.5",e["1.2.840.113549.1.7.6"]="encryptedData",e.encryptedData="1.2.840.113549.1.7.6",e["1.2.840.113549.1.9.1"]="emailAddress",e.emailAddress="1.2.840.113549.1.9.1",e["1.2.840.113549.1.9.2"]="unstructuredName",e.unstructuredName="1.2.840.113549.1.9.2",e["1.2.840.113549.1.9.3"]="contentType",e.contentType="1.2.840.113549.1.9.3",e["1.2.840.113549.1.9.4"]="messageDigest",e.messageDigest="1.2.840.113549.1.9.4",e["1.2.840.113549.1.9.5"]="signingTime",e.signingTime="1.2.840.113549.1.9.5",e["1.2.840.113549.1.9.6"]="counterSignature",e.counterSignature="1.2.840.113549.1.9.6",e["1.2.840.113549.1.9.7"]="challengePassword",e.challengePassword="1.2.840.113549.1.9.7",e["1.2.840.113549.1.9.8"]="unstructuredAddress",e.unstructuredAddress="1.2.840.113549.1.9.8",e["1.2.840.113549.1.9.14"]="extensionRequest",e.extensionRequest="1.2.840.113549.1.9.14",e["1.2.840.113549.1.9.20"]="friendlyName",e.friendlyName="1.2.840.113549.1.9.20",e["1.2.840.113549.1.9.21"]="localKeyId",e.localKeyId="1.2.840.113549.1.9.21",e["1.2.840.113549.1.9.22.1"]="x509Certificate",e.x509Certificate="1.2.840.113549.1.9.22.1",e["1.2.840.113549.1.12.10.1.1"]="keyBag",e.keyBag="1.2.840.113549.1.12.10.1.1",e["1.2.840.113549.1.12.10.1.2"]="pkcs8ShroudedKeyBag",e.pkcs8ShroudedKeyBag="1.2.840.113549.1.12.10.1.2",e["1.2.840.113549.1.12.10.1.3"]="certBag",e.certBag="1.2.840.113549.1.12.10.1.3",e["1.2.840.113549.1.12.10.1.4"]="crlBag",e.crlBag="1.2.840.113549.1.12.10.1.4",e["1.2.840.113549.1.12.10.1.5"]="secretBag",e.secretBag="1.2.840.113549.1.12.10.1.5",e["1.2.840.113549.1.12.10.1.6"]="safeContentsBag",e.safeContentsBag="1.2.840.113549.1.12.10.1.6",e["1.2.840.113549.1.5.13"]="pkcs5PBES2",e.pkcs5PBES2="1.2.840.113549.1.5.13",e["1.2.840.113549.1.5.12"]="pkcs5PBKDF2",e.pkcs5PBKDF2="1.2.840.113549.1.5.12",e["1.2.840.113549.1.12.1.1"]="pbeWithSHAAnd128BitRC4",e.pbeWithSHAAnd128BitRC4="1.2.840.113549.1.12.1.1",e["1.2.840.113549.1.12.1.2"]="pbeWithSHAAnd40BitRC4",e.pbeWithSHAAnd40BitRC4="1.2.840.113549.1.12.1.2",e["1.2.840.113549.1.12.1.3"]="pbeWithSHAAnd3-KeyTripleDES-CBC",e["pbeWithSHAAnd3-KeyTripleDES-CBC"]="1.2.840.113549.1.12.1.3",e["1.2.840.113549.1.12.1.4"]="pbeWithSHAAnd2-KeyTripleDES-CBC",e["pbeWithSHAAnd2-KeyTripleDES-CBC"]="1.2.840.113549.1.12.1.4",e["1.2.840.113549.1.12.1.5"]="pbeWithSHAAnd128BitRC2-CBC",e["pbeWithSHAAnd128BitRC2-CBC"]="1.2.840.113549.1.12.1.5",e["1.2.840.113549.1.12.1.6"]="pbewithSHAAnd40BitRC2-CBC",e["pbewithSHAAnd40BitRC2-CBC"]="1.2.840.113549.1.12.1.6",e["1.2.840.113549.2.7"]="hmacWithSHA1",e.hmacWithSHA1="1.2.840.113549.2.7",e["1.2.840.113549.2.8"]="hmacWithSHA224",e.hmacWithSHA224="1.2.840.113549.2.8",e["1.2.840.113549.2.9"]="hmacWithSHA256",e.hmacWithSHA256="1.2.840.113549.2.9",e["1.2.840.113549.2.10"]="hmacWithSHA384",e.hmacWithSHA384="1.2.840.113549.2.10",e["1.2.840.113549.2.11"]="hmacWithSHA512",e.hmacWithSHA512="1.2.840.113549.2.11",e["1.2.840.113549.3.7"]="des-EDE3-CBC",e["des-EDE3-CBC"]="1.2.840.113549.3.7",e["2.16.840.1.101.3.4.1.2"]="aes128-CBC",e["aes128-CBC"]="2.16.840.1.101.3.4.1.2",e["2.16.840.1.101.3.4.1.22"]="aes192-CBC",e["aes192-CBC"]="2.16.840.1.101.3.4.1.22",e["2.16.840.1.101.3.4.1.42"]="aes256-CBC",e["aes256-CBC"]="2.16.840.1.101.3.4.1.42",e["2.5.4.3"]="commonName",e.commonName="2.5.4.3",e["2.5.4.5"]="serialName",e.serialName="2.5.4.5",e["2.5.4.6"]="countryName",e.countryName="2.5.4.6",e["2.5.4.7"]="localityName",e.localityName="2.5.4.7",e["2.5.4.8"]="stateOrProvinceName",e.stateOrProvinceName="2.5.4.8",e["2.5.4.10"]="organizationName",e.organizationName="2.5.4.10",e["2.5.4.11"]="organizationalUnitName",e.organizationalUnitName="2.5.4.11",e["2.16.840.1.113730.1.1"]="nsCertType",e.nsCertType="2.16.840.1.113730.1.1",e["2.5.29.1"]="authorityKeyIdentifier",e["2.5.29.2"]="keyAttributes",e["2.5.29.3"]="certificatePolicies",e["2.5.29.4"]="keyUsageRestriction",e["2.5.29.5"]="policyMapping",e["2.5.29.6"]="subtreesConstraint",e["2.5.29.7"]="subjectAltName",e["2.5.29.8"]="issuerAltName",e["2.5.29.9"]="subjectDirectoryAttributes",e["2.5.29.10"]="basicConstraints",e["2.5.29.11"]="nameConstraints",e["2.5.29.12"]="policyConstraints",e["2.5.29.13"]="basicConstraints",e["2.5.29.14"]="subjectKeyIdentifier",e.subjectKeyIdentifier="2.5.29.14",e["2.5.29.15"]="keyUsage",e.keyUsage="2.5.29.15",e["2.5.29.16"]="privateKeyUsagePeriod",e["2.5.29.17"]="subjectAltName",e.subjectAltName="2.5.29.17",e["2.5.29.18"]="issuerAltName",e.issuerAltName="2.5.29.18",e["2.5.29.19"]="basicConstraints",e.basicConstraints="2.5.29.19",e["2.5.29.20"]="cRLNumber",e["2.5.29.21"]="cRLReason",e["2.5.29.22"]="expirationDate",e["2.5.29.23"]="instructionCode",e["2.5.29.24"]="invalidityDate",e["2.5.29.25"]="cRLDistributionPoints",e["2.5.29.26"]="issuingDistributionPoint",e["2.5.29.27"]="deltaCRLIndicator",e["2.5.29.28"]="issuingDistributionPoint",e["2.5.29.29"]="certificateIssuer",e["2.5.29.30"]="nameConstraints",e["2.5.29.31"]="cRLDistributionPoints",e.cRLDistributionPoints="2.5.29.31",e["2.5.29.32"]="certificatePolicies",e.certificatePolicies="2.5.29.32",e["2.5.29.33"]="policyMappings",e["2.5.29.34"]="policyConstraints",e["2.5.29.35"]="authorityKeyIdentifier",e.authorityKeyIdentifier="2.5.29.35",e["2.5.29.36"]="policyConstraints",e["2.5.29.37"]="extKeyUsage",e.extKeyUsage="2.5.29.37",e["2.5.29.46"]="freshestCRL",e["2.5.29.54"]="inhibitAnyPolicy",e["1.3.6.1.4.1.11129.2.4.2"]="timestampList",e.timestampList="1.3.6.1.4.1.11129.2.4.2",e["1.3.6.1.5.5.7.1.1"]="authorityInfoAccess",e.authorityInfoAccess="1.3.6.1.5.5.7.1.1",e["1.3.6.1.5.5.7.3.1"]="serverAuth",e.serverAuth="1.3.6.1.5.5.7.3.1",e["1.3.6.1.5.5.7.3.2"]="clientAuth",e.clientAuth="1.3.6.1.5.5.7.3.2",e["1.3.6.1.5.5.7.3.3"]="codeSigning",e.codeSigning="1.3.6.1.5.5.7.3.3",e["1.3.6.1.5.5.7.3.4"]="emailProtection",e.emailProtection="1.3.6.1.5.5.7.3.4",e["1.3.6.1.5.5.7.3.8"]="timeStamping",e.timeStamping="1.3.6.1.5.5.7.3.8"}if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var e=!0;define=function(t,e){e(require,module)}}var n,r=function(e,r){r.exports=function(r){var i=n.map(function(t){return e(t)}).concat(t);if(r=r||{},r.defined=r.defined||{},r.defined.oids)return r.oids;r.defined.oids=!0;for(var o=0;o<i.length;++o)i[o](r);return r.oids}},i=define;define=function(t,r){return n="string"==typeof t?r.slice(2):t.slice(2),e?(delete define,i.apply(null,Array.prototype.slice.call(arguments,0))):(define=i,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module"],function(){r.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){function e(t,e,n){if(n>e){var r=new Error("Too few bytes to parse DER.");throw r.available=t.length(),r.remaining=e,r.requested=n,r}}function n(t,o,a,s){var u;e(t,o,2);var c=t.getByte();o--;var l=192&c,h=31&c;u=t.length();var f=i(t,o);if(o-=u-t.length(),void 0!==f&&f>o){if(s.strict){var d=new Error("Too few bytes to read ASN.1 value.");throw d.available=t.length(),d.remaining=o,d.requested=f,d}f=o}var p,y,g=32==(32&c);if(g)if(p=[],void 0===f)for(;;){if(e(t,o,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),o-=2;break}u=t.length(),p.push(n(t,o,a+1,s)),o-=u-t.length()}else for(;f>0;)u=t.length(),p.push(n(t,f,a+1,s)),o-=u-t.length(),f-=u-t.length();if(void 0===p&&l===r.Class.UNIVERSAL&&h===r.Type.BITSTRING&&(y=t.bytes(f)),void 0===p&&s.decodeBitStrings&&l===r.Class.UNIVERSAL&&h===r.Type.BITSTRING&&f>1){var m=t.read,v=o,S=0;if(h===r.Type.BITSTRING&&(e(t,o,1),S=t.getByte(),o--),0===S)try{u=t.length();var b={verbose:s.verbose,strict:!0,decodeBitStrings:!0},B=n(t,o,a+1,b),A=u-t.length();o-=A,h==r.Type.BITSTRING&&A++;var I=B.tagClass;A!==f||I!==r.Class.UNIVERSAL&&I!==r.Class.CONTEXT_SPECIFIC||(p=[B])}catch(t){}void 0===p&&(t.read=m,o=v)}if(void 0===p){if(void 0===f){if(s.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");f=o}if(h===r.Type.BMPSTRING)for(p="";f>0;f-=2)e(t,o,2),p+=String.fromCharCode(t.getInt16()),o-=2;else p=t.getBytes(f)}var w=void 0===y?null:{bitStringContents:y};return r.create(l,h,g,p,w)}var r=t.asn1=t.asn1||{};r.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},r.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},r.create=function(e,n,i,o,a){if(t.util.isArray(o)){for(var s=[],u=0;u<o.length;++u)void 0!==o[u]&&s.push(o[u]);o=s}var c={tagClass:e,type:n,constructed:i,composed:i||t.util.isArray(o),value:o};return a&&"bitStringContents"in a&&(c.bitStringContents=a.bitStringContents,c.original=r.copy(c)),c},r.copy=function(e,n){var i;if(t.util.isArray(e)){i=[];for(var o=0;o<e.length;++o)i.push(r.copy(e[o],n));return i}return"string"==typeof e?e:(i={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:r.copy(e.value,n)},n&&!n.excludeBitStringContents&&(i.bitStringContents=e.bitStringContents),i)},r.equals=function(e,n,i){if(t.util.isArray(e)){if(!t.util.isArray(n))return!1;if(e.length!==n.length)return!1;for(var o=0;o<e.length;++o)return!!r.equals(e[o],n[o])}if(typeof e!=typeof n)return!1;if("string"==typeof e)return e===n;var a=e.tagClass===n.tagClass&&e.type===n.type&&e.constructed===n.constructed&&e.composed===n.composed&&r.equals(e.value,n.value);return i&&i.includeBitStringContents&&(a=a&&e.bitStringContents===n.bitStringContents),a},r.getBerValueLength=function(t){var e=t.getByte();if(128!==e){return 128&e?t.getInt((127&e)<<3):e}};var i=function(t,n){var r=t.getByte();if(n--,128!==r){var i;if(128&r){var o=127&r;e(t,n,o),i=t.getInt(o<<3)}else i=r;if(i<0)throw new Error("Negative length: "+i);return i}};r.fromDer=function(e,r){return void 0===r&&(r={strict:!0,decodeBitStrings:!0}),"boolean"==typeof r&&(r={strict:r,decodeBitStrings:!0}),"strict"in r||(r.strict=!0),"decodeBitStrings"in r||(r.decodeBitStrings=!0),"string"==typeof e&&(e=t.util.createBuffer(e)),n(e,e.length(),0,r)},r.toDer=function(e){var n=t.util.createBuffer(),i=e.tagClass|e.type,o=t.util.createBuffer(),a=!1;if("bitStringContents"in e&&(a=!0,e.original&&(a=r.equals(e,e.original))),a)o.putBytes(e.bitStringContents);else if(e.composed){e.constructed?i|=32:o.putByte(0);for(var s=0;s<e.value.length;++s)void 0!==e.value[s]&&o.putBuffer(r.toDer(e.value[s]))}else if(e.type===r.Type.BMPSTRING)for(var s=0;s<e.value.length;++s)o.putInt16(e.value.charCodeAt(s));else e.type===r.Type.INTEGER&&e.value.length>1&&(0===e.value.charCodeAt(0)&&0==(128&e.value.charCodeAt(1))||255===e.value.charCodeAt(0)&&128==(128&e.value.charCodeAt(1)))?o.putBytes(e.value.substr(1)):o.putBytes(e.value);if(n.putByte(i),o.length()<=127)n.putByte(127&o.length());else{var u=o.length(),c="";do{c+=String.fromCharCode(255&u),u>>>=8}while(u>0);n.putByte(128|c.length);for(var s=c.length-1;s>=0;--s)n.putByte(c.charCodeAt(s))}return n.putBuffer(o),n},r.oidToDer=function(e){var n=e.split("."),r=t.util.createBuffer();r.putByte(40*parseInt(n[0],10)+parseInt(n[1],10));for(var i,o,a,s,u=2;u<n.length;++u){i=!0,o=[],a=parseInt(n[u],10);do{s=127&a,a>>>=7,i||(s|=128),o.push(s),i=!1}while(a>0);for(var c=o.length-1;c>=0;--c)r.putByte(o[c])}return r},r.derToOid=function(e){var n;"string"==typeof e&&(e=t.util.createBuffer(e));var r=e.getByte();n=Math.floor(r/40)+"."+r%40;for(var i=0;e.length()>0;)r=e.getByte(),i<<=7,128&r?i+=127&r:(n+="."+(i+r),i=0);return n},r.utcTimeToDate=function(t){var e=new Date,n=parseInt(t.substr(0,2),10);n=n>=50?1900+n:2e3+n;var r=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),o=parseInt(t.substr(6,2),10),a=parseInt(t.substr(8,2),10),s=0;if(t.length>11){var u=t.charAt(10),c=10;"+"!==u&&"-"!==u&&(s=parseInt(t.substr(10,2),10),c+=2)}if(e.setUTCFullYear(n,r,i),e.setUTCHours(o,a,s,0),c&&("+"===(u=t.charAt(c))||"-"===u)){var l=parseInt(t.substr(c+1,2),10),h=parseInt(t.substr(c+4,2),10),f=60*l+h;f*=6e4,"+"===u?e.setTime(+e-f):e.setTime(+e+f)}return e},r.generalizedTimeToDate=function(t){var e=new Date,n=parseInt(t.substr(0,4),10),r=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),a=parseInt(t.substr(10,2),10),s=parseInt(t.substr(12,2),10),u=0,c=0,l=!1;"Z"===t.charAt(t.length-1)&&(l=!0);var h=t.length-5,f=t.charAt(h);if("+"===f||"-"===f){c=60*parseInt(t.substr(h+1,2),10)+parseInt(t.substr(h+4,2),10),c*=6e4,"+"===f&&(c*=-1),l=!0}return"."===t.charAt(14)&&(u=1e3*parseFloat(t.substr(14),10)),l?(e.setUTCFullYear(n,r,i),e.setUTCHours(o,a,s,u),e.setTime(+e+c)):(e.setFullYear(n,r,i),e.setHours(o,a,s,u)),e},r.dateToUtcTime=function(t){if("string"==typeof t)return t;var e="",n=[];n.push((""+t.getUTCFullYear()).substr(2)),n.push(""+(t.getUTCMonth()+1)),n.push(""+t.getUTCDate()),n.push(""+t.getUTCHours()),n.push(""+t.getUTCMinutes()),n.push(""+t.getUTCSeconds());for(var r=0;r<n.length;++r)n[r].length<2&&(e+="0"),e+=n[r];return e+="Z"},r.dateToGeneralizedTime=function(t){if("string"==typeof t)return t;var e="",n=[];n.push(""+t.getUTCFullYear()),n.push(""+(t.getUTCMonth()+1)),n.push(""+t.getUTCDate()),n.push(""+t.getUTCHours()),n.push(""+t.getUTCMinutes()),n.push(""+t.getUTCSeconds());for(var r=0;r<n.length;++r)n[r].length<2&&(e+="0"),e+=n[r];return e+="Z"},r.integerToDer=function(e){var n=t.util.createBuffer();if(e>=-128&&e<128)return n.putSignedInt(e,8);if(e>=-32768&&e<32768)return n.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return n.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return n.putSignedInt(e,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=e,r},r.derToInteger=function(e){"string"==typeof e&&(e=t.util.createBuffer(e));var n=8*e.length();if(n>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(n)},r.validate=function(e,n,i,o){var a=!1;if(e.tagClass!==n.tagClass&&void 0!==n.tagClass||e.type!==n.type&&void 0!==n.type)o&&(e.tagClass!==n.tagClass&&o.push("["+n.name+'] Expected tag class "'+n.tagClass+'", got "'+e.tagClass+'"'),e.type!==n.type&&o.push("["+n.name+'] Expected type "'+n.type+'", got "'+e.type+'"'));else if(e.constructed===n.constructed||void 0===n.constructed){if(a=!0,n.value&&t.util.isArray(n.value))for(var s=0,u=0;a&&u<n.value.length;++u)a=n.value[u].optional||!1,e.value[s]&&(a=r.validate(e.value[s],n.value[u],i,o),a?++s:n.value[u].optional&&(a=!0)),!a&&o&&o.push("["+n.name+'] Tag class "'+n.tagClass+'", type "'+n.type+'" expected value length "'+n.value.length+'", got "'+e.value.length+'"');if(a&&i&&(n.capture&&(i[n.capture]=e.value),n.captureAsn1&&(i[n.captureAsn1]=e),n.captureBitStringContents&&"bitStringContents"in e&&(i[n.captureBitStringContents]=e.bitStringContents),n.captureBitStringValue&&"bitStringContents"in e)){if(e.bitStringContents.length<2)i[n.captureBitStringValue]="";else{var c=e.bitStringContents.charCodeAt(0);if(0!==c)throw new Error("captureBitStringValue only supported for zero unused bits");i[n.captureBitStringValue]=e.bitStringContents.slice(1)}}}else o&&o.push("["+n.name+'] Expected constructed "'+n.constructed+'", got "'+e.constructed+'"');return a};var o=/[^\\u0000-\\u00ff]/;r.prettyPrint=function(e,n,i){var a="";n=n||0,i=i||2,n>0&&(a+="\n");for(var s="",u=0;u<n*i;++u)s+=" ";switch(a+=s+"Tag: ",e.tagClass){case r.Class.UNIVERSAL:a+="Universal:";break;case r.Class.APPLICATION:a+="Application:";break;case r.Class.CONTEXT_SPECIFIC:a+="Context-Specific:";break;case r.Class.PRIVATE:a+="Private:"}if(e.tagClass===r.Class.UNIVERSAL)switch(a+=e.type,e.type){case r.Type.NONE:a+=" (None)";break;case r.Type.BOOLEAN:a+=" (Boolean)";break;case r.Type.INTEGER:a+=" (Integer)";break;case r.Type.BITSTRING:a+=" (Bit string)";break;case r.Type.OCTETSTRING:a+=" (Octet string)";break;case r.Type.NULL:a+=" (Null)";break;case r.Type.OID:a+=" (Object Identifier)";break;case r.Type.ODESC:a+=" (Object Descriptor)";break;case r.Type.EXTERNAL:a+=" (External or Instance of)";break;case r.Type.REAL:a+=" (Real)";break;case r.Type.ENUMERATED:a+=" (Enumerated)";break;case r.Type.EMBEDDED:a+=" (Embedded PDV)";break;case r.Type.UTF8:a+=" (UTF8)";break;case r.Type.ROID:a+=" (Relative Object Identifier)";break;case r.Type.SEQUENCE:a+=" (Sequence)";break;case r.Type.SET:a+=" (Set)";break;case r.Type.PRINTABLESTRING:a+=" (Printable String)";break;case r.Type.IA5String:a+=" (IA5String (ASCII))";break;case r.Type.UTCTIME:a+=" (UTC time)";break;case r.Type.GENERALIZEDTIME:a+=" (Generalized time)";break;case r.Type.BMPSTRING:a+=" (BMP String)"}else a+=e.type;if(a+="\n",a+=s+"Constructed: "+e.constructed+"\n",e.composed){for(var c=0,l="",u=0;u<e.value.length;++u)void 0!==e.value[u]&&(c+=1,l+=r.prettyPrint(e.value[u],n+1,i),u+1<e.value.length&&(l+=","))
;a+=s+"Sub values: "+c+l}else{if(a+=s+"Value: ",e.type===r.Type.OID){var h=r.derToOid(e.value);a+=h,t.pki&&t.pki.oids&&h in t.pki.oids&&(a+=" ("+t.pki.oids[h]+") ")}if(e.type===r.Type.INTEGER)try{a+=r.derToInteger(e.value)}catch(n){a+="0x"+t.util.bytesToHex(e.value)}else if(e.type===r.Type.BITSTRING){if(e.value.length>1?a+="0x"+t.util.bytesToHex(e.value.slice(1)):a+="(none)",e.value.length>0){var f=e.value.charCodeAt(0);1==f?a+=" (1 unused bit shown)":f>1&&(a+=" ("+f+" unused bits shown)")}}else e.type===r.Type.OCTETSTRING?(o.test(e.value)||(a+="("+e.value+") "),a+="0x"+t.util.bytesToHex(e.value)):e.type===r.Type.UTF8?a+=t.util.decodeUtf8(e.value):e.type===r.Type.PRINTABLESTRING||e.type===r.Type.IA5String?a+=e.value:o.test(e.value)?a+="0x"+t.util.bytesToHex(e.value):0===e.value.length?a+="[null]":a+=e.value}return a}}if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var e=!0;define=function(t,e){e(require,module)}}var n,r=function(e,r){r.exports=function(r){var i=n.map(function(t){return e(t)}).concat(t);if(r=r||{},r.defined=r.defined||{},r.defined.asn1)return r.asn1;r.defined.asn1=!0;for(var o=0;o<i.length;++o)i[o](r);return r.asn1}},i=define;define=function(t,r){return n="string"==typeof t?r.slice(2):t.slice(2),e?(delete define,i.apply(null,Array.prototype.slice.call(arguments,0))):(define=i,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./util","./oids"],function(){r.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){function e(){i=String.fromCharCode(128),i+=t.util.fillString(String.fromCharCode(0),64),o=!0}function n(t,e,n){for(var r,i,o,a,s,u,c,l,h=n.length();h>=64;){for(i=t.h0,o=t.h1,a=t.h2,s=t.h3,u=t.h4,l=0;l<16;++l)r=n.getInt32(),e[l]=r,c=s^o&(a^s),r=(i<<5|i>>>27)+c+u+1518500249+r,u=s,s=a,a=(o<<30|o>>>2)>>>0,o=i,i=r;for(;l<20;++l)r=e[l-3]^e[l-8]^e[l-14]^e[l-16],r=r<<1|r>>>31,e[l]=r,c=s^o&(a^s),r=(i<<5|i>>>27)+c+u+1518500249+r,u=s,s=a,a=(o<<30|o>>>2)>>>0,o=i,i=r;for(;l<32;++l)r=e[l-3]^e[l-8]^e[l-14]^e[l-16],r=r<<1|r>>>31,e[l]=r,c=o^a^s,r=(i<<5|i>>>27)+c+u+1859775393+r,u=s,s=a,a=(o<<30|o>>>2)>>>0,o=i,i=r;for(;l<40;++l)r=e[l-6]^e[l-16]^e[l-28]^e[l-32],r=r<<2|r>>>30,e[l]=r,c=o^a^s,r=(i<<5|i>>>27)+c+u+1859775393+r,u=s,s=a,a=(o<<30|o>>>2)>>>0,o=i,i=r;for(;l<60;++l)r=e[l-6]^e[l-16]^e[l-28]^e[l-32],r=r<<2|r>>>30,e[l]=r,c=o&a|s&(o^a),r=(i<<5|i>>>27)+c+u+2400959708+r,u=s,s=a,a=(o<<30|o>>>2)>>>0,o=i,i=r;for(;l<80;++l)r=e[l-6]^e[l-16]^e[l-28]^e[l-32],r=r<<2|r>>>30,e[l]=r,c=o^a^s,r=(i<<5|i>>>27)+c+u+3395469782+r,u=s,s=a,a=(o<<30|o>>>2)>>>0,o=i,i=r;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+a|0,t.h3=t.h3+s|0,t.h4=t.h4+u|0,h-=64}}var r=t.sha1=t.sha1||{};t.md=t.md||{},t.md.algorithms=t.md.algorithms||{},t.md.sha1=t.md.algorithms.sha1=r,r.create=function(){o||e();var r=null,a=t.util.createBuffer(),s=new Array(80),u={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return u.start=function(){u.messageLength=0,u.fullMessageLength=u.messageLength64=[];for(var e=u.messageLengthSize/4,n=0;n<e;++n)u.fullMessageLength.push(0);return a=t.util.createBuffer(),r={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},u},u.start(),u.update=function(e,i){"utf8"===i&&(e=t.util.encodeUtf8(e));var o=e.length;u.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var c=u.fullMessageLength.length-1;c>=0;--c)u.fullMessageLength[c]+=o[1],o[1]=o[0]+(u.fullMessageLength[c]/4294967296>>>0),u.fullMessageLength[c]=u.fullMessageLength[c]>>>0,o[0]=o[1]/4294967296>>>0;return a.putBytes(e),n(r,s,a),(a.read>2048||0===a.length())&&a.compact(),u},u.digest=function(){var e=t.util.createBuffer();e.putBytes(a.bytes());var o=u.fullMessageLength[u.fullMessageLength.length-1]+u.messageLengthSize,c=o&u.blockLength-1;e.putBytes(i.substr(0,u.blockLength-c));for(var l,h,f=8*u.fullMessageLength[0],d=0;d<u.fullMessageLength.length-1;++d)l=8*u.fullMessageLength[d+1],h=l/4294967296>>>0,f+=h,e.putInt32(f>>>0),f=l>>>0;e.putInt32(f);var p={h0:r.h0,h1:r.h1,h2:r.h2,h3:r.h3,h4:r.h4};n(p,s,e);var y=t.util.createBuffer();return y.putInt32(p.h0),y.putInt32(p.h1),y.putInt32(p.h2),y.putInt32(p.h3),y.putInt32(p.h4),y},u};var i=null,o=!1}if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var e=!0;define=function(t,e){e(require,module)}}var n,r=function(e,r){r.exports=function(r){var i=n.map(function(t){return e(t)}).concat(t);if(r=r||{},r.defined=r.defined||{},r.defined.sha1)return r.sha1;r.defined.sha1=!0;for(var o=0;o<i.length;++o)i[o](r);return r.sha1}},i=define;define=function(t,r){return n="string"==typeof t?r.slice(2):t.slice(2),e?(delete define,i.apply(null,Array.prototype.slice.call(arguments,0))):(define=i,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./util"],function(){r.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){function e(){i=String.fromCharCode(128),i+=t.util.fillString(String.fromCharCode(0),64),a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=!0}function n(t,e,n){for(var r,i,o,s,u,c,l,h,f,d,p,y,g,m,v,S=n.length();S>=64;){for(l=0;l<16;++l)e[l]=n.getInt32();for(;l<64;++l)r=e[l-2],r=(r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10,i=e[l-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[l]=r+e[l-7]+i+e[l-16]|0;for(h=t.h0,f=t.h1,d=t.h2,p=t.h3,y=t.h4,g=t.h5,m=t.h6,v=t.h7,l=0;l<64;++l)s=(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7),u=m^y&(g^m),o=(h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10),c=h&f|d&(h^f),r=v+s+u+a[l]+e[l],i=o+c,v=m,m=g,g=y,y=p+r>>>0,p=d,d=f,f=h,h=r+i>>>0;t.h0=t.h0+h|0,t.h1=t.h1+f|0,t.h2=t.h2+d|0,t.h3=t.h3+p|0,t.h4=t.h4+y|0,t.h5=t.h5+g|0,t.h6=t.h6+m|0,t.h7=t.h7+v|0,S-=64}}var r=t.sha256=t.sha256||{};t.md=t.md||{},t.md.algorithms=t.md.algorithms||{},t.md.sha256=t.md.algorithms.sha256=r,r.create=function(){o||e();var r=null,a=t.util.createBuffer(),s=new Array(64),u={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return u.start=function(){u.messageLength=0,u.fullMessageLength=u.messageLength64=[];for(var e=u.messageLengthSize/4,n=0;n<e;++n)u.fullMessageLength.push(0);return a=t.util.createBuffer(),r={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},u},u.start(),u.update=function(e,i){"utf8"===i&&(e=t.util.encodeUtf8(e));var o=e.length;u.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var c=u.fullMessageLength.length-1;c>=0;--c)u.fullMessageLength[c]+=o[1],o[1]=o[0]+(u.fullMessageLength[c]/4294967296>>>0),u.fullMessageLength[c]=u.fullMessageLength[c]>>>0,o[0]=o[1]/4294967296>>>0;return a.putBytes(e),n(r,s,a),(a.read>2048||0===a.length())&&a.compact(),u},u.digest=function(){var e=t.util.createBuffer();e.putBytes(a.bytes());var o=u.fullMessageLength[u.fullMessageLength.length-1]+u.messageLengthSize,c=o&u.blockLength-1;e.putBytes(i.substr(0,u.blockLength-c));for(var l,h,f=8*u.fullMessageLength[0],d=0;d<u.fullMessageLength.length-1;++d)l=8*u.fullMessageLength[d+1],h=l/4294967296>>>0,f+=h,e.putInt32(f>>>0),f=l>>>0;e.putInt32(f);var p={h0:r.h0,h1:r.h1,h2:r.h2,h3:r.h3,h4:r.h4,h5:r.h5,h6:r.h6,h7:r.h7};n(p,s,e);var y=t.util.createBuffer();return y.putInt32(p.h0),y.putInt32(p.h1),y.putInt32(p.h2),y.putInt32(p.h3),y.putInt32(p.h4),y.putInt32(p.h5),y.putInt32(p.h6),y.putInt32(p.h7),y},u};var i=null,o=!1,a=null}var e="sha256";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var n=!0;define=function(t,e){e(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(t){return n(t)}).concat(t);if(i=i||{},i.defined=i.defined||{},i.defined[e])return i[e];i.defined[e]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[e]}},o=define;define=function(t,e){return r="string"==typeof t?e.slice(2):t.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){function e(){o=String.fromCharCode(128),o+=t.util.fillString(String.fromCharCode(0),128),s=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],u={},u["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],u["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],u["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],u["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],a=!0}function n(t,e,n){for(var r,i,o,a,u,c,l,h,f,d,p,y,g,m,v,S,b,B,A,I,w,C,T,k,P,E,R,N,_,L,O,D,U,M,x,V=n.length();V>=128;){for(_=0;_<16;++_)e[_][0]=n.getInt32()>>>0,e[_][1]=n.getInt32()>>>0;for(;_<80;++_)D=e[_-2],L=D[0],O=D[1],r=((L>>>19|O<<13)^(O>>>29|L<<3)^L>>>6)>>>0,i=((L<<13|O>>>19)^(O<<3|L>>>29)^(L<<26|O>>>6))>>>0,M=e[_-15],L=M[0],O=M[1],o=((L>>>1|O<<31)^(L>>>8|O<<24)^L>>>7)>>>0,a=((L<<31|O>>>1)^(L<<24|O>>>8)^(L<<25|O>>>7))>>>0,U=e[_-7],x=e[_-16],O=i+U[1]+a+x[1],e[_][0]=r+U[0]+o+x[0]+(O/4294967296>>>0)>>>0,e[_][1]=O>>>0;for(g=t[0][0],m=t[0][1],v=t[1][0],S=t[1][1],b=t[2][0],B=t[2][1],A=t[3][0],I=t[3][1],w=t[4][0],C=t[4][1],T=t[5][0],k=t[5][1],P=t[6][0],E=t[6][1],R=t[7][0],N=t[7][1],_=0;_<80;++_)l=((w>>>14|C<<18)^(w>>>18|C<<14)^(C>>>9|w<<23))>>>0,h=((w<<18|C>>>14)^(w<<14|C>>>18)^(C<<23|w>>>9))>>>0,f=(P^w&(T^P))>>>0,d=(E^C&(k^E))>>>0,u=((g>>>28|m<<4)^(m>>>2|g<<30)^(m>>>7|g<<25))>>>0,c=((g<<4|m>>>28)^(m<<30|g>>>2)^(m<<25|g>>>7))>>>0,p=(g&v|b&(g^v))>>>0,y=(m&S|B&(m^S))>>>0,O=N+h+d+s[_][1]+e[_][1],r=R+l+f+s[_][0]+e[_][0]+(O/4294967296>>>0)>>>0,i=O>>>0,O=c+y,o=u+p+(O/4294967296>>>0)>>>0,a=O>>>0,R=P,N=E,P=T,E=k,T=w,k=C,O=I+i,w=A+r+(O/4294967296>>>0)>>>0,C=O>>>0,A=b,I=B,b=v,B=S,v=g,S=m,O=i+a,g=r+o+(O/4294967296>>>0)>>>0,m=O>>>0;O=t[0][1]+m,t[0][0]=t[0][0]+g+(O/4294967296>>>0)>>>0,t[0][1]=O>>>0,O=t[1][1]+S,t[1][0]=t[1][0]+v+(O/4294967296>>>0)>>>0,t[1][1]=O>>>0,O=t[2][1]+B,t[2][0]=t[2][0]+b+(O/4294967296>>>0)>>>0,t[2][1]=O>>>0,O=t[3][1]+I,t[3][0]=t[3][0]+A+(O/4294967296>>>0)>>>0,t[3][1]=O>>>0,O=t[4][1]+C,t[4][0]=t[4][0]+w+(O/4294967296>>>0)>>>0,t[4][1]=O>>>0,O=t[5][1]+k,t[5][0]=t[5][0]+T+(O/4294967296>>>0)>>>0,t[5][1]=O>>>0,O=t[6][1]+E,t[6][0]=t[6][0]+P+(O/4294967296>>>0)>>>0,t[6][1]=O>>>0,O=t[7][1]+N,t[7][0]=t[7][0]+R+(O/4294967296>>>0)>>>0,t[7][1]=O>>>0,V-=128}}var r=t.sha512=t.sha512||{};t.md=t.md||{},t.md.algorithms=t.md.algorithms||{},t.md.sha512=t.md.algorithms.sha512=r;var i=t.sha384=t.sha512.sha384=t.sha512.sha384||{};i.create=function(){return r.create("SHA-384")},t.md.sha384=t.md.algorithms.sha384=i,t.sha512.sha256=t.sha512.sha256||{create:function(){return r.create("SHA-512/256")}},t.md["sha512/256"]=t.md.algorithms["sha512/256"]=t.sha512.sha256,t.sha512.sha224=t.sha512.sha224||{create:function(){return r.create("SHA-512/224")}},t.md["sha512/224"]=t.md.algorithms["sha512/224"]=t.sha512.sha224,r.create=function(r){if(a||e(),void 0===r&&(r="SHA-512"),!(r in u))throw new Error("Invalid SHA-512 algorithm: "+r);for(var i=u[r],s=null,c=t.util.createBuffer(),l=new Array(80),h=0;h<80;++h)l[h]=new Array(2);var f={algorithm:r.replace("-","").toLowerCase(),blockLength:128,digestLength:64,messageLength:0,fullMessageLength:null,messageLengthSize:16};return f.start=function(){f.messageLength=0,f.fullMessageLength=f.messageLength128=[];for(var e=f.messageLengthSize/4,n=0;n<e;++n)f.fullMessageLength.push(0);c=t.util.createBuffer(),s=new Array(i.length);for(var n=0;n<i.length;++n)s[n]=i[n].slice(0);return f},f.start(),f.update=function(e,r){"utf8"===r&&(e=t.util.encodeUtf8(e));var i=e.length;f.messageLength+=i,i=[i/4294967296>>>0,i>>>0];for(var o=f.fullMessageLength.length-1;o>=0;--o)f.fullMessageLength[o]+=i[1],i[1]=i[0]+(f.fullMessageLength[o]/4294967296>>>0),f.fullMessageLength[o]=f.fullMessageLength[o]>>>0,i[0]=i[1]/4294967296>>>0;return c.putBytes(e),n(s,l,c),(c.read>2048||0===c.length())&&c.compact(),f},f.digest=function(){var e=t.util.createBuffer();e.putBytes(c.bytes());var i=f.fullMessageLength[f.fullMessageLength.length-1]+f.messageLengthSize,a=i&f.blockLength-1;e.putBytes(o.substr(0,f.blockLength-a));for(var u,h,d=8*f.fullMessageLength[0],p=0;p<f.fullMessageLength.length-1;++p)u=8*f.fullMessageLength[p+1],h=u/4294967296>>>0,d+=h,e.putInt32(d>>>0),d=u>>>0;e.putInt32(d);for(var y=new Array(s.length),p=0;p<s.length;++p)y[p]=s[p].slice(0);n(y,l,e);var g,m=t.util.createBuffer();g="SHA-512"===r?y.length:"SHA-384"===r?y.length-2:y.length-4;for(var p=0;p<g;++p)m.putInt32(y[p][0]),p===g-1&&"SHA-512/224"===r||m.putInt32(y[p][1]);return m},f};var o=null,a=!1,s=null,u=null}var e="sha512";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var n=!0;define=function(t,e){e(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(t){return n(t)}).concat(t);if(i=i||{},i.defined=i.defined||{},i.defined[e])return i[e];i.defined[e]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[e]}},o=define;define=function(t,e){return r="string"==typeof t?e.slice(2):t.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){t.md=t.md||{},t.md.algorithms={md5:t.md5,sha1:t.sha1,sha256:t.sha256},t.md.md5=t.md5,t.md.sha1=t.sha1,t.md.sha256=t.sha256}if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var e=!0;define=function(t,e){e(require,module)}}var n,r=function(e,r){r.exports=function(r){var i=n.map(function(t){return e(t)}).concat(t);if(r=r||{},r.defined=r.defined||{},r.defined.md)return r.md;r.defined.md=!0;for(var o=0;o<i.length;++o)i[o](r);return r.md}},i=define;define=function(t,r){return n="string"==typeof t?r.slice(2):t.slice(2),e?(delete define,i.apply(null,Array.prototype.slice.call(arguments,0))):(define=i,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./md5","./sha1","./sha256","./sha512"],function(){r.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){(t.hmac=t.hmac||{}).create=function(){var e=null,n=null,r=null,i=null,o={};return o.start=function(o,a){if(null!==o)if("string"==typeof o){if(!((o=o.toLowerCase())in t.md.algorithms))throw new Error('Unknown hash algorithm "'+o+'"');n=t.md.algorithms[o].create()}else n=o;if(null===a)a=e;else{if("string"==typeof a)a=t.util.createBuffer(a);else if(t.util.isArray(a)){var s=a;a=t.util.createBuffer();for(var u=0;u<s.length;++u)a.putByte(s[u])}var c=a.length();c>n.blockLength&&(n.start(),n.update(a.bytes()),a=n.digest()),r=t.util.createBuffer(),i=t.util.createBuffer(),c=a.length();for(var u=0;u<c;++u){var s=a.at(u);r.putByte(54^s),i.putByte(92^s)}if(c<n.blockLength)for(var s=n.blockLength-c,u=0;u<s;++u)r.putByte(54),i.putByte(92);e=a,r=r.bytes(),i=i.bytes()}n.start(),n.update(r)},o.update=function(t){n.update(t)},o.getMac=function(){var t=n.digest().bytes();return n.start(),n.update(i),n.update(t),n.digest()},o.digest=o.getMac,o}}if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var e=!0;define=function(t,e){e(require,module)}}var n,r=function(e,r){r.exports=function(r){var i=n.map(function(t){return e(t)}).concat(t);if(r=r||{},r.defined=r.defined||{},r.defined.hmac)return r.hmac;r.defined.hmac=!0;for(var o=0;o<i.length;++o)i[o](r);return r.hmac}},i=define;define=function(t,r){return n="string"==typeof t?r.slice(2):t.slice(2),e?(delete define,i.apply(null,Array.prototype.slice.call(arguments,0))):(define=i,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./md","./util"],function(){r.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){var e="undefined"!=typeof process&&process.versions&&process.versions.node,n=null;t.disableNativeCode||!e||process.versions["node-webkit"]||(n=require("crypto")),(t.prng=t.prng||{}).create=function(e){function r(t){if(s.pools[0].messageLength>=32)return o(),t();var e=32-s.pools[0].messageLength<<5;s.seedFile(e,function(e,n){if(e)return t(e);s.collect(n),o(),t()})}function i(){if(s.pools[0].messageLength>=32)return o();var t=32-s.pools[0].messageLength<<5;s.collect(s.seedFileSync(t)),o()}function o(){var t=s.plugin.md.create();t.update(s.pools[0].digest().getBytes()),s.pools[0].start();for(var e=1,n=1;n<32;++n)(e=31===e?2147483648:e<<2)%s.reseeds==0&&(t.update(s.pools[n].digest().getBytes()),s.pools[n].start());var r=t.digest().getBytes();t.start(),t.update(r);var i=t.digest().getBytes();s.key=s.plugin.formatKey(r),s.seed=s.plugin.formatSeed(i),s.reseeds=4294967295===s.reseeds?0:s.reseeds+1,s.generated=0}function a(e){var n=null;if("undefined"!=typeof window){var r=window.crypto||window.msCrypto;r&&r.getRandomValues&&(n=function(t){return r.getRandomValues(t)})}var i=t.util.createBuffer();if(n)for(;i.length()<e;){var o=Math.max(1,Math.min(e-i.length(),65536)/4),a=new Uint32Array(Math.floor(o));try{n(a);for(var s=0;s<a.length;++s)i.putInt32(a[s])}catch(t){if(!("undefined"!=typeof QuotaExceededError&&t instanceof QuotaExceededError))throw t}}if(i.length()<e)for(var u,c,l,h=Math.floor(65536*Math.random());i.length()<e;){c=16807*(65535&h),u=16807*(h>>16),c+=(32767&u)<<16,c+=u>>15,c=(2147483647&c)+(c>>31),h=4294967295&c;for(var s=0;s<3;++s)l=h>>>(s<<3),l^=Math.floor(256*Math.random()),i.putByte(String.fromCharCode(255&l))}return i.getBytes(e)}for(var s={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0},u=e.md,c=new Array(32),l=0;l<32;++l)c[l]=u.create();return s.pools=c,s.pool=0,s.generate=function(e,n){function i(h){if(h)return n(h);if(l.length()>=e)return n(null,l.getBytes(e));if(s.generated>1048575&&(s.key=null),null===s.key)return t.util.nextTick(function(){r(i)});var f=o(s.key,s.seed);s.generated+=f.length,l.putBytes(f),s.key=u(o(s.key,a(s.seed))),s.seed=c(o(s.key,s.seed)),t.util.setImmediate(i)}if(!n)return s.generateSync(e);var o=s.plugin.cipher,a=s.plugin.increment,u=s.plugin.formatKey,c=s.plugin.formatSeed,l=t.util.createBuffer();s.key=null,i()},s.generateSync=function(e){var n=s.plugin.cipher,r=s.plugin.increment,o=s.plugin.formatKey,a=s.plugin.formatSeed;s.key=null;for(var u=t.util.createBuffer();u.length()<e;){s.generated>1048575&&(s.key=null),null===s.key&&i();var c=n(s.key,s.seed);s.generated+=c.length,u.putBytes(c),s.key=o(n(s.key,r(s.seed))),s.seed=a(n(s.key,s.seed))}return u.getBytes(e)},n?(s.seedFile=function(t,e){n.randomBytes(t,function(t,n){if(t)return e(t);e(null,n.toString())})},s.seedFileSync=function(t){return n.randomBytes(t).toString()}):(s.seedFile=function(t,e){try{e(null,a(t))}catch(t){e(t)}},s.seedFileSync=a),s.collect=function(t){for(var e=t.length,n=0;n<e;++n)s.pools[s.pool].update(t.substr(n,1)),s.pool=31===s.pool?0:s.pool+1},s.collectInt=function(t,e){for(var n="",r=0;r<e;r+=8)n+=String.fromCharCode(t>>r&255);s.collect(n)},s.registerWorker=function(t){if(t===self)s.seedFile=function(t,e){function n(t){var r=t.data;r.forge&&r.forge.prng&&(self.removeEventListener("message",n),e(r.forge.prng.err,r.forge.prng.bytes))}self.addEventListener("message",n),self.postMessage({forge:{prng:{needed:t}}})};else{var e=function(e){var n=e.data;n.forge&&n.forge.prng&&s.seedFile(n.forge.prng.needed,function(e,n){t.postMessage({forge:{prng:{err:e,bytes:n}}})})};t.addEventListener("message",e)}},s}}if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var e=!0;define=function(t,e){e(require,module)}}var n,r=function(e,r){r.exports=function(r){var i=n.map(function(t){return e(t)}).concat(t);if(r=r||{},r.defined=r.defined||{},r.defined.prng)return r.prng;r.defined.prng=!0;for(var o=0;o<i.length;++o)i[o](r);return r.prng}},i=define;define=function(t,r){return n="string"==typeof t?r.slice(2):t.slice(2),e?(delete define,i.apply(null,Array.prototype.slice.call(arguments,0))):(define=i,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./md","./util"],function(){r.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){t.random&&t.random.getBytes||function(e){function n(){var e=t.prng.create(r);return e.getBytes=function(t,n){return e.generate(t,n)},e.getBytesSync=function(t){return e.generate(t)},e}var r={},i=new Array(4),o=t.util.createBuffer();r.formatKey=function(e){var n=t.util.createBuffer(e);return e=new Array(4),e[0]=n.getInt32(),e[1]=n.getInt32(),e[2]=n.getInt32(),e[3]=n.getInt32(),t.aes._expandKey(e,!1)},r.formatSeed=function(e){var n=t.util.createBuffer(e);return e=new Array(4),e[0]=n.getInt32(),e[1]=n.getInt32(),e[2]=n.getInt32(),e[3]=n.getInt32(),e},r.cipher=function(e,n){return t.aes._updateBlock(e,n,i,!1),o.putInt32(i[0]),o.putInt32(i[1]),o.putInt32(i[2]),o.putInt32(i[3]),o.getBytes()},r.increment=function(t){return++t[3],t},r.md=t.md.sha256;var a=n(),s="undefined"!=typeof process&&process.versions&&process.versions.node,u=null;if("undefined"!=typeof window){var c=window.crypto||window.msCrypto;c&&c.getRandomValues&&(u=function(t){return c.getRandomValues(t)})}if(t.disableNativeCode||!s&&!u){if("undefined"==typeof window||window.document,a.collectInt(+new Date,32),"undefined"!=typeof navigator){var l="";for(var h in navigator)try{"string"==typeof navigator[h]&&(l+=navigator[h])}catch(t){}a.collect(l),l=null}e&&(e().mousemove(function(t){a.collectInt(t.clientX,16),a.collectInt(t.clientY,16)}),e().keypress(function(t){a.collectInt(t.charCode,8)}))}if(t.random)for(var h in a)t.random[h]=a[h];else t.random=a;t.random.createInstance=n}("undefined"!=typeof jQuery?jQuery:null)}var e="random";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var n=!0;define=function(t,e){e(require,module)}}var r,i=function(n,i){i.exports=function(i){var o=r.map(function(t){return n(t)}).concat(t);if(i=i||{},i.defined=i.defined||{},i.defined[e])return i[e];i.defined[e]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[e]}},o=define;define=function(t,e){return r="string"==typeof t?e.slice(2):t.slice(2),n?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./aes","./md","./prng","./util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){function e(t,e,n){this.data=[],null!=t&&("number"==typeof t?this.fromNumber(t,e,n):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function n(){return new e(null)}function r(t,e,n,r,i,o){for(;--o>=0;){var a=e*this.data[t++]+n.data[r]+i;i=Math.floor(a/67108864),n.data[r++]=67108863&a}return i}function i(t,e,n,r,i,o){for(var a=32767&e,s=e>>15;--o>=0;){var u=32767&this.data[t],c=this.data[t++]>>15,l=s*u+c*a;u=a*u+((32767&l)<<15)+n.data[r]+(1073741823&i),i=(u>>>30)+(l>>>15)+s*c+(i>>>30),n.data[r++]=1073741823&u}return i}function o(t,e,n,r,i,o){for(var a=16383&e,s=e>>14;--o>=0;){var u=16383&this.data[t],c=this.data[t++]>>14,l=s*u+c*a;u=a*u+((16383&l)<<14)+n.data[r]+i,i=(u>>28)+(l>>14)+s*c,n.data[r++]=268435455&u}return i}function a(t){return ne.charAt(t)}function s(t,e){var n=re[t.charCodeAt(e)];return null==n?-1:n}function u(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function c(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function l(t){var e=n();return e.fromInt(t),e}function h(t,n){var r;if(16==n)r=4;else if(8==n)r=3;else if(256==n)r=8;else if(2==n)r=1;else if(32==n)r=5;else{if(4!=n)return void this.fromRadix(t,n);r=2}this.t=0,this.s=0;for(var i=t.length,o=!1,a=0;--i>=0;){var u=8==r?255&t[i]:s(t,i);u<0?"-"==t.charAt(i)&&(o=!0):(o=!1,0==a?this.data[this.t++]=u:a+r>this.DB?(this.data[this.t-1]|=(u&(1<<this.DB-a)-1)<<a,this.data[this.t++]=u>>this.DB-a):this.data[this.t-1]|=u<<a,(a+=r)>=this.DB&&(a-=this.DB))}8==r&&0!=(128&t[0])&&(this.s=-1,a>0&&(this.data[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),o&&e.ZERO.subTo(this,this)}function f(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function d(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var n,r=(1<<e)-1,i=!1,o="",s=this.t,u=this.DB-s*this.DB%e;if(s-- >0)for(u<this.DB&&(n=this.data[s]>>u)>0&&(i=!0,o=a(n));s>=0;)u<e?(n=(this.data[s]&(1<<u)-1)<<e-u,n|=this.data[--s]>>(u+=this.DB-e)):(n=this.data[s]>>(u-=e)&r,u<=0&&(u+=this.DB,--s)),n>0&&(i=!0),i&&(o+=a(n));return i?o:"0"}function p(){var t=n();return e.ZERO.subTo(this,t),t}function y(){return this.s<0?this.negate():this}function g(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(0!=(e=n-t.t))return this.s<0?-e:e;for(;--n>=0;)if(0!=(e=this.data[n]-t.data[n]))return e;return 0}function m(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}function v(){return this.t<=0?0:this.DB*(this.t-1)+m(this.data[this.t-1]^this.s&this.DM)}function S(t,e){var n;for(n=this.t-1;n>=0;--n)e.data[n+t]=this.data[n];for(n=t-1;n>=0;--n)e.data[n]=0;e.t=this.t+t,e.s=this.s}function b(t,e){for(var n=t;n<this.t;++n)e.data[n-t]=this.data[n];e.t=Math.max(this.t-t,0),e.s=this.s}function B(t,e){var n,r=t%this.DB,i=this.DB-r,o=(1<<i)-1,a=Math.floor(t/this.DB),s=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)e.data[n+a+1]=this.data[n]>>i|s,s=(this.data[n]&o)<<r;for(n=a-1;n>=0;--n)e.data[n]=0;e.data[a]=s,e.t=this.t+a+1,e.s=this.s,e.clamp()}function A(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)return void(e.t=0);var r=t%this.DB,i=this.DB-r,o=(1<<r)-1;e.data[0]=this.data[n]>>r;for(var a=n+1;a<this.t;++a)e.data[a-n-1]|=(this.data[a]&o)<<i,e.data[a-n]=this.data[a]>>r;r>0&&(e.data[this.t-n-1]|=(this.s&o)<<i),e.t=this.t-n,e.clamp()}function I(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this.data[n]-t.data[n],e.data[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;n<this.t;)r+=this.data[n],e.data[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r-=t.data[n],e.data[n++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e.data[n++]=this.DV+r:r>0&&(e.data[n++]=r),e.t=n,e.clamp()}function w(t,n){var r=this.abs(),i=t.abs(),o=r.t;for(n.t=o+i.t;--o>=0;)n.data[o]=0;for(o=0;o<i.t;++o)n.data[o+r.t]=r.am(0,i.data[o],n,o,0,r.t);n.s=0,n.clamp(),this.s!=t.s&&e.ZERO.subTo(n,n)}function C(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t.data[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e.data[n],t,2*n,0,1);(t.data[n+e.t]+=e.am(n+1,2*e.data[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t.data[n+e.t]-=e.DV,t.data[n+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(n,e.data[n],t,2*n,0,1)),t.s=0,t.clamp()}function T(t,r,i){var o=t.abs();if(!(o.t<=0)){var a=this.abs();if(a.t<o.t)return null!=r&&r.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=n());var s=n(),u=this.s,c=t.s,l=this.DB-m(o.data[o.t-1]);l>0?(o.lShiftTo(l,s),a.lShiftTo(l,i)):(o.copyTo(s),a.copyTo(i));var h=s.t,f=s.data[h-1];if(0!=f){var d=f*(1<<this.F1)+(h>1?s.data[h-2]>>this.F2:0),p=this.FV/d,y=(1<<this.F1)/d,g=1<<this.F2,v=i.t,S=v-h,b=null==r?n():r;for(s.dlShiftTo(S,b),i.compareTo(b)>=0&&(i.data[i.t++]=1,i.subTo(b,i)),e.ONE.dlShiftTo(h,b),b.subTo(s,s);s.t<h;)s.data[s.t++]=0;for(;--S>=0;){var B=i.data[--v]==f?this.DM:Math.floor(i.data[v]*p+(i.data[v-1]+g)*y);if((i.data[v]+=s.am(0,B,i,S,0,h))<B)for(s.dlShiftTo(S,b),i.subTo(b,i);i.data[v]<--B;)i.subTo(b,i)}null!=r&&(i.drShiftTo(h,r),u!=c&&e.ZERO.subTo(r,r)),i.t=h,i.clamp(),l>0&&i.rShiftTo(l,i),u<0&&e.ZERO.subTo(i,i)}}}function k(t){var r=n();return this.abs().divRemTo(t,null,r),this.s<0&&r.compareTo(e.ZERO)>0&&t.subTo(r,r),r}function P(t){this.m=t}function E(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function R(t){return t}function N(t){t.divRemTo(this.m,null,t)}function _(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function L(t,e){t.squareTo(e),this.reduce(e)}function O(){if(this.t<1)return 0;var t=this.data[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function D(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function U(t){var r=n();return t.abs().dlShiftTo(this.m.t,r),r.divRemTo(this.m,null,r),t.s<0&&r.compareTo(e.ZERO)>0&&this.m.subTo(r,r),r}function M(t){var e=n();return t.copyTo(e),this.reduce(e),e}function x(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t.data[e],r=n*this.mpl+((n*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(n=e+this.m.t,
t.data[n]+=this.m.am(0,r,t,e,0,this.m.t);t.data[n]>=t.DV;)t.data[n]-=t.DV,t.data[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function V(t,e){t.squareTo(e),this.reduce(e)}function j(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function K(){return 0==(this.t>0?1&this.data[0]:this.s)}function q(t,r){if(t>4294967295||t<1)return e.ONE;var i=n(),o=n(),a=r.convert(this),s=m(t)-1;for(a.copyTo(i);--s>=0;)if(r.sqrTo(i,o),(t&1<<s)>0)r.mulTo(o,a,i);else{var u=i;i=o,o=u}return r.revert(i)}function F(t,e){var n;return n=t<256||e.isEven()?new P(e):new D(e),this.exp(t,n)}function G(){var t=n();return this.copyTo(t),t}function z(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function H(){return 0==this.t?this.s:this.data[0]<<24>>24}function W(){return 0==this.t?this.s:this.data[0]<<16>>16}function J(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function X(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1}function Q(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),i=l(r),o=n(),a=n(),s="";for(this.divRemTo(i,o,a);o.signum()>0;)s=(r+a.intValue()).toString(t).substr(1)+s,o.divRemTo(i,o,a);return a.intValue().toString(t)+s}function Z(t,n){this.fromInt(0),null==n&&(n=10);for(var r=this.chunkSize(n),i=Math.pow(n,r),o=!1,a=0,u=0,c=0;c<t.length;++c){var l=s(t,c);l<0?"-"==t.charAt(c)&&0==this.signum()&&(o=!0):(u=n*u+l,++a>=r&&(this.dMultiply(i),this.dAddOffset(u,0),a=0,u=0))}a>0&&(this.dMultiply(Math.pow(n,a)),this.dAddOffset(u,0)),o&&e.ZERO.subTo(this,this)}function Y(t,n,r){if("number"==typeof n)if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(e.ONE.shiftLeft(t-1),at,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(n);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(e.ONE.shiftLeft(t-1),this);else{var i=new Array,o=7&t;i.length=1+(t>>3),n.nextBytes(i),o>0?i[0]&=(1<<o)-1:i[0]=0,this.fromString(i,256)}}function $(){var t=this.t,e=new Array;e[0]=this.s;var n,r=this.DB-t*this.DB%8,i=0;if(t-- >0)for(r<this.DB&&(n=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this.data[t]&(1<<r)-1)<<8-r,n|=this.data[--t]>>(r+=this.DB-8)):(n=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),0!=(128&n)&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}function tt(t){return 0==this.compareTo(t)}function et(t){return this.compareTo(t)<0?this:t}function nt(t){return this.compareTo(t)>0?this:t}function rt(t,e,n){var r,i,o=Math.min(t.t,this.t);for(r=0;r<o;++r)n.data[r]=e(this.data[r],t.data[r]);if(t.t<this.t){for(i=t.s&this.DM,r=o;r<this.t;++r)n.data[r]=e(this.data[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=o;r<t.t;++r)n.data[r]=e(i,t.data[r]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()}function it(t,e){return t&e}function ot(t){var e=n();return this.bitwiseTo(t,it,e),e}function at(t,e){return t|e}function st(t){var e=n();return this.bitwiseTo(t,at,e),e}function ut(t,e){return t^e}function ct(t){var e=n();return this.bitwiseTo(t,ut,e),e}function lt(t,e){return t&~e}function ht(t){var e=n();return this.bitwiseTo(t,lt,e),e}function ft(){for(var t=n(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function dt(t){var e=n();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function pt(t){var e=n();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function yt(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function gt(){for(var t=0;t<this.t;++t)if(0!=this.data[t])return t*this.DB+yt(this.data[t]);return this.s<0?this.t*this.DB:-1}function mt(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function vt(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=mt(this.data[n]^e);return t}function St(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this.data[e]&1<<t%this.DB)}function bt(t,n){var r=e.ONE.shiftLeft(t);return this.bitwiseTo(r,n,r),r}function Bt(t){return this.changeBit(t,at)}function At(t){return this.changeBit(t,lt)}function It(t){return this.changeBit(t,ut)}function wt(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this.data[n]+t.data[n],e.data[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;n<this.t;)r+=this.data[n],e.data[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r+=t.data[n],e.data[n++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,r>0?e.data[n++]=r:r<-1&&(e.data[n++]=this.DV+r),e.t=n,e.clamp()}function Ct(t){var e=n();return this.addTo(t,e),e}function Tt(t){var e=n();return this.subTo(t,e),e}function kt(t){var e=n();return this.multiplyTo(t,e),e}function Pt(t){var e=n();return this.divRemTo(t,e,null),e}function Et(t){var e=n();return this.divRemTo(t,null,e),e}function Rt(t){var e=n(),r=n();return this.divRemTo(t,e,r),new Array(e,r)}function Nt(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function _t(t,e){if(0!=t){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function Lt(){}function Ot(t){return t}function Dt(t,e,n){t.multiplyTo(e,n)}function Ut(t,e){t.squareTo(e)}function Mt(t){return this.exp(t,new Lt)}function xt(t,e,n){var r=Math.min(this.t+t.t,e);for(n.s=0,n.t=r;r>0;)n.data[--r]=0;var i;for(i=n.t-this.t;r<i;++r)n.data[r+this.t]=this.am(0,t.data[r],n,r,0,this.t);for(i=Math.min(t.t,e);r<i;++r)this.am(0,t.data[r],n,r,0,e-r);n.clamp()}function Vt(t,e,n){--e;var r=n.t=this.t+t.t-e;for(n.s=0;--r>=0;)n.data[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)n.data[this.t+r-e]=this.am(e-r,t.data[r],n,0,0,this.t+r-e);n.clamp(),n.drShiftTo(1,n)}function jt(t){this.r2=n(),this.q3=n(),e.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function Kt(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=n();return t.copyTo(e),this.reduce(e),e}function qt(t){return t}function Ft(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function Gt(t,e){t.squareTo(e),this.reduce(e)}function zt(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function Ht(t,e){var r,i,o=t.bitLength(),a=l(1);if(o<=0)return a;r=o<18?1:o<48?3:o<144?4:o<768?5:6,i=o<8?new P(e):e.isEven()?new jt(e):new D(e);var s=new Array,u=3,c=r-1,h=(1<<r)-1;if(s[1]=i.convert(this),r>1){var f=n();for(i.sqrTo(s[1],f);u<=h;)s[u]=n(),i.mulTo(f,s[u-2],s[u]),u+=2}var d,p,y=t.t-1,g=!0,v=n();for(o=m(t.data[y])-1;y>=0;){for(o>=c?d=t.data[y]>>o-c&h:(d=(t.data[y]&(1<<o+1)-1)<<c-o,y>0&&(d|=t.data[y-1]>>this.DB+o-c)),u=r;0==(1&d);)d>>=1,--u;if((o-=u)<0&&(o+=this.DB,--y),g)s[d].copyTo(a),g=!1;else{for(;u>1;)i.sqrTo(a,v),i.sqrTo(v,a),u-=2;u>0?i.sqrTo(a,v):(p=a,a=v,v=p),i.mulTo(v,s[d],a)}for(;y>=0&&0==(t.data[y]&1<<o);)i.sqrTo(a,v),p=a,a=v,v=p,--o<0&&(o=this.DB-1,--y)}return i.revert(a)}function Wt(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var r=e;e=n,n=r}var i=e.getLowestSetBit(),o=n.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),n.rShiftTo(o,n));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),e.compareTo(n)>=0?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return o>0&&n.lShiftTo(o,n),n}function Jt(t){if(t<=0)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(this.t>0)if(0==e)n=this.data[0]%t;else for(var r=this.t-1;r>=0;--r)n=(e*n+this.data[r])%t;return n}function Xt(t){var n=t.isEven();if(this.isEven()&&n||0==t.signum())return e.ZERO;for(var r=t.clone(),i=this.clone(),o=l(1),a=l(0),s=l(0),u=l(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),n?(o.isEven()&&a.isEven()||(o.addTo(this,o),a.subTo(t,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);for(;i.isEven();)i.rShiftTo(1,i),n?(s.isEven()&&u.isEven()||(s.addTo(this,s),u.subTo(t,u)),s.rShiftTo(1,s)):u.isEven()||u.subTo(t,u),u.rShiftTo(1,u);r.compareTo(i)>=0?(r.subTo(i,r),n&&o.subTo(s,o),a.subTo(u,a)):(i.subTo(r,i),n&&s.subTo(o,s),u.subTo(a,u))}return 0!=i.compareTo(e.ONE)?e.ZERO:u.compareTo(t)>=0?u.subtract(t):u.signum()<0?(u.addTo(t,u),u.signum()<0?u.add(t):u):u}function Qt(t){var e,n=this.abs();if(1==n.t&&n.data[0]<=ie[ie.length-1]){for(e=0;e<ie.length;++e)if(n.data[0]==ie[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<ie.length;){for(var r=ie[e],i=e+1;i<ie.length&&r<oe;)r*=ie[i++];for(r=n.modInt(r);e<i;)if(r%ie[e++]==0)return!1}return n.millerRabin(t)}function Zt(t){var n=this.subtract(e.ONE),r=n.getLowestSetBit();if(r<=0)return!1;for(var i,o=n.shiftRight(r),a=Yt(),s=0;s<t;++s){do{i=new e(this.bitLength(),a)}while(i.compareTo(e.ONE)<=0||i.compareTo(n)>=0);var u=i.modPow(o,this);if(0!=u.compareTo(e.ONE)&&0!=u.compareTo(n)){for(var c=1;c++<r&&0!=u.compareTo(n);)if(u=u.modPowInt(2,this),0==u.compareTo(e.ONE))return!1;if(0!=u.compareTo(n))return!1}}return!0}function Yt(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(256*Math.random())}}}var $t;"undefined"==typeof navigator?(e.prototype.am=o,$t=28):"Microsoft Internet Explorer"==navigator.appName?(e.prototype.am=i,$t=30):"Netscape"!=navigator.appName?(e.prototype.am=r,$t=26):(e.prototype.am=o,$t=28),e.prototype.DB=$t,e.prototype.DM=(1<<$t)-1,e.prototype.DV=1<<$t;e.prototype.FV=Math.pow(2,52),e.prototype.F1=52-$t,e.prototype.F2=2*$t-52;var te,ee,ne="0123456789abcdefghijklmnopqrstuvwxyz",re=new Array;for(te="0".charCodeAt(0),ee=0;ee<=9;++ee)re[te++]=ee;for(te="a".charCodeAt(0),ee=10;ee<36;++ee)re[te++]=ee;for(te="A".charCodeAt(0),ee=10;ee<36;++ee)re[te++]=ee;P.prototype.convert=E,P.prototype.revert=R,P.prototype.reduce=N,P.prototype.mulTo=_,P.prototype.sqrTo=L,D.prototype.convert=U,D.prototype.revert=M,D.prototype.reduce=x,D.prototype.mulTo=j,D.prototype.sqrTo=V,e.prototype.copyTo=u,e.prototype.fromInt=c,e.prototype.fromString=h,e.prototype.clamp=f,e.prototype.dlShiftTo=S,e.prototype.drShiftTo=b,e.prototype.lShiftTo=B,e.prototype.rShiftTo=A,e.prototype.subTo=I,e.prototype.multiplyTo=w,e.prototype.squareTo=C,e.prototype.divRemTo=T,e.prototype.invDigit=O,e.prototype.isEven=K,e.prototype.exp=q,e.prototype.toString=d,e.prototype.negate=p,e.prototype.abs=y,e.prototype.compareTo=g,e.prototype.bitLength=v,e.prototype.mod=k,e.prototype.modPowInt=F,e.ZERO=l(0),e.ONE=l(1),Lt.prototype.convert=Ot,Lt.prototype.revert=Ot,Lt.prototype.mulTo=Dt,Lt.prototype.sqrTo=Ut,jt.prototype.convert=Kt,jt.prototype.revert=qt,jt.prototype.reduce=Ft,jt.prototype.mulTo=zt,jt.prototype.sqrTo=Gt;var ie=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],oe=(1<<26)/ie[ie.length-1];e.prototype.chunkSize=J,e.prototype.toRadix=Q,e.prototype.fromRadix=Z,e.prototype.fromNumber=Y,e.prototype.bitwiseTo=rt,e.prototype.changeBit=bt,e.prototype.addTo=wt,e.prototype.dMultiply=Nt,e.prototype.dAddOffset=_t,e.prototype.multiplyLowerTo=xt,e.prototype.multiplyUpperTo=Vt,e.prototype.modInt=Jt,e.prototype.millerRabin=Zt,e.prototype.clone=G,e.prototype.intValue=z,e.prototype.byteValue=H,e.prototype.shortValue=W,e.prototype.signum=X,e.prototype.toByteArray=$,e.prototype.equals=tt,e.prototype.min=et,e.prototype.max=nt,e.prototype.and=ot,e.prototype.or=st,e.prototype.xor=ct,e.prototype.andNot=ht,e.prototype.not=ft,e.prototype.shiftLeft=dt,e.prototype.shiftRight=pt,e.prototype.getLowestSetBit=gt,e.prototype.bitCount=vt,e.prototype.testBit=St,e.prototype.setBit=Bt,e.prototype.clearBit=At,e.prototype.flipBit=It,e.prototype.add=Ct,e.prototype.subtract=Tt,e.prototype.multiply=kt,e.prototype.divide=Pt,e.prototype.remainder=Et,e.prototype.divideAndRemainder=Rt,e.prototype.modPow=Ht,e.prototype.modInverse=Xt,e.prototype.pow=Mt,e.prototype.gcd=Wt,e.prototype.isProbablePrime=Qt,t.jsbn=t.jsbn||{},t.jsbn.BigInteger=e}if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var e=!0;define=function(t,e){e(require,module)}}var n,r=function(e,r){r.exports=function(r){var i=n.map(function(t){return e(t)}).concat(t);if(r=r||{},r.defined=r.defined||{},r.defined.jsbn)return r.jsbn;r.defined.jsbn=!0;for(var o=0;o<i.length;++o)i[o](r);return r.jsbn}},i=define;define=function(t,r){return n="string"==typeof t?r.slice(2):t.slice(2),e?(delete define,i.apply(null,Array.prototype.slice.call(arguments,0))):(define=i,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module"],function(){r.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){function e(e,n,r){r||(r=t.md.sha1.create());for(var i="",o=Math.ceil(n/r.digestLength),a=0;a<o;++a){var s=String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,255&a);r.start(),r.update(e+s),i+=r.digest().getBytes()}return i.substring(0,n)}var n=t.pkcs1=t.pkcs1||{};n.encode_rsa_oaep=function(n,r,i){var o,a,s,u;"string"==typeof i?(o=i,a=arguments[3]||void 0,s=arguments[4]||void 0):i&&(o=i.label||void 0,a=i.seed||void 0,s=i.md||void 0,i.mgf1&&i.mgf1.md&&(u=i.mgf1.md)),s?s.start():s=t.md.sha1.create(),u||(u=s);var c=Math.ceil(n.n.bitLength()/8),l=c-2*s.digestLength-2;if(r.length>l){var h=new Error("RSAES-OAEP input message length is too long.");throw h.length=r.length,h.maxLength=l,h}o||(o=""),s.update(o,"raw");for(var f=s.digest(),d="",p=l-r.length,y=0;y<p;y++)d+="\0";var g=f.getBytes()+d+""+r;if(a){if(a.length!==s.digestLength){var h=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw h.seedLength=a.length,h.digestLength=s.digestLength,h}}else a=t.random.getBytes(s.digestLength);var m=e(a,c-s.digestLength-1,u),v=t.util.xorBytes(g,m,g.length),S=e(v,s.digestLength,u);return"\0"+t.util.xorBytes(a,S,a.length)+v},n.decode_rsa_oaep=function(n,r,i){var o,a,s;"string"==typeof i?(o=i,a=arguments[3]||void 0):i&&(o=i.label||void 0,a=i.md||void 0,i.mgf1&&i.mgf1.md&&(s=i.mgf1.md));var u=Math.ceil(n.n.bitLength()/8);if(r.length!==u){var c=new Error("RSAES-OAEP encoded message length is invalid.");throw c.length=r.length,c.expectedLength=u,c}if(void 0===a?a=t.md.sha1.create():a.start(),s||(s=a),u<2*a.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");o||(o=""),a.update(o,"raw");for(var l=a.digest().getBytes(),h=r.charAt(0),f=r.substring(1,a.digestLength+1),d=r.substring(1+a.digestLength),p=e(d,a.digestLength,s),y=t.util.xorBytes(f,p,f.length),g=e(y,u-a.digestLength-1,s),m=t.util.xorBytes(d,g,d.length),v=m.substring(0,a.digestLength),c="\0"!==h,S=0;S<a.digestLength;++S)c|=l.charAt(S)!==v.charAt(S);for(var b=1,B=a.digestLength,A=a.digestLength;A<m.length;A++){var I=m.charCodeAt(A),w=1&I^1;c|=I&(b?65534:0),b&=w,B+=b}if(c||1!==m.charCodeAt(B))throw new Error("Invalid RSAES-OAEP padding.");return m.substring(B+1)}}if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var e=!0;define=function(t,e){e(require,module)}}var n,r=function(e,r){r.exports=function(r){var i=n.map(function(t){return e(t)}).concat(t);if(r=r||{},r.defined=r.defined||{},r.defined.pkcs1)return r.pkcs1;r.defined.pkcs1=!0;for(var o=0;o<i.length;++o)i[o](r);return r.pkcs1}},i=define;define=function(t,r){return n="string"==typeof t?r.slice(2):t.slice(2),e?(delete define,i.apply(null,Array.prototype.slice.call(arguments,0))):(define=i,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./util","./random","./sha1"],function(){r.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){function e(e,n,r){var i=t.util.createBuffer(),o=Math.ceil(n.n.bitLength()/8);if(e.length>o-11){var a=new Error("Message is too long for PKCS#1 v1.5 padding.");throw a.length=e.length,a.max=o-11,a}i.putByte(0),i.putByte(r);var s,u=o-3-e.length;if(0===r||1===r){s=0===r?0:255;for(var c=0;c<u;++c)i.putByte(s)}else for(;u>0;){for(var l=0,h=t.random.getBytes(u),c=0;c<u;++c)s=h.charCodeAt(c),0===s?++l:i.putByte(s);u=l}return i.putByte(0),i.putBytes(e),i}function n(e,n,r,i){var o=Math.ceil(n.n.bitLength()/8),a=t.util.createBuffer(e),s=a.getByte(),u=a.getByte();if(0!==s||r&&0!==u&&1!==u||!r&&2!=u||r&&0===u&&void 0===i)throw new Error("Encryption block is invalid.");var c=0;if(0===u){c=o-3-i;for(var l=0;l<c;++l)if(0!==a.getByte())throw new Error("Encryption block is invalid.")}else if(1===u)for(c=0;a.length()>1;){if(255!==a.getByte()){--a.read;break}++c}else if(2===u)for(c=0;a.length()>1;){if(0===a.getByte()){--a.read;break}++c}if(0!==a.getByte()||c!==o-3-a.length())throw new Error("Encryption block is invalid.");return a.getBytes()}function r(e,n,r){function i(){o(e.pBits,function(t,n){return t?r(t):(e.p=n,null!==e.q?a(t,e.q):void o(e.qBits,a))})}function o(e,n){t.prime.generateProbablePrime(e,s,n)}function a(t,n){if(t)return r(t);if(e.q=n,e.p.compareTo(e.q)<0){var s=e.p;e.p=e.q,e.q=s}if(0!==e.p.subtract(c.ONE).gcd(e.e).compareTo(c.ONE))return e.p=null,void i();if(0!==e.q.subtract(c.ONE).gcd(e.e).compareTo(c.ONE))return e.q=null,void o(e.qBits,a);if(e.p1=e.p.subtract(c.ONE),e.q1=e.q.subtract(c.ONE),e.phi=e.p1.multiply(e.q1),0!==e.phi.gcd(e.e).compareTo(c.ONE))return e.p=e.q=null,void i();if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits)return e.q=null,void o(e.qBits,a);var u=e.e.modInverse(e.phi);e.keys={privateKey:h.rsa.setPrivateKey(e.n,e.e,u,e.p,e.q,u.mod(e.p1),u.mod(e.q1),e.q.modInverse(e.p)),publicKey:h.rsa.setPublicKey(e.n,e.e)},r(null,e.keys)}"function"==typeof n&&(r=n,n={}),n=n||{};var s={algorithm:{name:n.algorithm||"PRIMEINC",options:{workers:n.workers||2,workLoad:n.workLoad||100,workerScript:n.workerScript}}};"prng"in n&&(s.prng=n.prng),i()}function i(e){var n=e.toString(16);n[0]>="8"&&(n="00"+n);var r=t.util.hexToBytes(n);return r.length>1&&(0===r.charCodeAt(0)&&0==(128&r.charCodeAt(1))||255===r.charCodeAt(0)&&128==(128&r.charCodeAt(1)))?r.substr(1):r}function o(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function a(t){return"undefined"!=typeof window&&"object"==typeof window.crypto&&"object"==typeof window.crypto.subtle&&"function"==typeof window.crypto.subtle[t]}function s(t){return"undefined"!=typeof window&&"object"==typeof window.msCrypto&&"object"==typeof window.msCrypto.subtle&&"function"==typeof window.msCrypto.subtle[t]}function u(e){for(var n=t.util.hexToBytes(e.toString(16)),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}if(void 0===c)var c=t.jsbn.BigInteger;var l=t.asn1;t.pki=t.pki||{},t.pki.rsa=t.rsa=t.rsa||{};var h=t.pki,f=[6,4,2,4,2,4,6,2],d={name:"PrivateKeyInfo",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:l.Class.UNIVERSAL,type:l.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:l.Class.UNIVERSAL,type:l.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},p={name:"RSAPrivateKey",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},y={name:"RSAPublicKey",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},g=t.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:l.Class.UNIVERSAL,type:l.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:l.Class.UNIVERSAL,type:l.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},m=function(t){var e;if(!(t.algorithm in h.oids)){var n=new Error("Unknown message digest algorithm.");throw n.algorithm=t.algorithm,n}e=h.oids[t.algorithm];var r=l.oidToDer(e).getBytes(),i=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[]),o=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[]);o.value.push(l.create(l.Class.UNIVERSAL,l.Type.OID,!1,r)),o.value.push(l.create(l.Class.UNIVERSAL,l.Type.NULL,!1,""));var a=l.create(l.Class.UNIVERSAL,l.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(o),i.value.push(a),l.toDer(i).getBytes()},v=function(e,n,r){if(r)return e.modPow(n.e,n.n);if(!n.p||!n.q)return e.modPow(n.d,n.n);n.dP||(n.dP=n.d.mod(n.p.subtract(c.ONE))),n.dQ||(n.dQ=n.d.mod(n.q.subtract(c.ONE))),n.qInv||(n.qInv=n.q.modInverse(n.p));var i;do{i=new c(t.util.bytesToHex(t.random.getBytes(n.n.bitLength()/8)),16)}while(i.compareTo(n.n)>=0||!i.gcd(n.n).equals(c.ONE));e=e.multiply(i.modPow(n.e,n.n)).mod(n.n);for(var o=e.mod(n.p).modPow(n.dP,n.p),a=e.mod(n.q).modPow(n.dQ,n.q);o.compareTo(a)<0;)o=o.add(n.p);var s=o.subtract(a).multiply(n.qInv).mod(n.p).multiply(n.q).add(a);return s=s.multiply(i.modInverse(n.n)).mod(n.n)};h.rsa.encrypt=function(n,r,i){var o,a=i,s=Math.ceil(r.n.bitLength()/8);!1!==i&&!0!==i?(a=2===i,o=e(n,r,i)):(o=t.util.createBuffer(),o.putBytes(n));for(var u=new c(o.toHex(),16),l=v(u,r,a),h=l.toString(16),f=t.util.createBuffer(),d=s-Math.ceil(h.length/2);d>0;)f.putByte(0),--d;return f.putBytes(t.util.hexToBytes(h)),f.getBytes()},h.rsa.decrypt=function(e,r,i,o){var a=Math.ceil(r.n.bitLength()/8);if(e.length!==a){var s=new Error("Encrypted message length is invalid.");throw s.length=e.length,s.expected=a,s}var u=new c(t.util.createBuffer(e).toHex(),16);if(u.compareTo(r.n)>=0)throw new Error("Encrypted message is invalid.");for(var l=v(u,r,i),h=l.toString(16),f=t.util.createBuffer(),d=a-Math.ceil(h.length/2);d>0;)f.putByte(0),--d;return f.putBytes(t.util.hexToBytes(h)),!1!==o?n(f.getBytes(),r,i):f.getBytes()},h.rsa.createKeyPairGenerationState=function(e,n,r){"string"==typeof e&&(e=parseInt(e,10)),e=e||2048,r=r||{};var i,o=r.prng||t.random,a={nextBytes:function(t){for(var e=o.getBytesSync(t.length),n=0;n<t.length;++n)t[n]=e.charCodeAt(n)}},s=r.algorithm||"PRIMEINC";if("PRIMEINC"!==s)throw new Error("Invalid key generation algorithm: "+s);return i={algorithm:s,state:0,bits:e,rng:a,eInt:n||65537,e:new c(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null},i.e.fromInt(i.eInt),i},h.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var n=new c(null);n.fromInt(30);for(var r,i=0,a=function(t,e){return t|e},s=+new Date,u=0;null===t.keys&&(e<=0||u<e);){if(0===t.state){var l=null===t.p?t.pBits:t.qBits,d=l-1;0===t.pqState?(t.num=new c(l,t.rng),t.num.testBit(d)||t.num.bitwiseTo(c.ONE.shiftLeft(d),a,t.num),t.num.dAddOffset(31-t.num.mod(n).byteValue(),0),i=0,++t.pqState):1===t.pqState?t.num.bitLength()>l?t.pqState=0:t.num.isProbablePrime(o(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(f[i++%8],0):2===t.pqState?t.pqState=0===t.num.subtract(c.ONE).gcd(t.e).compareTo(c.ONE)?3:0:3===t.pqState&&(t.pqState=0,null===t.p?t.p=t.num:t.q=t.num,null!==t.p&&null!==t.q&&++t.state,t.num=null)}else if(1===t.state)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(2===t.state)t.p1=t.p.subtract(c.ONE),t.q1=t.q.subtract(c.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(3===t.state)0===t.phi.gcd(t.e).compareTo(c.ONE)?++t.state:(t.p=null,t.q=null,t.state=0);else if(4===t.state)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(5===t.state){var p=t.e.modInverse(t.phi);t.keys={privateKey:h.rsa.setPrivateKey(t.n,t.e,p,t.p,t.q,p.mod(t.p1),p.mod(t.q1),t.q.modInverse(t.p)),publicKey:h.rsa.setPublicKey(t.n,t.e)}}r=+new Date,u+=r-s,s=r}return null!==t.keys},h.rsa.generateKeyPair=function(e,n,i,o){if(1===arguments.length?"object"==typeof e?(i=e,e=void 0):"function"==typeof e&&(o=e,e=void 0):2===arguments.length?"number"==typeof e?"function"==typeof n?(o=n,n=void 0):"number"!=typeof n&&(i=n,n=void 0):(i=e,o=n,e=void 0,n=void 0):3===arguments.length&&("number"==typeof n?"function"==typeof i&&(o=i,i=void 0):(o=i,i=n,n=void 0)),i=i||{},void 0===e&&(e=i.bits||2048),void 0===n&&(n=i.e||65537),!t.disableNativeCode&&o&&e>=256&&e<=16384&&(65537===n||3===n)){if(a("generateKey")&&a("exportKey"))return window.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:u(n),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(t){return window.crypto.subtle.exportKey("pkcs8",t.privateKey)}).catch(function(t){o(t)}).then(function(e){if(e){var n=h.privateKeyFromAsn1(l.fromDer(t.util.createBuffer(e)));o(null,{privateKey:n,publicKey:h.setRsaPublicKey(n.n,n.e)})}});if(s("generateKey")&&s("exportKey")){var c=window.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:u(n),hash:{name:"SHA-256"}},!0,["sign","verify"]);return c.oncomplete=function(e){var n=e.target.result,r=window.msCrypto.subtle.exportKey("pkcs8",n.privateKey);r.oncomplete=function(e){var n=e.target.result,r=h.privateKeyFromAsn1(l.fromDer(t.util.createBuffer(n)));o(null,{privateKey:r,publicKey:h.setRsaPublicKey(r.n,r.e)})},r.onerror=function(t){o(t)}},void(c.onerror=function(t){o(t)})}}var f=h.rsa.createKeyPairGenerationState(e,n,i);if(!o)return h.rsa.stepKeyPairGenerationState(f,0),f.keys;r(f,i,o)},h.setRsaPublicKey=h.rsa.setPublicKey=function(r,i){var o={n:r,e:i};return o.encrypt=function(n,r,i){if("string"==typeof r?r=r.toUpperCase():void 0===r&&(r="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===r)r={encode:function(t,n,r){return e(t,n,2).getBytes()}};else if("RSA-OAEP"===r||"RSAES-OAEP"===r)r={encode:function(e,n){return t.pkcs1.encode_rsa_oaep(n,e,i)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(r))r={encode:function(t){return t}};else if("string"==typeof r)throw new Error('Unsupported encryption scheme: "'+r+'".');var a=r.encode(n,o,!0);return h.rsa.encrypt(a,o,!0)},o.verify=function(t,e,r){"string"==typeof r?r=r.toUpperCase():void 0===r&&(r="RSASSA-PKCS1-V1_5"),"RSASSA-PKCS1-V1_5"===r?r={verify:function(t,e){return e=n(e,o,!0),t===l.fromDer(e).value[1].value}}:"NONE"!==r&&"NULL"!==r&&null!==r||(r={verify:function(t,e){return e=n(e,o,!0),t===e}});var i=h.rsa.decrypt(e,o,!0,!1);return r.verify(t,i,o.n.bitLength())},o},h.setRsaPrivateKey=h.rsa.setPrivateKey=function(e,r,i,o,a,s,u,c){var l={n:e,e:r,d:i,p:o,q:a,dP:s,dQ:u,qInv:c};return l.decrypt=function(e,r,i){"string"==typeof r?r=r.toUpperCase():void 0===r&&(r="RSAES-PKCS1-V1_5");var o=h.rsa.decrypt(e,l,!1,!1);if("RSAES-PKCS1-V1_5"===r)r={decode:n};else if("RSA-OAEP"===r||"RSAES-OAEP"===r)r={decode:function(e,n){return t.pkcs1.decode_rsa_oaep(n,e,i)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(r))throw new Error('Unsupported encryption scheme: "'+r+'".');r={decode:function(t){return t}}}return r.decode(o,l,!1)},l.sign=function(t,e){var n=!1;"string"==typeof e&&(e=e.toUpperCase()),void 0===e||"RSASSA-PKCS1-V1_5"===e?(e={encode:m},n=1):"NONE"!==e&&"NULL"!==e&&null!==e||(e={encode:function(){return t}},n=1);var r=e.encode(t,l.n.bitLength());return h.rsa.encrypt(r,l,n)},l},h.wrapRsaPrivateKey=function(t){return l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,l.integerToDer(0).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(h.oids.rsaEncryption).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.NULL,!1,"")]),l.create(l.Class.UNIVERSAL,l.Type.OCTETSTRING,!1,l.toDer(t).getBytes())])},h.privateKeyFromAsn1=function(e){var n={},r=[];if(l.validate(e,d,n,r)&&(e=l.fromDer(t.util.createBuffer(n.privateKey))),n={},r=[],!l.validate(e,p,n,r)){var i=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw i.errors=r,i}var o,a,s,u,f,y,g,m;return o=t.util.createBuffer(n.privateKeyModulus).toHex(),a=t.util.createBuffer(n.privateKeyPublicExponent).toHex(),s=t.util.createBuffer(n.privateKeyPrivateExponent).toHex(),u=t.util.createBuffer(n.privateKeyPrime1).toHex(),f=t.util.createBuffer(n.privateKeyPrime2).toHex(),y=t.util.createBuffer(n.privateKeyExponent1).toHex(),g=t.util.createBuffer(n.privateKeyExponent2).toHex(),m=t.util.createBuffer(n.privateKeyCoefficient).toHex(),h.setRsaPrivateKey(new c(o,16),new c(a,16),new c(s,16),new c(u,16),new c(f,16),new c(y,16),new c(g,16),new c(m,16))},h.privateKeyToAsn1=h.privateKeyToRSAPrivateKey=function(t){return l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,l.integerToDer(0).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,i(t.n)),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,i(t.e)),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,i(t.d)),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,i(t.p)),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,i(t.q)),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,i(t.dP)),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,i(t.dQ)),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,i(t.qInv))])},h.publicKeyFromAsn1=function(e){var n={},r=[];if(l.validate(e,g,n,r)){var i=l.derToOid(n.publicKeyOid);if(i!==h.oids.rsaEncryption){var o=new Error("Cannot read public key. Unknown OID.");throw o.oid=i,o}e=n.rsaPublicKey}if(r=[],!l.validate(e,y,n,r)){var o=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw o.errors=r,o}var a=t.util.createBuffer(n.publicKeyModulus).toHex(),s=t.util.createBuffer(n.publicKeyExponent).toHex();return h.setRsaPublicKey(new c(a,16),new c(s,16))},h.publicKeyToAsn1=h.publicKeyToSubjectPublicKeyInfo=function(t){return l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(h.oids.rsaEncryption).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.NULL,!1,"")]),l.create(l.Class.UNIVERSAL,l.Type.BITSTRING,!1,[h.publicKeyToRSAPublicKey(t)])])},h.publicKeyToRSAPublicKey=function(t){
return l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,i(t.n)),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,i(t.e))])}}if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var e=!0;define=function(t,e){e(require,module)}}var n,r=function(e,r){r.exports=function(r){var i=n.map(function(t){return e(t)}).concat(t);if(r=r||{},r.defined=r.defined||{},r.defined.rsa)return r.rsa;r.defined.rsa=!0;for(var o=0;o<i.length;++o)i[o](r);return r.rsa}},i=define;define=function(t,r){return n="string"==typeof t?r.slice(2):t.slice(2),e?(delete define,i.apply(null,Array.prototype.slice.call(arguments,0))):(define=i,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./asn1","./jsbn","./oids","./pkcs1","./prime","./random","./util"],function(){r.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){if("function"!=typeof define){if("object"!=typeof module||!module.exports)return void("undefined"==typeof forge&&(forge={disableNativeCode:!1}));var t=!0;define=function(t,e){e(require,module)}}var e,n=function(t,n){n.exports=function(n){var r=e.map(function(e){return t(e)});if(n=n||{},n.defined=n.defined||{},n.defined.forge)return n.forge;n.defined.forge=!0;for(var i=0;i<r.length;++i)"function"==typeof r[i]&&r[i](n);return n},n.exports.disableNativeCode=!1,n.exports(n.exports)},r=define;define=function(n,i){return e="string"==typeof n?i.slice(2):n.slice(2),t?(delete define,r.apply(null,Array.prototype.slice.call(arguments,0))):(define=r,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./aes","./aesCipherSuites","./asn1","./cipher","./cipherModes","./debug","./des","./hmac","./kem","./log","./md","./mgf1","./pbkdf2","./pem","./pkcs7","./pkcs1","./pkcs12","./pki","./prime","./prng","./pss","./random","./rc2","./ssh","./task","./tls","./util"],function(){n.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(t){var e={},n={};e.define=function(t,e,r){if(e&&e.length)for(var i=0;i<e.length;i++)e[i]=n[e[i]];n[t]=r.apply(this,e||[])},t.connectsdk=e,"undefined"!=typeof exports&&(exports.connectsdk=e),e.define("connectsdk.core",[],function(){return e}),"undefined"==typeof define&&(t.define=e.define)}("undefined"==typeof window?this:window),define("connectsdk.core",[],function(){var t="undefined"==typeof window?this:window,e={};return t.connectsdk=e,"undefined"!=typeof exports&&(exports.connectsdk=e),e}),define("connectsdk.promise",["connectsdk.core"],function(t){return function(t){function e(t){var e=this;this.pending=[],this.resolve=function(t){e.complete("resolve",t)},this.reject=function(t){e.complete("reject",t)},t&&(this.isSingleton=!0)}e.prototype={then:function(t,e){return this.pending.push({resolve:t,reject:e}),this},complete:function(t,e){for(;this.pending[0];)this.pending.shift()[t](e)}},t.Promise=e}(connectsdk),connectsdk.Promise}),define("connectsdk.net",["connectsdk.core"],function(t){function e(){if(!("undefined"==typeof XMLHttpRequest||"file:"===window.location.protocol&&window.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return!1}function n(t){return t.status>=200&&t.status<300||304==t.status||0==t.status&&t.responseText}function r(r,i){function a(t){if(4==h.readyState){var e=h.mimeType||h.getResponseHeader("content-type")||"";if(f.status=h.status,f.responseText=h.responseText,/json/.test(e)?f.responseJSON=o.parseJSON(h.responseText):/xml/.test(e)&&(f.responseXML=o.parseXML(h.responseText)),f.success=n(h),i.callback)return i.callback(f,h);f.success?(i.success&&i.success(f,h),c&&c.resolve(f,h)):(i.error&&i.error(f,h),c&&c.reject(f,h))}}function s(){var t={Accept:"text/javascript, application/json, text/html, application/xml, text/xml, */*","Content-Type":"application/json"};for(var e in t)i.headers.hasOwnProperty(e)||(i.headers[e]=t[e]);for(var e in i.headers)h.setRequestHeader(e,i.headers[e])}function u(){try{s(),h.send(i.postBody)}catch(t){i.error&&i.error()}}var c,l,h=e(),f={};return t.Promise&&(c=new t.Promise),void 0===i&&(i={}),i.method=i.method?i.method.toLowerCase():"get",i.asynchronous=i.asynchronous||!0,i.postBody=i.postBody||"",h.onreadystatechange=a,h.open(i.method,r,i.asynchronous),i.headers=i.headers||{},i.contentType&&(i.headers["Content-Type"]=i.contentType),"string"!=typeof i.postBody&&(i.postBody=o.serialize(i.postBody)),l={set:function(t,e){return i.headers[t]=e,l},send:function(t,e){return i.postBody=o.serialize(t),i.callback=e,u(),l},end:function(t){return i.callback=t,u(),l},data:function(t){return i.postBody=o.serialize(t),l},then:function(){return l.end(),c&&c.then.apply(c,arguments),l}}}function i(t,e,n){function r(t){i.success(t),i.teardown()}var i=this;this.url=t,this.methodName="__connectsdk_jsonp_"+parseInt((new Date).getTime()),this.success=e,this.failure=n,window[this.methodName]=r}var o={},a="".trim?function(t){return t.trim()}:function(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};return o.serialize=function(t){if(t){if("string"==typeof t)return t;var e=[];for(var n in t)e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")}},o.parseJSON=function(t){return"string"==typeof t&&t?(t=a(t),window.JSON.parse(t)):null},window.DOMParser?o.parseXML=function(t){return(new DOMParser).parseFromString(t,"text/xml")}:o.parseXML=function(t){var e=new ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e},i.prototype.run=function(){this.scriptTag=document.createElement("script"),this.scriptTag.id=this.methodName,this.scriptTag.src=this.url.replace("{callback}",this.methodName);var t=this;this.scriptTag.onerror=function(){t.failure()},document.body.appendChild(this.scriptTag)},i.prototype.teardown=function(){window[this.methodName]=null;try{delete window[this.methodName]}catch(t){}this.scriptTag&&document.body.removeChild(this.scriptTag)},o.get=function(t,e){return void 0===e&&(e={}),e.method="get",r(t,e)},o.post=function(t,e){return void 0===e&&(e={}),e.method="post",r(t,e)},o.jsonp=function(t,e){void 0===e&&(e={}),new i(t,e.success,e.failure).run()},t.get=o.get,t.post=o.post,t.jsonp=o.jsonp,o.ajax=r,t.net=o,o}),define("connectsdk.Util",["connectsdk.core"],function(t){var e=function(){function t(){return{applePayPaymentProductId:302,googlePayPaymentProductId:320,bancontactPaymentProductId:3012,getMetadata:function(){return{screenSize:window.innerWidth+"x"+window.innerHeight,platformIdentifier:window.navigator.userAgent,sdkIdentifier:(document.GC&&document.GC.rppEnabledPage?"rpp-":"")+"JavaScriptClientSDK/v3.13.2",sdkCreator:"Ingenico"}},collectDeviceInformation:function(){return{timezoneOffsetUtcMinutes:(new Date).getTimezoneOffset(),locale:navigator.language,browserData:{javaScriptEnabled:!0,javaEnabled:navigator.javaEnabled(),colorDepth:screen.colorDepth,screenHeight:screen.height,screenWidth:screen.width,innerHeight:window.innerHeight,innerWidth:window.innerWidth}}},base64Encode:function(t){if("object"==typeof t)try{t=JSON.stringify(t)}catch(t){throw"data must be either a String or a JSON object"}var e,n,r,i,o,a,s,u,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=0,h=0,f="",d=[];if(!t)return t;do{e=t.charCodeAt(l++),n=t.charCodeAt(l++),r=t.charCodeAt(l++),u=e<<16|n<<8|r,i=u>>18&63,o=u>>12&63,a=u>>6&63,s=63&u,d[h++]=c.charAt(i)+c.charAt(o)+c.charAt(a)+c.charAt(s)}while(l<t.length);f=d.join("");var p=t.length%3;return(p?f.slice(0,p-3):f)+"===".slice(p||3)},filterOutProductsThatAreNotSupportedInThisBrowser:function(t){for(var e=t.paymentProducts.length-1;e>=0;e--){var n=t.paymentProducts[e];n&&this.paymentProductsThatAreNotSupportedInThisBrowser.indexOf(n.id)>-1&&t.paymentProducts.splice(e,1)}},paymentProductsThatAreNotSupportedInThisBrowser:[302]}}var e;return{getInstance:function(){return e||(e=t()),e}}}();return t.Util=e,e}),define("connectsdk.GooglePay",["connectsdk.core","connectsdk.promise","connectsdk.Util"],function(t,e,n){function r(){if(null===h){var t="TEST";"PROD"===u.environment&&(t="PROD"),window.google?h=new google.payments.api.PaymentsClient({environment:t}):console.error("The Google Pay API script was not loaded https://developers.google.com/pay/api/web/guides/tutorial#js-load")}return h}function i(){var t=v(),e=r();s.googlePay.gatewayMerchantId&&s.googlePay.merchantName?e.prefetchPaymentData(t):console.warn("Prefetching payment data was not triggered because of missing information. gatewayMerchantId: "+s.googlePay.gatewayMerchantId+", merchantName: "+s.googlePay.merchantName)}var o=n.getInstance(),a=null,s=null,u=null,c=null,l=null,h=null,f=function(){return{type:"CARD",parameters:{allowedAuthMethods:["PAN_ONLY","CRYPTOGRAM_3DS"],allowedCardNetworks:l}}},d=function(){return{type:"PAYMENT_GATEWAY",parameters:{gateway:c,gatewayMerchantId:s.googlePay.gatewayMerchantId}}},p=function(){return Object.assign({},f(),{tokenizationSpecification:d()})},y=function(){return{totalPriceStatus:"NOT_CURRENTLY_KNOWN",currencyCode:u.currency}},g=function(){return{merchantName:s.googlePay.merchantName}},m=function(){return{apiVersion:2,apiVersionMinor:0,allowedPaymentMethods:[f()]}},v=function(){return{apiVersion:2,apiVersionMinor:0,allowedPaymentMethods:[p()],transactionInfo:y(),merchantInfo:g()}},S=function(t){a=t,this.isGooglePayAvailable=function(t,n,a){u=t,s=n,a&&a.networks?(c=a.gateway,l=a.networks):(c="ingenicoglobalcollect",l=a);var h=new e;return setTimeout(function(){if(l&&l.length>0){var t=r();t?t.isReadyToPay(m()).then(function(t){h.resolve(t),i()}).catch(function(){o.paymentProductsThatAreNotSupportedInThisBrowser.push(o.googlePayPaymentProductId),h.reject("failed to run isReadyToPay() with Google Pay API")}):(o.paymentProductsThatAreNotSupportedInThisBrowser.push(o.googlePayPaymentProductId),h.reject("The Google Pay API script was not loaded https://developers.google.com/pay/api/web/guides/tutorial#js-load"))}else o.paymentProductsThatAreNotSupportedInThisBrowser.push(o.googlePayPaymentProductId),h.reject("There are no product networks available")},0),h},this.isMerchantIdProvided=function(t){return t.googlePay.merchantId?t.googlePay.merchantId:(o.paymentProductsThatAreNotSupportedInThisBrowser.push(o.googlePayPaymentProductId),!1)}};return t.GooglePay=S,S}),define("connectsdk.PublicKeyResponse",["connectsdk.core"],function(t){var e=function(t){this.json=t,this.keyId=t.keyId,this.publicKey=t.publicKey};return t.PublicKeyResponse=e,e}),define("connectsdk.C2SCommunicatorConfiguration",["connectsdk.core"],function(t){var e=function(t,e){if(this.endpoints={PROD:{EU:{API:"https://ams1.api-ingenico.com/client/v1",ASSETS:"https://assets.pay1.secured-by-ingenico.com"},US:{API:"https://us.api-ingenico.com/client/v1",ASSETS:"https://assets.pay2.secured-by-ingenico.com"},AMS:{API:"https://ams2.api-ingenico.com/client/v1",ASSETS:"https://assets.pay3.secured-by-ingenico.com"},PAR:{API:"https://par.api-ingenico.com/client/v1",ASSETS:"https://assets.pay4.secured-by-ingenico.com"}},PREPROD:{EU:{API:"https://ams1.preprod.api-ingenico.com/client/v1",ASSETS:"https://assets.pay1.preprod.secured-by-ingenico.com"},US:{API:"https://us.preprod.api-ingenico.com/client/v1",ASSETS:"https://assets.pay2.preprod.secured-by-ingenico.com"},AMS:{API:"https://ams2.preprod.api-ingenico.com/client/v1",ASSETS:"https://assets.pay3.preprod.secured-by-ingenico.com"},PAR:{API:"https://par-preprod.api-ingenico.com/client/v1",ASSETS:"https://assets.pay4.preprod.secured-by-ingenico.com"}},SANDBOX:{EU:{API:"https://ams1.sandbox.api-ingenico.com/client/v1",ASSETS:"https://assets.pay1.sandbox.secured-by-ingenico.com"},US:{API:"https://us.sandbox.api-ingenico.com/client/v1",ASSETS:"https://assets.pay2.sandbox.secured-by-ingenico.com"},AMS:{API:"https://ams2.sandbox.api-ingenico.com/client/v1",ASSETS:"https://assets.pay3.sandbox.secured-by-ingenico.com"},PAR:{API:"https://par.sandbox.api-ingenico.com/client/v1",ASSETS:"https://assets.pay4.sandbox.secured-by-ingenico.com"}},INTEGRATION:{EU:{API:"https://int-test-api.gcsip.nl:4443/client/v1",ASSETS:"https://assets.int-test-rpp.gcsip.nl:4443"},US:{API:"https://int-test-api.gcsip.nl:4443/client/v1",ASSETS:"https://assets.int-test-rpp.gcsip.nl:4443"},AMS:{API:"https://int-test-api.gcsip.nl:4443/client/v1",ASSETS:"https://assets.int-test-rpp.gcsip.nl:4443"},PAR:{API:"https://int-test-api.gcsip.nl:4443/client/v1",ASSETS:"https://assets.int-test-rpp.gcsip.nl:4443"}},DEV_NAMI:{EU:{API:"https://nami-test-api.gcsip.nl:4443/client/v1",ASSETS:"https://assets.nami-test-rpp.gcsip.nl:4443"},US:{API:"https://nami-test-api.gcsip.nl:4443/client/v1",ASSETS:"https://assets.nami-test-rpp.gcsip.nl:4443"},AMS:{API:"https://nami-test-api.gcsip.nl:4443/client/v1",ASSETS:"https://assets.nami-test-rpp.gcsip.nl:4443"},PAR:{API:"https://nami-test-api.gcsip.nl:4443/client/v1",ASSETS:"https://assets.nami-test-rpp.gcsip.nl:4443"}},DEV_ISC:{EU:{API:"//api.gc-dev.isaac.local/client/v1",ASSETS:"//rpp.gc-dev.isaac.local"},US:{API:"//api.gc-ci-dev.isaac.local/client/v1",ASSETS:"//rpp.gc-ci-dev.isaac.local"},AMS:{API:"//api.gc-dev.isaac.local/client/v1",ASSETS:"//rpp.gc-dev.isaac.local"},PAR:{API:"//api.gc-dev.isaac.local/client/v1",ASSETS:"//rpp.gc-dev.isaac.local"}}},t.clientSessionId){if(t.clientSessionID)throw new Error("You cannot use both the clientSessionId and the clientSessionID at the same time, please use the clientSessionId only.")}else t.clientSessionId=t.clientSessionID;if(t.assetUrl){if(t.assetsBaseUrl)throw new Error("You cannot use both the assetUrl and the assetsBaseUrl at the same time, please use the assetUrl only.")}else t.assetUrl=t.assetsBaseUrl;if(t.clientApiUrl){if(t.apiBaseUrl)throw new Error("You cannot use both the clientApiUrl and the apiBaseUrl at the same time, please use the clientApiUrl only.")}else t.clientApiUrl=t.apiBaseUrl;if(this.clientSessionId=t.clientSessionId,this.customerId=t.customerId,t.region&&!t.clientApiUrl)console.warn("Using regions is deprecated, switch to clientApiUrl"),this.clientApiUrl=this.endpoints[t.environment][t.region].API,this.assetUrl=this.endpoints[t.environment][t.region].ASSETS;else{if(this.clientApiUrl=t.clientApiUrl,this.assetUrl=t.assetUrl,!this.clientApiUrl)throw new Error("This version of the connectSDK requires an clientApiUrl, which you did not provide.");if(!this.assetUrl)throw new Error("This version of the connectSDK requires an assetUrl, which you did not provide.");if(-1===this.clientApiUrl.indexOf("//"))throw new Error("A valid URL is required for the clientApiUrl, you provided '"+this.clientApiUrl+"'");var n=this.clientApiUrl.split("/");if(""!==n[0]&&0!==n[0].indexOf("http"))throw new Error("A valid URL is required for the clientApiUrl, you provided '"+this.clientApiUrl+"'");var r=n.splice(3).join("/");if(r){if("client"===r)this.clientApiUrl+="/"+e.split("/")[1];else if(0!==r.indexOf(e)||r.length!==e.length)throw new Error("This version of the connectSDK is only compatible with "+e+", you supplied: '"+r+"'")}else this.clientApiUrl+="/"+e}};return t.C2SCommunicatorConfiguration=e,e}),define("connectsdk.IinDetailsResponse",["connectsdk.core","connectsdk.promise"],function(t,e){var n=function(){this.status="",this.countryCode="",this.paymentProductId="",this.isAllowedInContext="",this.coBrands=[]};return t.IinDetailsResponse=n,n}),define("connectsdk.C2SCommunicator",["connectsdk.core","connectsdk.promise","connectsdk.net","connectsdk.Util","connectsdk.PublicKeyResponse","connectsdk.IinDetailsResponse","connectsdk.GooglePay"],function(t,e,n,r,i,o,a){var s=function(t,s){var u=t,c=r.getInstance(),l={},h=s,f=this,d=new a(f),p={expirydate:"tel",string:"text",numericstring:"tel",integer:"number",expirationDate:"tel"},y=function(t){return t&&v(t,"/")?t:t+"/"},g=function(t,e){return t=y(t),m(e,t)?e:t+e},m=function(t,e){return 0===t.indexOf(e)},v=function(t,e){return-1!==t.indexOf(e,t.length-e.length)},S=function(t,e){for(var n=0,r=t.fields.length;n<r;n++){var i=t.fields[n];i.type=i.displayHints&&i.displayHints.obfuscate?"password":p[i.type];for(validatorKey in i.dataRestrictions.validators)i.validators=i.validators||[],i.validators.push(validatorKey);i.displayHints&&i.displayHints.formElement&&"list"===i.displayHints.formElement.type&&(i.displayHints.formElement.list=!0),i.displayHints&&i.displayHints.tooltip&&i.displayHints.tooltip.image&&(i.displayHints.tooltip.image=g(e,i.displayHints.tooltip.image))}return t.fields.sort(function(t,e){return t.displayHints.displayOrder<e.displayHints.displayOrder?-1:1}),t.displayHints.logo=g(e,t.displayHints.logo),t},b=function(t,e,n){for(var r=0,i=t["paymentProduct"+n].length;r<i;r++){var o=t["paymentProduct"+n][r];o.displayHints.logo=g(e,o.displayHints.logo)}return t["paymentProduct"+n].sort(function(t,e){return t.displayHints.displayOrder<e.displayHints.displayOrder?-1:1}),t},B=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r&&r.id===e)return!0}return!1},A=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r&&r.id===e)return r.paymentProduct320SpecificData}return!1},I=c.getMetadata();this.getBasicPaymentProducts=function(t,r){var i=t.locale?t.locale+"_":"";r=r||{};var o=new e,a=(new Date).getTime(),s="getPaymentProducts-"+t.totalAmount+"_"+t.countryCode+"_"+i+t.isRecurring+"_"+t.currency+"_"+JSON.stringify(r);if(l[s])setTimeout(function(){o.resolve(l[s])},0);else{var h=t.locale?"&locale="+t.locale:"";n.get(y(u.clientApiUrl)+u.customerId+"/products?countryCode="+t.countryCode+"&isRecurring="+t.isRecurring+"&amount="+t.totalAmount+"&currencyCode="+t.currency+"&hide=fields"+h+"&cacheBust="+a).set("X-GCS-ClientMetaInfo",c.base64Encode(I)).set("Authorization","GCS v1Client:"+u.clientSessionId).end(function(e){if(e.success){var n=b(e.responseJSON,u.assetUrl,"s");if(B(n.paymentProducts,c.googlePayPaymentProductId))if(d.isMerchantIdProvided(r)){var i=A(n.paymentProducts,c.googlePayPaymentProductId);d.isGooglePayAvailable(t,r,i).then(function(t){c.filterOutProductsThatAreNotSupportedInThisBrowser(n),0===n.paymentProducts.length&&o.reject("No payment products available"),l[s]=n,o.resolve(n)},function(){c.filterOutProductsThatAreNotSupportedInThisBrowser(n),0===n.paymentProducts.length&&o.reject("No payment products available"),l[s]=n,o.resolve(n)})}else c.filterOutProductsThatAreNotSupportedInThisBrowser(n),console.warn("You have not provided a merchantId for Google Pay, you can set this in the paymentProductSpecificInputs object"),o.resolve(n);else c.filterOutProductsThatAreNotSupportedInThisBrowser(n),0===n.paymentProducts.length&&o.reject("No payment products available"),l[s]=n,o.resolve(n)}else o.reject("failed to retrieve Basic Payment Products",e)})}return o},this.getBasicPaymentProductGroups=function(t){var r=t.locale?t.locale+"_":"",i=new e,o=(new Date).getTime(),a="getPaymentProductGroups-"+t.totalAmount+"_"+t.countryCode+"_"+r+t.isRecurring+"_"+t.currency;if(l[a])setTimeout(function(){i.resolve(l[a])},0);else{var s=t.locale?"&locale="+t.locale:"";n.get(y(u.clientApiUrl)+u.customerId+"/productgroups?countryCode="+t.countryCode+"&isRecurring="+t.isRecurring+"&amount="+t.totalAmount+"&currencyCode="+t.currency+"&hide=fields"+s+"&cacheBust="+o).set("X-GCS-ClientMetaInfo",c.base64Encode(I)).set("Authorization","GCS v1Client:"+u.clientSessionId).end(function(t){if(t.success){var e=b(t.responseJSON,u.assetUrl,"Groups");l[a]=e,i.resolve(e)}else i.reject()})}return i},this.getPaymentProduct=function(r,i,o){o=o||{};var a=i.locale?i.locale+"_":"",s=new e,f=(new Date).getTime(),p="getPaymentProduct-"+r+"_"+i.totalAmount+"_"+i.countryCode+"_"+a+i.isRecurring+"_"+i.currency+"_"+JSON.stringify(o);if(c.paymentProductsThatAreNotSupportedInThisBrowser.indexOf(r)>-1)setTimeout(function(){s.reject({errorId:"48b78d2d-1b35-4f8b-92cb-57cc2638e901",errors:[{code:"1007",propertyName:"productId",message:"UNKNOWN_PRODUCT_ID",httpStatusCode:404}]})},0);else if(h&&h.id===r)l[p]||(l[p]=S(h,u.assetUrl)),setTimeout(function(){s.resolve(l[p])},0);else if(l[p])setTimeout(function(){s.resolve(l[p])},0);else{var g=i.locale?"&locale="+i.locale:"",m=y(u.clientApiUrl)+u.customerId+"/products/"+r+"?countryCode="+i.countryCode+"&isRecurring="+i.isRecurring+"&amount="+i.totalAmount+"&currencyCode="+i.currency+g;r===c.bancontactPaymentProductId&&o&&o.bancontact&&o.bancontact.forceBasicFlow&&(m+="&forceBasicFlow="+o.bancontact.forceBasicFlow),m+="&cacheBust="+f,n.get(m).set("X-GCS-ClientMetaInfo",c.base64Encode(I)).set("Authorization","GCS v1Client:"+u.clientSessionId).end(function(e){if(e.success){var n=S(e.responseJSON,t.assetUrl);if(r===c.googlePayPaymentProductId)if(d.isMerchantIdProvided(o)){var a=n.paymentProduct320SpecificData.networks;d.isGooglePayAvailable(i,o,a).then(function(t){t?(l[p]=n,s.resolve(n)):(l[p]=n,s.reject(n))},function(){l[p]=n,s.reject(n)})}else l[p]=n,s.reject(n);else l[p]=n,s.resolve(n)}else s.reject("failed to retrieve Payment Product",e)})}return s},this.getPaymentProductGroup=function(r,i){var o=i.locale?i.locale+"_":"",a=new e,s=(new Date).getTime(),f="getPaymentProductGroup-"+r+"_"+i.totalAmount+"_"+i.countryCode+"_"+o+i.isRecurring+"_"+i.currency;if(h&&h.id===r)l[f]?setTimeout(function(){a.resolve(l[f])},0):(l[f]=S(h,u.assetUrl),setTimeout(function(){a.resolve(l[f])},0));else if(l[f])setTimeout(function(){a.resolve(l[f])},0);else{var d=i.locale?"&locale="+i.locale:"";n.get(y(u.clientApiUrl)+u.customerId+"/productgroups/"+r+"?countryCode="+i.countryCode+"&isRecurring="+i.isRecurring+"&amount="+i.totalAmount+"&currencyCode="+i.currency+d+"&cacheBust="+s).set("X-GCS-ClientMetaInfo",c.base64Encode(I)).set("Authorization","GCS v1Client:"+u.clientSessionId).end(function(e){if(e.success){var n=S(e.responseJSON,t.assetUrl);l[f]=n,a.resolve(n)}else a.reject()})}return a},this.getPaymentProductIdByCreditCardNumber=function(t,r){var i=new e,a=new o,s="getPaymentProductIdByCreditCardNumber-"+t,h=this;if(this.context=r,l[s])setTimeout(function(){i.resolve(l[s])},0);else{!function(t){return t.length>=6}(t)?(a.status="NOT_ENOUGH_DIGITS",setTimeout(function(){i.resolve(a)},0)):n.post(y(u.clientApiUrl)+u.customerId+"/services/getIINdetails").data(JSON.stringify(this.convertContextToIinDetailsContext(t,this.context))).set("X-GCS-ClientMetaInfo",c.base64Encode(I)).set("Authorization","GCS v1Client:"+u.clientSessionId).end(function(t){t.success?(a.json=t.responseJSON,a.countryCode=t.responseJSON.countryCode,a.paymentProductId=t.responseJSON.paymentProductId,a.isAllowedInContext=t.responseJSON.isAllowedInContext,a.coBrands=t.responseJSON.coBrands,t.responseJSON.hasOwnProperty("isAllowedInContext")?(a.status="SUPPORTED",!1===a.isAllowedInContext&&(a.status="EXISTING_BUT_NOT_ALLOWED"),l[s]=a,i.resolve(a)):h.getPaymentProduct(a.paymentProductId,h.context).then(function(t){a.status=t?"SUPPORTED":"UNSUPPORTED",l[s]=a,i.resolve(a)},function(){a.status="UNKNOWN",i.reject(a)})):(a.status="UNKNOWN",i.reject(a))})}return i},this.convertContextToIinDetailsContext=function(t,e){var n={bin:t,paymentContext:{countryCode:e.countryCode,isRecurring:e.isRecurring,amountOfMoney:{amount:e.totalAmount,currencyCode:e.currency}}};return void 0!==e.accountOnFileId&&(n.accountOnFileId=e.accountOnFileId),n},this.getPublicKey=function(){var t=new e;return l.publicKey?setTimeout(function(){t.resolve(l.publicKey)},0):n.get(y(u.clientApiUrl)+u.customerId+"/crypto/publickey").set("X-GCS-ClientMetaInfo",c.base64Encode(I)).set("Authorization","GCS v1Client:"+u.clientSessionId).end(function(e){if(e.success){var n=new i(e.responseJSON);l.publicKey=n,t.resolve(n)}else t.reject("unable to get public key")}),t},this.getPaymentProductNetworks=function(t,r){var i=new e,o="paymentProductNetworks-"+t+"_"+r.countryCode+"_"+r.currency+"_"+r.totalAmount+"_"+r.isRecurring;return l[o]?setTimeout(function(){i.resolve(l[o])},0):n.get(y(u.clientApiUrl)+u.customerId+"/products/"+t+"/networks?countryCode="+r.countryCode+"&currencyCode="+r.currency+"&amount="+r.totalAmount+"&isRecurring="+r.isRecurring).set("X-GCS-ClientMetaInfo",c.base64Encode(I)).set("Authorization","GCS v1Client:"+u.clientSessionId).end(function(t){t.success?(l[o]=t.responseJSON,i.resolve(t.responseJSON)):i.reject()}),i},this.getPaymentProductDirectory=function(t,r,i){var o=new e,a="getPaymentProductDirectory-"+t+"_"+r+"_"+i;return l[a]?setTimeout(function(){o.resolve(l[a])},0):n.get(y(u.clientApiUrl)+u.customerId+"/products/"+t+"/directory?countryCode="+i+"&currencyCode="+r).set("X-GCS-ClientMetaInfo",c.base64Encode(I)).set("Authorization","GCS v1Client:"+u.clientSessionId).end(function(t){t.success?(l[a]=t.responseJSON,o.resolve(t.responseJSON)):o.reject("unable to retrieve payment product directory")}),o},this.convertAmount=function(t,r,i){var o=new e,a="convertAmount-"+t+"_"+r+"_"+i;return l[a]?setTimeout(function(){o.resolve(l[a])},0):n.get(y(u.clientApiUrl)+u.customerId+"/services/convert/amount?source="+r+"&target="+i+"&amount="+t).set("X-GCS-ClientMetaInfo",c.base64Encode(I)).set("Authorization","GCS v1Client:"+u.clientSessionId).end(function(t){t.success?(l[a]=t.responseJSON,o.resolve(t.responseJSON)):o.reject("unable to convert amount")}),o},this.getThirdPartyPaymentStatus=function(t){var r=new e;return n.get(y(u.clientApiUrl)+u.customerId+"/payments/"+t+"/thirdpartystatus").set("X-GCS-ClientMetaInfo",c.base64Encode(I)).set("Authorization","GCS v1Client:"+u.clientSessionId).end(function(t){t.success?r.resolve(t.responseJSON):r.reject("unable to retrieve third party status")}),r},this.getCustomerDetails=function(t,r){var i=new e,o="getCustomerDetails_"+r.countryCode;return o=w(o,r.values),l[o]?setTimeout(function(){i.resolve(l[o])},0):n.post(y(u.clientApiUrl)+u.customerId+"/products/"+t+"/customerDetails").data(JSON.stringify(r)).set("X-GCS-ClientMetaInfo",c.base64Encode(I)).set("Authorization","GCS v1Client:"+u.clientSessionId).end(function(t){t.success?(l[o]=t.responseJSON,i.resolve(t.responseJSON)):i.reject(t.responseJSON)}),i};var w=function(t,e){var n=t;for(var r in e)e.hasOwnProperty(r)&&(n+="_"+e[r].key+"_"+e[r].value);return n};this.transformPaymentProductJSON=function(t){return S(t,u.assetUrl)}};return t.C2SCommunicator=s,s}),define("connectsdk.LabelTemplateElement",["connectsdk.core"],function(t){var e=function(t){this.json=t,this.attributeKey=t.attributeKey,this.mask=t.mask,this.wildcardMask=t.mask?t.mask.replace(/9/g,"*"):""};return t.LabelTemplateElement=e,e}),define("connectsdk.Attribute",["connectsdk.core"],function(t){var e=function(t){this.json=t,this.key=t.key,this.value=t.value,this.status=t.status,this.mustWriteReason=t.mustWriteReason};return t.Attribute=e,e}),define("connectsdk.AccountOnFileDisplayHints",["connectsdk.core","connectsdk.LabelTemplateElement"],function(t,e){var n=function(t,n,r){if(t.labelTemplate)for(var i=0,o=t.labelTemplate.length;i<o;i++){var a=new e(t.labelTemplate[i]);n.push(a),r[a.attributeKey]=a}},r=function(t){this.json=t,this.labelTemplate=[],this.labelTemplateElementByAttributeKey={},n(t,this.labelTemplate,this.labelTemplateElementByAttributeKey)};return t.AccountOnFileDisplayHints=r,r}),define("connectsdk.AccountOnFile",["connectsdk.core","connectsdk.AccountOnFileDisplayHints","connectsdk.Attribute"],function(t,e,n){var r=function(t,e,r){if(t.attributes)for(var i=0,o=t.attributes.length;i<o;i++){var a=new n(t.attributes[i]);e.push(a),r[a.key]=a}},i=function(n){this.json=n,this.attributes=[],this.attributeByKey={},this.displayHints=new e(n.displayHints),this.id=n.id,this.paymentProductId=n.paymentProductId,this.getMaskedValueByAttributeKey=function(e){var n,r=this.attributeByKey[e].value;try{n=this.displayHints.labelTemplateElementByAttributeKey[e].wildcardMask}catch(t){}if(void 0!==r&&void 0!==n){return(new t.MaskingUtil).applyMask(n,r)}},r(n,this.attributes,this.attributeByKey)};return t.AccountOnFile=i,i}),define("connectsdk.PaymentProduct302SpecificData",["connectsdk.core"],function(t){var e=function(t){this.json=t,this.networks=t.networks};return t.PaymentProduct302SpecificData=e,e}),define("connectsdk.PaymentProduct320SpecificData",["connectsdk.core"],function(t){var e=function(t){this.json=t,this.gateway=t.gateway,this.networks=t.networks};return t.PaymentProduct320SpecificData=e,e}),define("connectsdk.PaymentProduct863SpecificData",["connectsdk.core"],function(t){var e=function(t){this.json=t,this.integrationTypes=t.integrationTypes};return t.PaymentProduct863SpecificData=e,e}),define("connectsdk.PaymentProductDisplayHints",["connectsdk.core"],function(t){var e=function(t){this.json=t,this.displayOrder=t.displayOrder,this.label=t.label,this.logo=t.logo};return t.PaymentProductDisplayHints=e,e}),define("connectsdk.BasicPaymentProduct",["connectsdk.core","connectsdk.AccountOnFile","connectsdk.PaymentProductDisplayHints","connectsdk.PaymentProduct302SpecificData","connectsdk.PaymentProduct320SpecificData","connectsdk.PaymentProduct863SpecificData"],function(t,e,n,r,i,o){var a=function(t,n,a,s){if(t.accountsOnFile)for(var u=0,c=t.accountsOnFile.length;u<c;u++){var l=new e(t.accountsOnFile[u]);a.push(l),s[l.id]=l}t.paymentProduct302SpecificData&&(n.paymentProduct302SpecificData=new r(t.paymentProduct302SpecificData)),t.paymentProduct320SpecificData&&(n.paymentProduct320SpecificData=new i(t.paymentProduct320SpecificData)),t.paymentProduct863SpecificData&&(n.paymentProduct863SpecificData=new o(t.paymentProduct863SpecificData))},s=function(t){this.json=t,this.json.type="product",this.accountsOnFile=[],this.accountOnFileById={},this.allowsRecurring=t.allowsRecurring,this.allowsTokenization=t.allowsTokenization,this.autoTokenized=t.autoTokenized,this.displayHints=new n(t.displayHints),this.id=t.id,this.maxAmount=t.maxAmount,this.minAmount=t.minAmount,this.paymentMethod=t.paymentMethod,this.mobileIntegrationLevel=t.mobileIntegrationLevel,this.usesRedirectionTo3rdParty=t.usesRedirectionTo3rdParty,this.paymentProductGroup=t.paymentProductGroup,a(t,this,this.accountsOnFile,this.accountOnFileById)};return t.BasicPaymentProduct=s,s}),define("connectsdk.BasicPaymentProductGroup",["connectsdk.core","connectsdk.AccountOnFile","connectsdk.PaymentProductDisplayHints"],function(t,e,n){var r=function(t,n,r){if(t.accountsOnFile)for(var i=0,o=t.accountsOnFile.length;i<o;i++){var a=new e(t.accountsOnFile[i]);n.push(a),r[a.id]=a}},i=function(t){this.json=t,this.json.type="group",this.id=t.id,this.displayHints=new n(t.displayHints),this.accountsOnFile=[],this.accountOnFileById={},r(t,this.accountsOnFile,this.accountOnFileById)};return t.BasicPaymentProductGroup=i,i}),define("connectsdk.MaskedString",["connectsdk.core"],function(t){var e=function(t,e){this.formattedValue=t,this.cursorIndex=e};return t.MaskedString=e,e}),define("connectsdk.MaskingUtil",["connectsdk.core","connectsdk.MaskedString"],function(t,e){var n=function(t,e,r,i,o){t+e<o.length&&t<i.length&&("9"===i[t]&&Number(o[t+e])>-1&&" "!==o[t+e]||"*"===i[t]?r.push(o[t+e]):o[t+e]===i[t]?r.push(o[t+e]):"9"!==i[t]&&"*"!==i[t]?(r.push(i[t]),e--):(o.splice(t+e,1),t--),n(t+1,e,r,i,o))},r=function(){this.applyMask=function(t,r,i){var o=[],a=r.split("");if(t){for(var s=t.split(""),u=[],c=0,l=s.length;c<l;c++){var h=s[c];"{"===h||"}"===h||u.push(h)}n(0,0,o,u,a)}else for(var c=0,l=a.length;c<l;c++){var h=a[c];o.push(h)}r=o.join("");var f=1;if(i)for(var d=i.split(""),c=0,l=o.length;c<l;c++)if(o[c]!==d[c]){f=c+1;break}return r.substring(0,r.length-1)===i&&(f=r.length+1),new e(r,f)},this.getMaxLengthBasedOnMask=function(t){if(t){for(var e=t.split(""),n=-1,r=0,i=e.length;r<i;r++){n++;var o=e[r];"{"!==o&&"}"!==o||n--}return n}},this.removeMask=function(t,e){var n=[],r=e?e.split(""):[];if(t)for(var i=t.split(""),o=-1,a=!1,s=0,u=i.length;s<u;s++){o++;var c=i[s];"{"===c||"}"===c?(o--,"{"===c?a=!0:"}"===c&&(a=!1)):a&&r[o]&&n.push(r[o])}else for(var s=0,u=r.length;s<u;s++){var c=r[s];n.push(c)}return n.join("").trim()}};return t.MaskingUtil=r,r}),define("connectsdk.ValidationRuleLuhn",["connectsdk.core"],function(t){var e=function(t){this.json=t,
this.type=t.type,this.errorMessageId=t.type,this.validate=function(t){var e=[[0,2,4,6,8,1,3,5,7,9],[0,1,2,3,4,5,6,7,8,9]],n=0;return t.replace(/\D+/g,"").replace(/[\d]/g,function(t,r,i){n+=e[i.length-r&1][parseInt(t,10)]}),n%10==0&&n>0}};return t.ValidationRuleLuhn=e,e}),define("connectsdk.ValidationRuleExpirationDate",["connectsdk.core"],function(t){var e=function(t){return/\d{4}|\d{6}$/g.test(t)},n=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.validate=function(t){if(t=t.replace(/[^\d]/g,""),!e(t))return!1;var n;if(4===t.length)n=[t.substring(0,2),"20"+t.substring(2,4)];else{if(6!==t.length)return!1;n=[t.substring(0,2),t.substring(2,6)]}var r=n[0]-1,i=n[1],o=new Date(i,r,1);if(o.getMonth()!==Number(r)||o.getFullYear()!==Number(i))return!1;var a=new Date,s=new Date(a.getFullYear(),a.getMonth(),1),u=new Date(a.getFullYear()+25,11,1);return o>=s&&o<=u}};return t.ValidationRuleExpirationDate=n,n}),define("connectsdk.ValidationRuleFixedList",["connectsdk.core"],function(t){var e=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.allowedValues=t.attributes.allowedValues,this.validate=function(t){for(var e=0,n=this.allowedValues.length;e<n;e++)if(this.allowedValues[e]===t)return!0;return!1}};return t.ValidationRuleFixedList=e,e}),define("connectsdk.ValidationRuleLength",["connectsdk.core"],function(t){var e=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.maxLength=t.attributes.maxLength,this.minLength=t.attributes.minLength,this.validate=function(t){return this.minLength<=t.length&&t.length<=this.maxLength}};return t.ValidationRuleLength=e,e}),define("connectsdk.ValidationRuleRange",["connectsdk.core"],function(t){var e=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.maxValue=t.attributes.maxValue,this.minValue=t.attributes.minValue,this.validate=function(t){return!isNaN(t)&&(t=Number(t),this.minValue<=t&&t<=this.maxValue)}};return t.ValidationRuleRange=e,e}),define("connectsdk.ValidationRuleRegularExpression",["connectsdk.core"],function(t){var e=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.regularExpression=t.attributes.regularExpression,this.validate=function(t){return new RegExp(this.regularExpression).test(t)}};return t.ValidationRuleRegularExpression=e,e}),define("connectsdk.ValidationRuleEmailAddress",["connectsdk.core"],function(t){var e=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.validate=function(t){return new RegExp(/^[^@\.]+(\.[^@\.]+)*@([^@\.]+\.)*[^@\.]+\.[^@\.][^@\.]+$/i).test(t)}};return t.ValidationRuleEmailAddress=e,e}),define("connectsdk.ValidationRuleTermsAndConditions",["connectsdk.core"],function(t){var e=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.validate=function(t){return!0===t||"true"===t}};return t.ValidationRuleTermsAndConditions=e,e}),define("connectsdk.ValidationRuleBoletoBancarioRequiredness",["connectsdk.core"],function(t){var e=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.fiscalNumberLength=t.attributes.fiscalNumberLength,this.validate=function(t,e){return void 0===e&&(e=""),e.length===this.fiscalNumberLength&&t.length>0||e.length!==this.fiscalNumberLength}};return t.ValidationRuleBoletoBancarioRequiredness=e,e}),define("connectsdk.ValidationRuleIban",["connectsdk.core"],function(t){var e=function(t){return t.replace(/[^\d\w]+/g,"").toUpperCase()},n=function(t){return"string"==typeof t&&/^[A-Z]{2}[0-9]{2}[A-Z0-9]{4}[0-9]{7}([A-Z0-9]?){0,16}$/.test(e(t))},r=function(t){return e(t).replace(/(^.{4})(.*)/,"$2$1").replace(/[A-Z]/g,function(t){return t.charCodeAt(0)-55})},i=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.validate=function(t){if(!n(t))return!1;for(var e,i=r(t);i.length>2;)e=i.slice(0,9),i=parseInt(e,10)%97+i.slice(e.length);return parseInt(i,10)%97==1}};return t.ValidationRuleIban=i,i}),define("connectsdk.ValidationRuleFactory",["connectsdk.core","connectsdk.ValidationRuleEmailAddress","connectsdk.ValidationRuleTermsAndConditions","connectsdk.ValidationRuleExpirationDate","connectsdk.ValidationRuleFixedList","connectsdk.ValidationRuleLength","connectsdk.ValidationRuleLuhn","connectsdk.ValidationRuleRange","connectsdk.ValidationRuleRegularExpression","connectsdk.ValidationRuleBoletoBancarioRequiredness","connectsdk.ValidationRuleIban"],function(connectsdk,ValidationRuleEmailAddress,ValidationRuleTermsAndConditions,ValidationRuleExpirationDate,ValidationRuleFixedList,ValidationRuleLength,ValidationRuleLuhn,ValidationRuleRange,ValidationRuleRegularExpression,ValidationRuleBoletoBancarioRequiredness,ValidationRuleIban){var ValidationRuleFactory=function(){this.makeValidator=function(json){try{var classType=json.type.charAt(0).toUpperCase()+json.type.slice(1),className=eval("ValidationRule"+classType);return new className(json)}catch(t){console.warn("no validator for ",classType)}return null}};return connectsdk.ValidationRuleFactory=ValidationRuleFactory,ValidationRuleFactory}),define("connectsdk.DataRestrictions",["connectsdk.core","connectsdk.ValidationRuleExpirationDate","connectsdk.ValidationRuleFixedList","connectsdk.ValidationRuleLength","connectsdk.ValidationRuleLuhn","connectsdk.ValidationRuleRange","connectsdk.ValidationRuleRegularExpression","connectsdk.ValidationRuleEmailAddress","connectsdk.ValidationRuleTermsAndConditions","connectsdk.ValidationRuleIban","connectsdk.ValidationRuleFactory"],function(t,e,n,r,i,o,a,s,u,c,l){var h=function(t,e){this.json=t,this.isRequired=t.isRequired,this.validationRules=[],this.validationRuleByType={},function(t,e,n){var r=new l;if(t.validators)for(var i in t.validators){var o=r.makeValidator({type:i,attributes:t.validators[i]});o&&(e.push(o),n[o.type]=o)}}(t,this.validationRules,this.validationRuleByType)};return t.DataRestrictions=h,h}),define("connectsdk.ValueMappingElement",["connectsdk.core"],function(t){var e=function(t){this.json=t,this.displayName=t.displayName,this.value=t.value};return t.ValueMappingElement=e,e}),define("connectsdk.FormElement",["connectsdk.core","connectsdk.ValueMappingElement"],function(t,e){var n=function(t){this.json=t,this.type=t.type,this.valueMapping=[],function(t,n){if(t.valueMapping)for(var r=0,i=t.valueMapping.length;r<i;r++)n.push(new e(t.valueMapping[r]))}(t,this.valueMapping)};return t.FormElement=n,n}),define("connectsdk.Tooltip",["connectsdk.core"],function(t){var e=function(t){this.json=t,this.image=t.image,this.label=t.label};return t.Tooltip=e,e}),define("connectsdk.PaymentProductFieldDisplayHints",["connectsdk.core","connectsdk.Tooltip","connectsdk.FormElement"],function(t,e,n){var r=function(t){this.json=t,this.displayOrder=t.displayOrder,t.formElement&&(this.formElement=new n(t.formElement)),this.label=t.label,this.mask=t.mask,this.obfuscate=t.obfuscate,this.placeholderLabel=t.placeholderLabel,this.preferredInputType=t.preferredInputType,this.tooltip=t.tooltip?new e(t.tooltip):void 0,this.alwaysShow=t.alwaysShow,this.wildcardMask=t.mask?t.mask.replace(/9/g,"*"):""};return t.PaymentProductFieldDisplayHints=r,r}),define("connectsdk.PaymentProductField",["connectsdk.core","connectsdk.PaymentProductFieldDisplayHints","connectsdk.DataRestrictions","connectsdk.MaskingUtil"],function(t,e,n,r){var i=function(t){this.json=t,this.displayHints=t.displayHints?new e(t.displayHints):"",this.dataRestrictions=new n(t.dataRestrictions,this.displayHints?this.displayHints.mask:""),this.id=t.id,this.type=t.type;var i=[];this.getErrorCodes=function(t){return t&&(i=[],this.isValid(t)),i},this.isValid=function(t){var e=this.dataRestrictions.validationRules,n=!1,r=this.applyMask(t);t=this.removeMask(r.formattedValue);for(var o=0,a=e.length;o<a;o++){var s=e[o];s.validate(t)||(n=!0,i.push(s.errorMessageId))}return!n},this.applyMask=function(t,e){return(new r).applyMask(this.displayHints.mask,t,e)},this.applyWildcardMask=function(t,e){return(new r).applyMask(this.displayHints.wildcardMask,t,e)},this.removeMask=function(t){return(new r).removeMask(this.displayHints.mask,t)}};return t.PaymentProductField=i,i}),define("connectsdk.PaymentProduct",["connectsdk.core","connectsdk.BasicPaymentProduct","connectsdk.PaymentProductField"],function(t,e,n){var r=function(t,e,r){if(t.fields)for(var i=0,o=t.fields.length;i<o;i++){var a=new n(t.fields[i]);e.push(a),r[a.id]=a}},i=function(t){var n=new e(t);return n.paymentProductFields=[],n.paymentProductFieldById={},r(n.json,n.paymentProductFields,n.paymentProductFieldById),n};return t.PaymentProduct=i,i}),define("connectsdk.PaymentProductGroup",["connectsdk.core","connectsdk.BasicPaymentProduct","connectsdk.PaymentProductField"],function(t,e,n){var r=function(t,e,r){if(t.fields)for(var i=0,o=t.fields.length;i<o;i++){var a=new n(t.fields[i]);e.push(a),r[a.id]=a}},i=function(t){var n=new e(t);return n.json=t,n.json.type="group",n.paymentProductFields=[],n.paymentProductFieldById={},r(n.json,n.paymentProductFields,n.paymentProductFieldById),n};return t.PaymentProductGroup=i,i}),define("connectsdk.BasicPaymentProducts",["connectsdk.core","connectsdk.BasicPaymentProduct"],function(t,e){var n=function(t,n,r,i,o,a){if(t.paymentProducts)for(var s=0,u=t.paymentProducts.length;s<u;s++){var c=new e(t.paymentProducts[s]);if(n.push(c),i[c.id]=c,c.accountsOnFile)for(var l=c.accountsOnFile,h=0,f=l.length;h<f;h++){var d=l[h];r.push(d),o[d.id]=d,a[d.id]=c}}},r=function(t){this.basicPaymentProducts=[],this.basicPaymentProductById={},this.basicPaymentProductByAccountOnFileId={},this.accountsOnFile=[],this.accountOnFileById={},this.json=t,n(t,this.basicPaymentProducts,this.accountsOnFile,this.basicPaymentProductById,this.accountOnFileById,this.basicPaymentProductByAccountOnFileId)};return t.BasicPaymentProducts=r,r}),define("connectsdk.BasicPaymentProductGroups",["connectsdk.core","connectsdk.BasicPaymentProductGroup"],function(t,e){var n=function(t,n,r,i,o){if(t.paymentProductGroups)for(var a=0,s=t.paymentProductGroups.length;a<s;a++){var u=new e(t.paymentProductGroups[a]);if(n.push(u),i[u.id]=u,u.accountsOnFile)for(var c=u.accountsOnFile,l=0,h=c.length;l<h;l++){var f=c[l];r.push(f),o[f.id]=f}}},r=function(t){this.basicPaymentProductGroups=[],this.basicPaymentProductGroupById={},this.accountsOnFile=[],this.accountOnFileById={},this.json=t,n(t,this.basicPaymentProductGroups,this.accountsOnFile,this.basicPaymentProductGroupById,this.accountOnFileById)};return t.BasicPaymentProductGroups=r,r}),define("connectsdk.BasicPaymentItems",["connectsdk.core"],function(t){"use strict";var e=function(t,e,n){var r=[];if(e){for(var i=0,o=e.basicPaymentProductGroups.length;i<o;i++)for(var a=e.basicPaymentProductGroups[i].id,s=!1,u=0,c=t.basicPaymentProducts.length;u<c;u++){var l=t.basicPaymentProducts[u].paymentProductGroup;l===a&&!1===s?(t.basicPaymentProducts.splice(u,1,e.basicPaymentProductGroups[i]),s=!0):l===a&&!0===s&&r.push(u)}for(var i=r.length-1,o=0;i>=o;i--)t.basicPaymentProducts.splice(r[i],1)}n.basicPaymentItems=JSON.parse(JSON.stringify(t.basicPaymentProducts));for(var i=0,o=n.basicPaymentItems.length;i<o;i++){var h=n.basicPaymentItems[i];if(n.basicPaymentItemById[h.id]=h,h.accountsOnFile)for(var f=h.accountsOnFile,u=0,c=f.length;u<c;u++){var d=f[u];n.accountsOnFile.push(d),n.accountOnFileById[d.id]=d}}},n=function(t,n){this.basicPaymentItems=[],this.basicPaymentItemById={},this.accountsOnFile=[],this.accountOnFileById={},e(t,n,this)};return t.BasicPaymentItems=n,n}),define("connectsdk.PaymentRequest",["connectsdk.core"],function(t){var e=function(t){var e={},n=null,r=null,i=!1;this.isValid=function(){var t=this.getErrorMessageIds(),e=this.getPaymentProduct();if(!e)return!1;for(var n=!0,r=0;r<e.paymentProductFields.length;r++){var i=e.paymentProductFields[r];if(i.dataRestrictions.isRequired){this.getValue(i.id)||this.getAccountOnFile()||(n=!1)}}return 0===t.length&&n},this.setValue=function(t,n){e[t]=n},this.setTokenize=function(t){i=t},this.getTokenize=function(){return i},this.getErrorMessageIds=function(){var t=[];for(key in e){var r=n.paymentProductFieldById[key];r&&(t=t.concat(r.getErrorCodes(e[key])))}return t},this.getValue=function(t){return e[t]},this.getValues=function(){return e},this.getMaskedValue=function(t){return n.paymentProductFieldById[t].applyMask(this.getValue(t)).formattedValue()},this.getMaskedValues=function(){var t=e,r=[];for(var i in t){var o=n.paymentProductFieldById[i],a=o.applyMask(this.getValue(i));r[i]=a.formattedValue}return r},this.getUnmaskedValues=function(){var t=e,r=[];for(var i in t){var o=n.paymentProductFieldById[i];if(o){var a=o.applyMask(this.getValue(i)),s=a.formattedValue;r[i]=o.removeMask(s)}}return r},this.setPaymentProduct=function(t){"group"!==t.type&&(n=t)},this.getPaymentProduct=function(){return n},this.setAccountOnFile=function(t){for(var n=0,i=t.attributes.length;n<i;n++){var o=t.attributes[n];delete e[o.key]}r=t},this.getAccountOnFile=function(){return r},this.getClientSessionID=function(){return t}};return t.PaymentRequest=e,e}),define("connectsdk.C2SPaymentProductContext",["connectsdk.core"],function(t){var e=function(t){this.totalAmount=void 0!==t.totalAmount?t.totalAmount:"",this.countryCode=t.countryCode,this.isRecurring=void 0!==t.isRecurring?t.isRecurring:"",this.currency=t.currency,void 0!==t.locale&&(this.locale=t.locale),void 0!==t.accountOnFileId&&(this.accountOnFileId=parseInt(t.accountOnFileId))};return t.C2SPaymentProductContext=e,e}),define("connectsdk.JOSEEncryptor",["connectsdk.core"],function(t){var e=forge.pki,n=(forge.asn1,function(t){return t=forge.util.encode64(t),t=t.split("=")[0],t=t.replace(/\+/g,"-"),t=t.replace(/\//g,"_")}),r=function(t){var e={alg:"RSA-OAEP",enc:"A256CBC-HS512",kid:t};return JSON.stringify(e)},i=function(t){var n=forge.util.decode64(t),r=forge.util.createBuffer(n,"raw"),i=forge.asn1.fromDer(r);return e.publicKeyFromAsn1(i)},o=function(t,e){return e.encrypt(t,"RSA-OAEP")},a=function(t,e,n){var r=forge.cipher.createCipher("AES-CBC",e);return r.start({iv:n}),r.update(forge.util.createBuffer(t)),r.finish(),r.output.bytes()},s=function(t){var e=forge.util.createBuffer(t),n=8*e.length(),r=forge.util.createBuffer();return r.putInt32(0),r.putInt32(n),r.bytes()},u=function(t,e,n,r,i){var o=forge.util.createBuffer();o.putBytes(e),o.putBytes(n),o.putBytes(r),o.putBytes(i);var a=o.bytes(),s=forge.hmac.create();return s.start(forge.sha512.create(),t),s.update(a),s.digest().bytes()},c=function(){this.encrypt=function(t,e){var c=JSON.stringify(t),l=r(e.keyId),h=n(l),f=forge.random.getBytesSync(64),d=i(e.publicKey),p=o(f,d),y=n(p),g=f.substring(0,32),m=f.substring(32),v=forge.random.getBytesSync(16),S=n(v),b=a(c,m,v),B=n(b),A=s(h),I=u(g,h,v,b,A),w=I.substring(0,I.length/2);return h+"."+y+"."+S+"."+B+"."+n(w)}};return t.JOSEEncryptor=c,c}),define("connectsdk.Encryptor",["connectsdk.core","connectsdk.promise","connectsdk.JOSEEncryptor","connectsdk.Util"],function(t,e,n,r){var i=r.getInstance(),o=function(t){this.encrypt=function(r){var o=new e,a="";return t.then(function(t){if(r.isValid()){var e={clientSessionId:r.getClientSessionID(),nonce:forge.util.bytesToHex(forge.random.getBytesSync(16)),paymentProductId:r.getPaymentProduct().id,tokenize:r.getTokenize()};r.getAccountOnFile()&&(e.accountOnFileId=r.getAccountOnFile().id);for(var s=[],u=r.getUnmaskedValues(),c=Object.getOwnPropertyNames(u),l=0;l<c.length;l++){var h=c[l];"length"!==h&&s.push({key:h,value:u[h]})}e.paymentValues=s,e.collectedDeviceInformation=i.collectDeviceInformation();var f=new n;a=f.encrypt(e,t),o.resolve(a)}else o.reject(r.getErrorMessageIds())},function(t){o.reject(t)}),o}};return t.Encryptor=o,o}),define("connectsdk.Session",["connectsdk.core","connectsdk.C2SCommunicator","connectsdk.C2SCommunicatorConfiguration","connectsdk.IinDetailsResponse","connectsdk.promise","connectsdk.C2SPaymentProductContext","connectsdk.BasicPaymentProducts","connectsdk.BasicPaymentProductGroups","connectsdk.PaymentProduct","connectsdk.PaymentProductGroup","connectsdk.BasicPaymentItems","connectsdk.PaymentRequest","connectsdk.Encryptor"],function(t,e,n,r,i,o,a,s,u,c,l,h,f){var d=function(t,r){var d,p,y,g,m,v,S=new n(t,"client/v1"),b=new e(S,r),B=this;this.clientApiUrl=S.clientApiUrl,this.assetUrl=S.assetUrl,this.getBasicPaymentProducts=function(t,e){var n=new i,r=new o(t);return b.getBasicPaymentProducts(r,e).then(function(e){y=t;var r=new a(e);n.resolve(r)},function(){n.reject()}),n},this.getBasicPaymentProductGroups=function(t){var e=new i,n=new o(t);return b.getBasicPaymentProductGroups(n).then(function(n){y=t;var r=new s(n);e.resolve(r)},function(){e.reject()}),e},this.getBasicPaymentItems=function(t,e,n){var r=new i;return e?B.getBasicPaymentProducts(t,n).then(function(e){B.getBasicPaymentProductGroups(t).then(function(t){var n=new l(e,t);r.resolve(n)},function(){r.reject()})},function(){r.reject()}):B.getBasicPaymentProducts(t,n).then(function(t){var e=new l(t,null);r.resolve(e)},function(){r.reject()}),r},this.getPaymentProduct=function(t,e,n){var r=new i;d=t;var a=new o(y||e);return b.getPaymentProduct(t,a,n).then(function(t){p=new u(t),r.resolve(p)},function(){p=null,r.reject()}),r},this.getPaymentProductGroup=function(t,e){var n=new i;m=t;var r=new o(y||e);return b.getPaymentProductGroup(t,r).then(function(t){v=new c(t),n.resolve(v)},function(){v=null,n.reject()}),n},this.getIinDetails=function(t,e){t=t.replace(/ /g,"").substring(0,6);var n=new o(y||e);return b.getPaymentProductIdByCreditCardNumber(t,n)},this.getPublicKey=function(){return b.getPublicKey()},this.getPaymentProductNetworks=function(t,e){var n=new i,r=new o(e);return b.getPaymentProductNetworks(t,r).then(function(t){y=e,n.resolve(t)},function(){n.reject()}),n},this.getPaymentProductDirectory=function(t,e,n){return b.getPaymentProductDirectory(t,e,n)},this.convertAmount=function(t,e,n){return b.convertAmount(t,e,n)},this.getPaymentRequest=function(){return g||(g=new h(S.clientSessionId)),g},this.getEncryptor=function(){var t=b.getPublicKey();return new f(t)},this.getThirdPartyPaymentStatus=function(t){var e=new i;return b.getThirdPartyPaymentStatus(t).then(function(t){e.resolve(t)},function(){e.reject()}),e},this.getCustomerDetails=function(t,e){return b.getCustomerDetails(t,e)},this.transformPaymentProductJSON=function(t){return new u(b.transformPaymentProductJSON(t))},this.transformPaymentProductGroupJSON=function(t){return new c(b.transformPaymentProductJSON(t))}};return t.Session=d,d});
//# sourceMappingURL=connectsdk.min.js.map
